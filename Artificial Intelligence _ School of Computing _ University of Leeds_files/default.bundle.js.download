var Handlebars,q,portal;if("undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(n){"use strict";var t=n.fn.jquery.split(" ")[0].split(".");if(t[0]<2&&t[1]<9||1==t[0]&&9==t[1]&&t[2]<1)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher");}(jQuery);+function(n){"use strict";function t(){var i=document.createElement("bootstrap"),n={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var t in n)if(void 0!==i.style[t])return{end:n[t]};return!1}n.fn.emulateTransitionEnd=function(t){var i=!1,u=this,r;n(this).one("bsTransitionEnd",function(){i=!0});return r=function(){i||n(u).trigger(n.support.transition.end)},setTimeout(r,t),this};n(function(){n.support.transition=t();n.support.transition&&(n.event.special.bsTransitionEnd={bindType:n.support.transition.end,delegateType:n.support.transition.end,handle:function(t){if(n(t.target).is(this))return t.handleObj.handler.apply(this,arguments)}})})}(jQuery);+function(n){"use strict";function u(i){return this.each(function(){var r=n(this),u=r.data("bs.alert");u||r.data("bs.alert",u=new t(this));"string"==typeof i&&u[i].call(r)})}var i='[data-dismiss="alert"]',t=function(t){n(t).on("click",i,this.close)},r;t.VERSION="3.3.5";t.TRANSITION_DURATION=150;t.prototype.close=function(i){function e(){r.detach().trigger("closed.bs.alert").remove()}var f=n(this),u=f.attr("data-target"),r;u||(u=f.attr("href"),u=u&&u.replace(/.*(?=#[^\s]*$)/,""));r=n(u);i&&i.preventDefault();r.length||(r=f.closest(".alert"));r.trigger(i=n.Event("close.bs.alert"));i.isDefaultPrevented()||(r.removeClass("in"),n.support.transition&&r.hasClass("fade")?r.one("bsTransitionEnd",e).emulateTransitionEnd(t.TRANSITION_DURATION):e())};r=n.fn.alert;n.fn.alert=u;n.fn.alert.Constructor=t;n.fn.alert.noConflict=function(){return n.fn.alert=r,this};n(document).on("click.bs.alert.data-api",i,t.prototype.close)}(jQuery);+function(n){"use strict";function i(i){return this.each(function(){var u=n(this),r=u.data("bs.button"),f="object"==typeof i&&i;r||u.data("bs.button",r=new t(this,f));"toggle"==i?r.toggle():i&&r.setState(i)})}var t=function(i,r){this.$element=n(i);this.options=n.extend({},t.DEFAULTS,r);this.isLoading=!1},r;t.VERSION="3.3.5";t.DEFAULTS={loadingText:"loading..."};t.prototype.setState=function(t){var r="disabled",i=this.$element,f=i.is("input")?"val":"html",u=i.data();t+="Text";null==u.resetText&&i.data("resetText",i[f]());setTimeout(n.proxy(function(){i[f](null==u[t]?this.options[t]:u[t]);"loadingText"==t?(this.isLoading=!0,i.addClass(r).attr(r,r)):this.isLoading&&(this.isLoading=!1,i.removeClass(r).removeAttr(r))},this),0)};t.prototype.toggle=function(){var t=!0,i=this.$element.closest('[data-toggle="buttons"]'),n;i.length?(n=this.$element.find("input"),"radio"==n.prop("type")?(n.prop("checked")&&(t=!1),i.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==n.prop("type")&&(n.prop("checked")!==this.$element.hasClass("active")&&(t=!1),this.$element.toggleClass("active")),n.prop("checked",this.$element.hasClass("active")),t&&n.trigger("change")):(this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active"))};r=n.fn.button;n.fn.button=i;n.fn.button.Constructor=t;n.fn.button.noConflict=function(){return n.fn.button=r,this};n(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(t){var r=n(t.target);r.hasClass("btn")||(r=r.closest(".btn"));i.call(r,"toggle");n(t.target).is('input[type="radio"]')||n(t.target).is('input[type="checkbox"]')||t.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(t){n(t.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(t.type))})}(jQuery);+function(n){"use strict";function i(i){return this.each(function(){var u=n(this),r=u.data("bs.carousel"),f=n.extend({},t.DEFAULTS,u.data(),"object"==typeof i&&i),e="string"==typeof i?i:f.slide;r||u.data("bs.carousel",r=new t(this,f));"number"==typeof i?r.to(i):e?r[e]():f.interval&&r.pause().cycle()})}var t=function(t,i){this.$element=n(t);this.$indicators=this.$element.find(".carousel-indicators");this.options=i;this.paused=null;this.sliding=null;this.interval=null;this.$active=null;this.$items=null;this.options.keyboard&&this.$element.on("keydown.bs.carousel",n.proxy(this.keydown,this));"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",n.proxy(this.pause,this)).on("mouseleave.bs.carousel",n.proxy(this.cycle,this))},u,r;t.VERSION="3.3.5";t.TRANSITION_DURATION=600;t.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0};t.prototype.keydown=function(n){if(!/input|textarea/i.test(n.target.tagName)){switch(n.which){case 37:this.prev();break;case 39:this.next();break;default:return}n.preventDefault()}};t.prototype.cycle=function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(n.proxy(this.next,this),this.options.interval)),this};t.prototype.getItemIndex=function(n){return this.$items=n.parent().children(".item"),this.$items.index(n||this.$active)};t.prototype.getItemForDirection=function(n,t){var i=this.getItemIndex(t),f="prev"==n&&0===i||"next"==n&&i==this.$items.length-1,r,u;return f&&!this.options.wrap?t:(r="prev"==n?-1:1,u=(i+r)%this.$items.length,this.$items.eq(u))};t.prototype.to=function(n){var i=this,t=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(!(n>this.$items.length-1)&&!(0>n))return this.sliding?this.$element.one("slid.bs.carousel",function(){i.to(n)}):t==n?this.pause().cycle():this.slide(n>t?"next":"prev",this.$items.eq(n))};t.prototype.pause=function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&n.support.transition&&(this.$element.trigger(n.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this};t.prototype.next=function(){if(!this.sliding)return this.slide("next")};t.prototype.prev=function(){if(!this.sliding)return this.slide("prev")};t.prototype.slide=function(i,r){var e=this.$element.find(".item.active"),u=r||this.getItemForDirection(i,e),l=this.interval,f="next"==i?"left":"right",a=this,o,s,h,c;return u.hasClass("active")?this.sliding=!1:(o=u[0],s=n.Event("slide.bs.carousel",{relatedTarget:o,direction:f}),(this.$element.trigger(s),!s.isDefaultPrevented())?((this.sliding=!0,l&&this.pause(),this.$indicators.length)&&(this.$indicators.find(".active").removeClass("active"),h=n(this.$indicators.children()[this.getItemIndex(u)]),h&&h.addClass("active")),c=n.Event("slid.bs.carousel",{relatedTarget:o,direction:f}),n.support.transition&&this.$element.hasClass("slide")?(u.addClass(i),u[0].offsetWidth,e.addClass(f),u.addClass(f),e.one("bsTransitionEnd",function(){u.removeClass([i,f].join(" ")).addClass("active");e.removeClass(["active",f].join(" "));a.sliding=!1;setTimeout(function(){a.$element.trigger(c)},0)}).emulateTransitionEnd(t.TRANSITION_DURATION)):(e.removeClass("active"),u.addClass("active"),this.sliding=!1,this.$element.trigger(c)),l&&this.cycle(),this):void 0)};u=n.fn.carousel;n.fn.carousel=i;n.fn.carousel.Constructor=t;n.fn.carousel.noConflict=function(){return n.fn.carousel=u,this};r=function(t){var o,r=n(this),u=n(r.attr("data-target")||(o=r.attr("href"))&&o.replace(/.*(?=#[^\s]+$)/,"")),e,f;u.hasClass("carousel")&&(e=n.extend({},u.data(),r.data()),f=r.attr("data-slide-to"),f&&(e.interval=!1),i.call(u,e),f&&u.data("bs.carousel").to(f),t.preventDefault())};n(document).on("click.bs.carousel.data-api","[data-slide]",r).on("click.bs.carousel.data-api","[data-slide-to]",r);n(window).on("load",function(){n('[data-ride="carousel"]').each(function(){var t=n(this);i.call(t,t.data())})})}(jQuery);+function(n){"use strict";function r(t){var i,r=t.attr("data-target")||(i=t.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,"");return n(r)}function i(i){return this.each(function(){var u=n(this),r=u.data("bs.collapse"),f=n.extend({},t.DEFAULTS,u.data(),"object"==typeof i&&i);!r&&f.toggle&&/show|hide/.test(i)&&(f.toggle=!1);r||u.data("bs.collapse",r=new t(this,f));"string"==typeof i&&r[i]()})}var t=function(i,r){this.$element=n(i);this.options=n.extend({},t.DEFAULTS,r);this.$trigger=n('[data-toggle="collapse"][href="#'+i.id+'"],[data-toggle="collapse"][data-target="#'+i.id+'"]');this.transitioning=null;this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger);this.options.toggle&&this.toggle()},u;t.VERSION="3.3.5";t.TRANSITION_DURATION=350;t.DEFAULTS={toggle:!0};t.prototype.dimension=function(){var n=this.$element.hasClass("width");return n?"width":"height"};t.prototype.show=function(){var f,r,e,u,o,s;if(!this.transitioning&&!this.$element.hasClass("in")&&(r=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing"),!(r&&r.length&&(f=r.data("bs.collapse"),f&&f.transitioning))&&(e=n.Event("show.bs.collapse"),this.$element.trigger(e),!e.isDefaultPrevented()))){if(r&&r.length&&(i.call(r,"hide"),f||r.data("bs.collapse",null)),u=this.dimension(),this.$element.removeClass("collapse").addClass("collapsing")[u](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1,o=function(){this.$element.removeClass("collapsing").addClass("collapse in")[u]("");this.transitioning=0;this.$element.trigger("shown.bs.collapse")},!n.support.transition)return o.call(this);s=n.camelCase(["scroll",u].join("-"));this.$element.one("bsTransitionEnd",n.proxy(o,this)).emulateTransitionEnd(t.TRANSITION_DURATION)[u](this.$element[0][s])}};t.prototype.hide=function(){var r,i,u;if(!this.transitioning&&this.$element.hasClass("in")&&(r=n.Event("hide.bs.collapse"),this.$element.trigger(r),!r.isDefaultPrevented()))return i=this.dimension(),this.$element[i](this.$element[i]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1,u=function(){this.transitioning=0;this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")},n.support.transition?void this.$element[i](0).one("bsTransitionEnd",n.proxy(u,this)).emulateTransitionEnd(t.TRANSITION_DURATION):u.call(this)};t.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};t.prototype.getParent=function(){return n(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(n.proxy(function(t,i){var u=n(i);this.addAriaAndCollapsedClass(r(u),u)},this)).end()};t.prototype.addAriaAndCollapsedClass=function(n,t){var i=n.hasClass("in");n.attr("aria-expanded",i);t.toggleClass("collapsed",!i).attr("aria-expanded",i)};u=n.fn.collapse;n.fn.collapse=i;n.fn.collapse.Constructor=t;n.fn.collapse.noConflict=function(){return n.fn.collapse=u,this};n(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(t){var u=n(this);u.attr("data-target")||t.preventDefault();var f=r(u),e=f.data("bs.collapse"),o=e?"toggle":u.data();i.call(f,o)})}(jQuery);+function(n){"use strict";function r(t){var i=t.attr("data-target"),r;return i||(i=t.attr("href"),i=i&&/#[A-Za-z]/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,"")),r=i&&n(i),r&&r.length?r:t.parent()}function u(t){t&&3===t.which||(n(o).remove(),n(i).each(function(){var u=n(this),i=r(u),f={relatedTarget:this};i.hasClass("open")&&(t&&"click"==t.type&&/input|textarea/i.test(t.target.tagName)&&n.contains(i[0],t.target)||(i.trigger(t=n.Event("hide.bs.dropdown",f)),t.isDefaultPrevented()||(u.attr("aria-expanded","false"),i.removeClass("open").trigger("hidden.bs.dropdown",f))))}))}function e(i){return this.each(function(){var r=n(this),u=r.data("bs.dropdown");u||r.data("bs.dropdown",u=new t(this));"string"==typeof i&&u[i].call(r)})}var o=".dropdown-backdrop",i='[data-toggle="dropdown"]',t=function(t){n(t).on("click.bs.dropdown",this.toggle)},f;t.VERSION="3.3.5";t.prototype.toggle=function(t){var f=n(this),i,o,e;if(!f.is(".disabled, :disabled")){if(i=r(f),o=i.hasClass("open"),u(),!o){if("ontouchstart"in document.documentElement&&!i.closest(".navbar-nav").length&&n(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(n(this)).on("click",u),e={relatedTarget:this},i.trigger(t=n.Event("show.bs.dropdown",e)),t.isDefaultPrevented())return;f.trigger("focus").attr("aria-expanded","true");i.toggleClass("open").trigger("shown.bs.dropdown",e)}return!1}};t.prototype.keydown=function(t){var e,o,s,h,f,u;if(/(38|40|27|32)/.test(t.which)&&!/input|textarea/i.test(t.target.tagName)&&(e=n(this),t.preventDefault(),t.stopPropagation(),!e.is(".disabled, :disabled"))){if(o=r(e),s=o.hasClass("open"),!s&&27!=t.which||s&&27==t.which)return 27==t.which&&o.find(i).trigger("focus"),e.trigger("click");h=" li:not(.disabled):visible a";f=o.find(".dropdown-menu"+h);f.length&&(u=f.index(t.target),38==t.which&&u>0&&u--,40==t.which&&u<f.length-1&&u++,~u||(u=0),f.eq(u).trigger("focus"))}};f=n.fn.dropdown;n.fn.dropdown=e;n.fn.dropdown.Constructor=t;n.fn.dropdown.noConflict=function(){return n.fn.dropdown=f,this};n(document).on("click.bs.dropdown.data-api",u).on("click.bs.dropdown.data-api",".dropdown form",function(n){n.stopPropagation()}).on("click.bs.dropdown.data-api",i,t.prototype.toggle).on("keydown.bs.dropdown.data-api",i,t.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",t.prototype.keydown)}(jQuery);+function(n){"use strict";function i(i,r){return this.each(function(){var f=n(this),u=f.data("bs.modal"),e=n.extend({},t.DEFAULTS,f.data(),"object"==typeof i&&i);u||f.data("bs.modal",u=new t(this,e));"string"==typeof i?u[i](r):e.show&&u.show(r)})}var t=function(t,i){this.options=i;this.$body=n(document.body);this.$element=n(t);this.$dialog=this.$element.find(".modal-dialog");this.$backdrop=null;this.isShown=null;this.originalBodyPad=null;this.scrollbarWidth=0;this.ignoreBackdropClick=!1;this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,n.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))},r;t.VERSION="3.3.5";t.TRANSITION_DURATION=300;t.BACKDROP_TRANSITION_DURATION=150;t.DEFAULTS={backdrop:!0,keyboard:!0,show:!0};t.prototype.toggle=function(n){return this.isShown?this.hide():this.show(n)};t.prototype.show=function(i){var r=this,u=n.Event("show.bs.modal",{relatedTarget:i});this.$element.trigger(u);this.isShown||u.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',n.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){r.$element.one("mouseup.dismiss.bs.modal",function(t){n(t.target).is(r.$element)&&(r.ignoreBackdropClick=!0)})}),this.backdrop(function(){var f=n.support.transition&&r.$element.hasClass("fade"),u;r.$element.parent().length||r.$element.appendTo(r.$body);r.$element.show().scrollTop(0);r.adjustDialog();f&&r.$element[0].offsetWidth;r.$element.addClass("in");r.enforceFocus();u=n.Event("shown.bs.modal",{relatedTarget:i});f?r.$dialog.one("bsTransitionEnd",function(){r.$element.trigger("focus").trigger(u)}).emulateTransitionEnd(t.TRANSITION_DURATION):r.$element.trigger("focus").trigger(u)}))};t.prototype.hide=function(i){i&&i.preventDefault();i=n.Event("hide.bs.modal");this.$element.trigger(i);this.isShown&&!i.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),n(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),n.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",n.proxy(this.hideModal,this)).emulateTransitionEnd(t.TRANSITION_DURATION):this.hideModal())};t.prototype.enforceFocus=function(){n(document).off("focusin.bs.modal").on("focusin.bs.modal",n.proxy(function(n){this.$element[0]===n.target||this.$element.has(n.target).length||this.$element.trigger("focus")},this))};t.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",n.proxy(function(n){27==n.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")};t.prototype.resize=function(){this.isShown?n(window).on("resize.bs.modal",n.proxy(this.handleUpdate,this)):n(window).off("resize.bs.modal")};t.prototype.hideModal=function(){var n=this;this.$element.hide();this.backdrop(function(){n.$body.removeClass("modal-open");n.resetAdjustments();n.resetScrollbar();n.$element.trigger("hidden.bs.modal")})};t.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove();this.$backdrop=null};t.prototype.backdrop=function(i){var e=this,f=this.$element.hasClass("fade")?"fade":"",r,u;if(this.isShown&&this.options.backdrop){if(r=n.support.transition&&f,this.$backdrop=n(document.createElement("div")).addClass("modal-backdrop "+f).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",n.proxy(function(n){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(n.target===n.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),r&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!i)return;r?this.$backdrop.one("bsTransitionEnd",i).emulateTransitionEnd(t.BACKDROP_TRANSITION_DURATION):i()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),u=function(){e.removeBackdrop();i&&i()},n.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",u).emulateTransitionEnd(t.BACKDROP_TRANSITION_DURATION):u()):i&&i()};t.prototype.handleUpdate=function(){this.adjustDialog()};t.prototype.adjustDialog=function(){var n=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&n?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!n?this.scrollbarWidth:""})};t.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})};t.prototype.checkScrollbar=function(){var n=window.innerWidth,t;n||(t=document.documentElement.getBoundingClientRect(),n=t.right-Math.abs(t.left));this.bodyIsOverflowing=document.body.clientWidth<n;this.scrollbarWidth=this.measureScrollbar()};t.prototype.setScrollbar=function(){var n=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"";this.bodyIsOverflowing&&this.$body.css("padding-right",n+this.scrollbarWidth)};t.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)};t.prototype.measureScrollbar=function(){var n=document.createElement("div"),t;return n.className="modal-scrollbar-measure",this.$body.append(n),t=n.offsetWidth-n.clientWidth,this.$body[0].removeChild(n),t};r=n.fn.modal;n.fn.modal=i;n.fn.modal.Constructor=t;n.fn.modal.noConflict=function(){return n.fn.modal=r,this};n(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(t){var r=n(this),f=r.attr("href"),u=n(r.attr("data-target")||f&&f.replace(/.*(?=#[^\s]+$)/,"")),e=u.data("bs.modal")?"toggle":n.extend({remote:!/#/.test(f)&&f},u.data(),r.data());r.is("a")&&t.preventDefault();u.one("show.bs.modal",function(n){n.isDefaultPrevented()||u.one("hidden.bs.modal",function(){r.is(":visible")&&r.trigger("focus")})});i.call(u,e,this)})}(jQuery);+function(n){"use strict";function r(i){return this.each(function(){var u=n(this),r=u.data("bs.tooltip"),f="object"==typeof i&&i;(r||!/destroy|hide/.test(i))&&(r||u.data("bs.tooltip",r=new t(this,f)),"string"==typeof i&&r[i]())})}var t=function(n,t){this.type=null;this.options=null;this.enabled=null;this.timeout=null;this.hoverState=null;this.$element=null;this.inState=null;this.init("tooltip",n,t)},i;t.VERSION="3.3.5";t.TRANSITION_DURATION=150;t.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"><\/div><div class="tooltip-inner"><\/div><\/div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}};t.prototype.init=function(t,i,r){var f,e,u,o,s;if(this.enabled=!0,this.type=t,this.$element=n(i),this.options=this.getOptions(r),this.$viewport=this.options.viewport&&n(n.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(f=this.options.trigger.split(" "),e=f.length;e--;)if(u=f[e],"click"==u)this.$element.on("click."+this.type,this.options.selector,n.proxy(this.toggle,this));else"manual"!=u&&(o="hover"==u?"mouseenter":"focusin",s="hover"==u?"mouseleave":"focusout",this.$element.on(o+"."+this.type,this.options.selector,n.proxy(this.enter,this)),this.$element.on(s+"."+this.type,this.options.selector,n.proxy(this.leave,this)));this.options.selector?this._options=n.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()};t.prototype.getDefaults=function(){return t.DEFAULTS};t.prototype.getOptions=function(t){return t=n.extend({},this.getDefaults(),this.$element.data(),t),t.delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t};t.prototype.getDelegateOptions=function(){var t={},i=this.getDefaults();return this._options&&n.each(this._options,function(n,r){i[n]!=r&&(t[n]=r)}),t};t.prototype.enter=function(t){var i=t instanceof this.constructor?t:n(t.currentTarget).data("bs."+this.type);return i||(i=new this.constructor(t.currentTarget,this.getDelegateOptions()),n(t.currentTarget).data("bs."+this.type,i)),t instanceof n.Event&&(i.inState["focusin"==t.type?"focus":"hover"]=!0),i.tip().hasClass("in")||"in"==i.hoverState?void(i.hoverState="in"):(clearTimeout(i.timeout),i.hoverState="in",i.options.delay&&i.options.delay.show?void(i.timeout=setTimeout(function(){"in"==i.hoverState&&i.show()},i.options.delay.show)):i.show())};t.prototype.isInStateTrue=function(){for(var n in this.inState)if(this.inState[n])return!0;return!1};t.prototype.leave=function(t){var i=t instanceof this.constructor?t:n(t.currentTarget).data("bs."+this.type);return i||(i=new this.constructor(t.currentTarget,this.getDelegateOptions()),n(t.currentTarget).data("bs."+this.type,i)),t instanceof n.Event&&(i.inState["focusout"==t.type?"focus":"hover"]=!1),i.isInStateTrue()?void 0:(clearTimeout(i.timeout),i.hoverState="out",i.options.delay&&i.options.delay.hide?void(i.timeout=setTimeout(function(){"out"==i.hoverState&&i.hide()},i.options.delay.hide)):i.hide())};t.prototype.show=function(){var c=n.Event("show.bs."+this.type),l,p,e,w,h;if(this.hasContent()&&this.enabled){if(this.$element.trigger(c),l=n.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]),c.isDefaultPrevented()||!l)return;var u=this,r=this.tip(),a=this.getUID(this.type);this.setContent();r.attr("id",a);this.$element.attr("aria-describedby",a);this.options.animation&&r.addClass("fade");var i="function"==typeof this.options.placement?this.options.placement.call(this,r[0],this.$element[0]):this.options.placement,v=/\s?auto?\s?/i,y=v.test(i);y&&(i=i.replace(v,"")||"top");r.detach().css({top:0,left:0,display:"block"}).addClass(i).data("bs."+this.type,this);this.options.container?r.appendTo(this.options.container):r.insertAfter(this.$element);this.$element.trigger("inserted.bs."+this.type);var f=this.getPosition(),o=r[0].offsetWidth,s=r[0].offsetHeight;y&&(p=i,e=this.getPosition(this.$viewport),i="bottom"==i&&f.bottom+s>e.bottom?"top":"top"==i&&f.top-s<e.top?"bottom":"right"==i&&f.right+o>e.width?"left":"left"==i&&f.left-o<e.left?"right":i,r.removeClass(p).addClass(i));w=this.getCalculatedOffset(i,f,o,s);this.applyPlacement(w,i);h=function(){var n=u.hoverState;u.$element.trigger("shown.bs."+u.type);u.hoverState=null;"out"==n&&u.leave(u)};n.support.transition&&this.$tip.hasClass("fade")?r.one("bsTransitionEnd",h).emulateTransitionEnd(t.TRANSITION_DURATION):h()}};t.prototype.applyPlacement=function(t,i){var r=this.tip(),l=r[0].offsetWidth,e=r[0].offsetHeight,o=parseInt(r.css("margin-top"),10),s=parseInt(r.css("margin-left"),10),h,f,u;isNaN(o)&&(o=0);isNaN(s)&&(s=0);t.top+=o;t.left+=s;n.offset.setOffset(r[0],n.extend({using:function(n){r.css({top:Math.round(n.top),left:Math.round(n.left)})}},t),0);r.addClass("in");h=r[0].offsetWidth;f=r[0].offsetHeight;"top"==i&&f!=e&&(t.top=t.top+e-f);u=this.getViewportAdjustedDelta(i,t,h,f);u.left?t.left+=u.left:t.top+=u.top;var c=/top|bottom/.test(i),a=c?2*u.left-l+h:2*u.top-e+f,v=c?"offsetWidth":"offsetHeight";r.offset(t);this.replaceArrow(a,r[0][v],c)};t.prototype.replaceArrow=function(n,t,i){this.arrow().css(i?"left":"top",50*(1-n/t)+"%").css(i?"top":"left","")};t.prototype.setContent=function(){var n=this.tip(),t=this.getTitle();n.find(".tooltip-inner")[this.options.html?"html":"text"](t);n.removeClass("fade in top bottom left right")};t.prototype.hide=function(i){function f(){"in"!=u.hoverState&&r.detach();u.$element.removeAttr("aria-describedby").trigger("hidden.bs."+u.type);i&&i()}var u=this,r=n(this.$tip),e=n.Event("hide.bs."+this.type);return this.$element.trigger(e),e.isDefaultPrevented()?void 0:(r.removeClass("in"),n.support.transition&&r.hasClass("fade")?r.one("bsTransitionEnd",f).emulateTransitionEnd(t.TRANSITION_DURATION):f(),this.hoverState=null,this)};t.prototype.fixTitle=function(){var n=this.$element;(n.attr("title")||"string"!=typeof n.attr("data-original-title"))&&n.attr("data-original-title",n.attr("title")||"").attr("title","")};t.prototype.hasContent=function(){return this.getTitle()};t.prototype.getPosition=function(t){t=t||this.$element;var u=t[0],r="BODY"==u.tagName,i=u.getBoundingClientRect();null==i.width&&(i=n.extend({},i,{width:i.right-i.left,height:i.bottom-i.top}));var f=r?{top:0,left:0}:t.offset(),e={scroll:r?document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop()},o=r?{width:n(window).width(),height:n(window).height()}:null;return n.extend({},i,e,o,f)};t.prototype.getCalculatedOffset=function(n,t,i,r){return"bottom"==n?{top:t.top+t.height,left:t.left+t.width/2-i/2}:"top"==n?{top:t.top-r,left:t.left+t.width/2-i/2}:"left"==n?{top:t.top+t.height/2-r/2,left:t.left-i}:{top:t.top+t.height/2-r/2,left:t.left+t.width}};t.prototype.getViewportAdjustedDelta=function(n,t,i,r){var f={top:0,left:0},e,u,o,s,h,c;return this.$viewport?(e=this.options.viewport&&this.options.viewport.padding||0,u=this.getPosition(this.$viewport),/right|left/.test(n)?(o=t.top-e-u.scroll,s=t.top+e-u.scroll+r,o<u.top?f.top=u.top-o:s>u.top+u.height&&(f.top=u.top+u.height-s)):(h=t.left-e,c=t.left+e+i,h<u.left?f.left=u.left-h:c>u.right&&(f.left=u.left+u.width-c)),f):f};t.prototype.getTitle=function(){var t=this.$element,n=this.options;return t.attr("data-original-title")||("function"==typeof n.title?n.title.call(t[0]):n.title)};t.prototype.getUID=function(n){do n+=~~(1e6*Math.random());while(document.getElementById(n));return n};t.prototype.tip=function(){if(!this.$tip&&(this.$tip=n(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip};t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")};t.prototype.enable=function(){this.enabled=!0};t.prototype.disable=function(){this.enabled=!1};t.prototype.toggleEnabled=function(){this.enabled=!this.enabled};t.prototype.toggle=function(t){var i=this;t&&(i=n(t.currentTarget).data("bs."+this.type),i||(i=new this.constructor(t.currentTarget,this.getDelegateOptions()),n(t.currentTarget).data("bs."+this.type,i)));t?(i.inState.click=!i.inState.click,i.isInStateTrue()?i.enter(i):i.leave(i)):i.tip().hasClass("in")?i.leave(i):i.enter(i)};t.prototype.destroy=function(){var n=this;clearTimeout(this.timeout);this.hide(function(){n.$element.off("."+n.type).removeData("bs."+n.type);n.$tip&&n.$tip.detach();n.$tip=null;n.$arrow=null;n.$viewport=null})};i=n.fn.tooltip;n.fn.tooltip=r;n.fn.tooltip.Constructor=t;n.fn.tooltip.noConflict=function(){return n.fn.tooltip=i,this}}(jQuery);+function(n){"use strict";function r(i){return this.each(function(){var u=n(this),r=u.data("bs.popover"),f="object"==typeof i&&i;(r||!/destroy|hide/.test(i))&&(r||u.data("bs.popover",r=new t(this,f)),"string"==typeof i&&r[i]())})}var t=function(n,t){this.init("popover",n,t)},i;if(!n.fn.tooltip)throw new Error("Popover requires tooltip.js");t.VERSION="3.3.5";t.DEFAULTS=n.extend({},n.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"><\/div><h3 class="popover-title"><\/h3><div class="popover-content"><\/div><\/div>'});t.prototype=n.extend({},n.fn.tooltip.Constructor.prototype);t.prototype.constructor=t;t.prototype.getDefaults=function(){return t.DEFAULTS};t.prototype.setContent=function(){var n=this.tip(),i=this.getTitle(),t=this.getContent();n.find(".popover-title")[this.options.html?"html":"text"](i);n.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof t?"html":"append":"text"](t);n.removeClass("fade top bottom left right in");n.find(".popover-title").html()||n.find(".popover-title").hide()};t.prototype.hasContent=function(){return this.getTitle()||this.getContent()};t.prototype.getContent=function(){var t=this.$element,n=this.options;return t.attr("data-content")||("function"==typeof n.content?n.content.call(t[0]):n.content)};t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};i=n.fn.popover;n.fn.popover=r;n.fn.popover.Constructor=t;n.fn.popover.noConflict=function(){return n.fn.popover=i,this}}(jQuery);+function(n){"use strict";function t(i,r){this.$body=n(document.body);this.$scrollElement=n(n(i).is(document.body)?window:i);this.options=n.extend({},t.DEFAULTS,r);this.selector=(this.options.target||"")+" .nav li > a";this.offsets=[];this.targets=[];this.activeTarget=null;this.scrollHeight=0;this.$scrollElement.on("scroll.bs.scrollspy",n.proxy(this.process,this));this.refresh();this.process()}function i(i){return this.each(function(){var u=n(this),r=u.data("bs.scrollspy"),f="object"==typeof i&&i;r||u.data("bs.scrollspy",r=new t(this,f));"string"==typeof i&&r[i]()})}t.VERSION="3.3.5";t.DEFAULTS={offset:10};t.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)};t.prototype.refresh=function(){var t=this,i="offset",r=0;this.offsets=[];this.targets=[];this.scrollHeight=this.getScrollHeight();n.isWindow(this.$scrollElement[0])||(i="position",r=this.$scrollElement.scrollTop());this.$body.find(this.selector).map(function(){var f=n(this),u=f.data("target")||f.attr("href"),t=/^#./.test(u)&&n(u);return t&&t.length&&t.is(":visible")&&[[t[i]().top+r,u]]||null}).sort(function(n,t){return n[0]-t[0]}).each(function(){t.offsets.push(this[0]);t.targets.push(this[1])})};t.prototype.process=function(){var n,i=this.$scrollElement.scrollTop()+this.options.offset,f=this.getScrollHeight(),e=this.options.offset+f-this.$scrollElement.height(),t=this.offsets,r=this.targets,u=this.activeTarget;if(this.scrollHeight!=f&&this.refresh(),i>=e)return u!=(n=r[r.length-1])&&this.activate(n);if(u&&i<t[0])return this.activeTarget=null,this.clear();for(n=t.length;n--;)u!=r[n]&&i>=t[n]&&(void 0===t[n+1]||i<t[n+1])&&this.activate(r[n])};t.prototype.activate=function(t){this.activeTarget=t;this.clear();var r=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',i=n(r).parents("li").addClass("active");i.parent(".dropdown-menu").length&&(i=i.closest("li.dropdown").addClass("active"));i.trigger("activate.bs.scrollspy")};t.prototype.clear=function(){n(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var r=n.fn.scrollspy;n.fn.scrollspy=i;n.fn.scrollspy.Constructor=t;n.fn.scrollspy.noConflict=function(){return n.fn.scrollspy=r,this};n(window).on("load.bs.scrollspy.data-api",function(){n('[data-spy="scroll"]').each(function(){var t=n(this);i.call(t,t.data())})})}(jQuery);+function(n){"use strict";function r(i){return this.each(function(){var u=n(this),r=u.data("bs.tab");r||u.data("bs.tab",r=new t(this));"string"==typeof i&&r[i]()})}var t=function(t){this.element=n(t)},u,i;t.VERSION="3.3.5";t.TRANSITION_DURATION=150;t.prototype.show=function(){var t=this.element,f=t.closest("ul:not(.dropdown-menu)"),i=t.data("target"),u;if(i||(i=t.attr("href"),i=i&&i.replace(/.*(?=#[^\s]*$)/,"")),!t.parent("li").hasClass("active")){var r=f.find(".active:last a"),e=n.Event("hide.bs.tab",{relatedTarget:t[0]}),o=n.Event("show.bs.tab",{relatedTarget:r[0]});(r.trigger(e),t.trigger(o),o.isDefaultPrevented()||e.isDefaultPrevented())||(u=n(i),this.activate(t.closest("li"),f),this.activate(u,u.parent(),function(){r.trigger({type:"hidden.bs.tab",relatedTarget:t[0]});t.trigger({type:"shown.bs.tab",relatedTarget:r[0]})}))}};t.prototype.activate=function(i,r,u){function e(){f.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1);i.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0);o?(i[0].offsetWidth,i.addClass("in")):i.removeClass("fade");i.parent(".dropdown-menu").length&&i.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0);u&&u()}var f=r.find("> .active"),o=u&&n.support.transition&&(f.length&&f.hasClass("fade")||!!r.find("> .fade").length);f.length&&o?f.one("bsTransitionEnd",e).emulateTransitionEnd(t.TRANSITION_DURATION):e();f.removeClass("in")};u=n.fn.tab;n.fn.tab=r;n.fn.tab.Constructor=t;n.fn.tab.noConflict=function(){return n.fn.tab=u,this};i=function(t){t.preventDefault();r.call(n(this),"show")};n(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',i).on("click.bs.tab.data-api",'[data-toggle="pill"]',i)}(jQuery);+function(n){"use strict";function i(i){return this.each(function(){var u=n(this),r=u.data("bs.affix"),f="object"==typeof i&&i;r||u.data("bs.affix",r=new t(this,f));"string"==typeof i&&r[i]()})}var t=function(i,r){this.options=n.extend({},t.DEFAULTS,r);this.$target=n(this.options.target).on("scroll.bs.affix.data-api",n.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",n.proxy(this.checkPositionWithEventLoop,this));this.$element=n(i);this.affixed=null;this.unpin=null;this.pinnedOffset=null;this.checkPosition()},r;t.VERSION="3.3.5";t.RESET="affix affix-top affix-bottom";t.DEFAULTS={offset:0,target:window};t.prototype.getState=function(n,t,i,r){var u=this.$target.scrollTop(),f=this.$element.offset(),e=this.$target.height();if(null!=i&&"top"==this.affixed)return i>u?"top":!1;if("bottom"==this.affixed)return null!=i?u+this.unpin<=f.top?!1:"bottom":n-r>=u+e?!1:"bottom";var o=null==this.affixed,s=o?u:f.top,h=o?e:t;return null!=i&&i>=u?"top":null!=r&&s+h>=n-r?"bottom":!1};t.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(t.RESET).addClass("affix");var n=this.$target.scrollTop(),i=this.$element.offset();return this.pinnedOffset=i.top-n};t.prototype.checkPositionWithEventLoop=function(){setTimeout(n.proxy(this.checkPosition,this),1)};t.prototype.checkPosition=function(){var i,e,o;if(this.$element.is(":visible")){var s=this.$element.height(),r=this.options.offset,f=r.top,u=r.bottom,h=Math.max(n(document).height(),n(document.body).height());if("object"!=typeof r&&(u=f=r),"function"==typeof f&&(f=r.top(this.$element)),"function"==typeof u&&(u=r.bottom(this.$element)),i=this.getState(h,s,f,u),this.affixed!=i){if(null!=this.unpin&&this.$element.css("top",""),e="affix"+(i?"-"+i:""),o=n.Event(e+".bs.affix"),this.$element.trigger(o),o.isDefaultPrevented())return;this.affixed=i;this.unpin="bottom"==i?this.getPinnedOffset():null;this.$element.removeClass(t.RESET).addClass(e).trigger(e.replace("affix","affixed")+".bs.affix")}"bottom"==i&&this.$element.offset({top:h-s-u})}};r=n.fn.affix;n.fn.affix=i;n.fn.affix.Constructor=t;n.fn.affix.noConflict=function(){return n.fn.affix=r,this};n(window).on("load",function(){n('[data-spy="affix"]').each(function(){var r=n(this),t=r.data();t.offset=t.offset||{};null!=t.offsetBottom&&(t.offset.bottom=t.offsetBottom);null!=t.offsetTop&&(t.offset.top=t.offsetTop);i.call(r,t)})})}(jQuery);window.addEventListener||function(n,t,i,r,u,f,e){n[r]=t[r]=i[r]=function(n,t){var i=this;e.unshift([i,n,t,function(n){n.currentTarget=i;n.preventDefault=function(){n.returnValue=!1};n.stopPropagation=function(){n.cancelBubble=!0};n.target=n.srcElement||i;t.call(i,n)}]);this.attachEvent("on"+n,e[0][3])};n[u]=t[u]=i[u]=function(n,t){for(var r=0,i;i=e[r];++r)if(i[0]==this&&i[1]==n&&i[2]==t)return this.detachEvent("on"+n,e.splice(r,1)[0][3])};n[f]=t[f]=i[f]=function(n){return this.fireEvent("on"+n.type,n)}}(Window.prototype,HTMLDocument.prototype,Element.prototype,"addEventListener","removeEventListener","dispatchEvent",[]);Handlebars=function(){var r=function(){"use strict";function n(n){this.string=n}return n.prototype.toString=function(){return""+this.string},n}(),t=function(n){"use strict";function h(n){return e[n]||"&amp;"}function c(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}function l(n){return n instanceof f?n.toString():!n&&n!==0?"":(n=""+n,!s.test(n))?n:n.replace(o,h)}function a(n){return n||n===0?u(n)&&n.length===0?!0:!1:!0}var t={},f=n,e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},o=/[&<>"'`]/g,s=/[&<>"'`]/,i,r,u;return t.extend=c,i=Object.prototype.toString,t.toString=i,r=function(n){return typeof n=="function"},r(/x/)&&(r=function(n){return typeof n=="function"&&i.call(n)==="[object Function]"}),t.isFunction=r,u=Array.isArray||function(n){return n&&typeof n=="object"?i.call(n)==="[object Array]":!1},t.isArray=u,t.escapeExpression=l,t.isEmpty=a,t}(r),n=function(){"use strict";function t(t,i){var u,f,r;for(i&&i.firstLine&&(u=i.firstLine,t+=" - "+u+":"+i.firstColumn),f=Error.prototype.constructor.call(this,t),r=0;r<n.length;r++)this[n[r]]=f[n[r]];u&&(this.lineNumber=u,this.column=i.firstColumn)}var n=["description","fileName","lineNumber","message","name","number","stack"];return t.prototype=new Error,t}(),i=function(n,t){"use strict";function e(n,t){this.helpers=n||{};this.partials=t||{};p(this)}function p(n){n.registerHelper("helperMissing",function(n){if(arguments.length===2)return undefined;throw new s("Missing helper: '"+n+"'");});n.registerHelper("blockHelperMissing",function(t,i){var r=i.inverse||function(){},u=i.fn;return f(t)&&(t=t.call(this)),t===!0?u(this):t===!1||t==null?r(this):l(t)?t.length>0?n.helpers.each(t,i):r(this):u(t)});n.registerHelper("each",function(n,t){var s=t.fn,c=t.inverse,r=0,u="",i,h,e;if(f(n)&&(n=n.call(this)),t.data&&(i=o(t.data)),n&&typeof n=="object")if(l(n))for(h=n.length;r<h;r++)i&&(i.index=r,i.first=r===0,i.last=r===n.length-1),u=u+s(n[r],{data:i});else for(e in n)n.hasOwnProperty(e)&&(i&&(i.key=e,i.index=r,i.first=r===0),u=u+s(n[e],{data:i}),r++);return r===0&&(u=c(this)),u});n.registerHelper("if",function(n,t){return f(n)&&(n=n.call(this)),(t.hash.includeZero||n)&&!r.isEmpty(n)?t.fn(this):t.inverse(this)});n.registerHelper("unless",function(t,i){return n.helpers["if"].call(this,t,{fn:i.inverse,inverse:i.fn,hash:i.hash})});n.registerHelper("with",function(n,t){return f(n)&&(n=n.call(this)),r.isEmpty(n)?void 0:t.fn(n)});n.registerHelper("log",function(t,i){var r=i.data&&i.data.level!=null?parseInt(i.data.level,10):1;n.log(r,t)})}function y(n,t){u.log(n,t)}var i={},r=n,s=t,h,c,u,o;i.VERSION="1.3.0";h=4;i.COMPILER_REVISION=h;c={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"};i.REVISION_CHANGES=c;var l=r.isArray,f=r.isFunction,a=r.toString,v="[object Object]";return i.HandlebarsEnvironment=e,e.prototype={constructor:e,logger:u,log:y,registerHelper:function(n,t,i){if(a.call(n)===v){if(i||t)throw new s("Arg not supported with multiple helpers");r.extend(this.helpers,n)}else i&&(t.not=i),this.helpers[n]=t},registerPartial:function(n,t){a.call(n)===v?r.extend(this.partials,n):this.partials[n]=t}},u={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(n,t){if(u.level<=n){var i=u.methodMap[n];typeof console!="undefined"&&console[i]&&console[i].call(console,t)}}},i.logger=u,i.log=y,o=function(n){var t={};return r.extend(t,n),t},i.createFrame=o,i}(t,n),f=function(n,t,i){"use strict";function h(n){var t=n&&n[0]||1,i=s,r,f;if(t!==i)if(t<i){r=o[i];f=o[t];throw new u("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+r+") or downgrade your runtime to an older version ("+f+").");}else throw new u("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+n[1]+").");}function c(n,t){if(!t)throw new u("No environment passed to template");var r=function(n,i,r,f,e,o){var s=t.VM.invokePartial.apply(this,arguments),h;if(s!=null)return s;if(t.compile)return h={helpers:f,partials:e,data:o},e[i]=t.compile(n,{data:o!==undefined},t),e[i](r,h);throw new u("The partial "+i+" could not be compiled when running in runtime-only mode");},i={escapeExpression:f.escapeExpression,invokePartial:r,programs:[],program:function(n,t,i){var r=this.programs[n];return i?r=e(n,t,i):r||(r=this.programs[n]=e(n,t)),r},merge:function(n,t){var i=n||t;return n&&t&&n!==t&&(i={},f.extend(i,t),f.extend(i,n)),i},programWithDepth:t.VM.programWithDepth,noop:t.VM.noop,compilerInfo:null};return function(r,u){var f,e,o,s;return u=u||{},f=u.partial?u:t,u.partial||(e=u.helpers,o=u.partials),s=n.call(i,f,r,e,o,u.data),u.partial||t.VM.checkRevision(i.compilerInfo),s}}function l(n,t,i){var u=Array.prototype.slice.call(arguments,3),r=function(n,r){return r=r||{},t.apply(this,[n,r.data||i].concat(u))};return r.program=n,r.depth=u.length,r}function e(n,t,i){var r=function(n,r){return r=r||{},t(n,r.data||i)};return r.program=n,r.depth=0,r}function a(n,t,i,r,f,e){var o={partial:!0,helpers:r,partials:f,data:e};if(n===undefined)throw new u("The partial "+t+" could not be found");else if(n instanceof Function)return n(i,o)}function v(){return""}var r={},f=n,u=t,s=i.COMPILER_REVISION,o=i.REVISION_CHANGES;return r.checkRevision=h,r.template=c,r.programWithDepth=l,r.program=e,r.invokePartial=a,r.noop=v,r}(t,n,i),e=function(n,t,i,r,u){"use strict";var f=n,c=t,l=i,e=r,o=u,s=function(){var n=new f.HandlebarsEnvironment;return e.extend(n,f),n.SafeString=c,n.Exception=l,n.Utils=e,n.VM=o,n.template=function(t){return o.template(t,n)},n},h=s();return h.create=s,h}(i,r,n,t,f),u=function(n){"use strict";function t(n){n=n||{};this.firstLine=n.first_line;this.firstColumn=n.first_column;this.lastColumn=n.last_column;this.lastLine=n.last_line}var r=n,i={ProgramNode:function(n,r,u,f){var o,e;arguments.length===3?(f=u,u=null):arguments.length===2&&(f=r,r=null);t.call(this,f);this.type="program";this.statements=n;this.strip={};u?(e=u[0],e?(o={first_line:e.firstLine,last_line:e.lastLine,last_column:e.lastColumn,first_column:e.firstColumn},this.inverse=new i.ProgramNode(u,r,o)):this.inverse=new i.ProgramNode(u,r),this.strip.right=r.left):r&&(this.strip.left=r.right)},MustacheNode:function(n,r,u,f,e){if(t.call(this,e),this.type="mustache",this.strip=f,u!=null&&u.charAt){var o=u.charAt(3)||u.charAt(2);this.escaped=o!=="{"&&o!=="&"}else this.escaped=!!u;this.sexpr=n instanceof i.SexprNode?n:new i.SexprNode(n,r);this.sexpr.isRoot=!0;this.id=this.sexpr.id;this.params=this.sexpr.params;this.hash=this.sexpr.hash;this.eligibleHelper=this.sexpr.eligibleHelper;this.isHelper=this.sexpr.isHelper},SexprNode:function(n,i,r){t.call(this,r);this.type="sexpr";this.hash=i;var u=this.id=n[0],f=this.params=n.slice(1),e=this.eligibleHelper=u.isSimple;this.isHelper=e&&(f.length||i)},PartialNode:function(n,i,r,u){t.call(this,u);this.type="partial";this.partialName=n;this.context=i;this.strip=r},BlockNode:function(n,i,u,f,e){if(t.call(this,e),n.sexpr.id.original!==f.path.original)throw new r(n.sexpr.id.original+" doesn't match "+f.path.original,this);this.type="block";this.mustache=n;this.program=i;this.inverse=u;this.strip={left:n.strip.left,right:f.strip.right};(i||u).strip.left=n.strip.right;(u||i).strip.right=f.strip.left;u&&!i&&(this.isInverse=!0)},ContentNode:function(n,i){t.call(this,i);this.type="content";this.string=n},HashNode:function(n,i){t.call(this,i);this.type="hash";this.pairs=n},IdNode:function(n,i){var f,h,u;t.call(this,i);this.type="ID";var o="",e=[],s=0;for(f=0,h=n.length;f<h;f++)if(u=n[f].part,o+=(n[f].separator||"")+u,u===".."||u==="."||u==="this")if(e.length>0)throw new r("Invalid path: "+o,this);else u===".."?s++:this.isScoped=!0;else e.push(u);this.original=o;this.parts=e;this.string=e.join(".");this.depth=s;this.isSimple=n.length===1&&!this.isScoped&&s===0;this.stringModeValue=this.string},PartialNameNode:function(n,i){t.call(this,i);this.type="PARTIAL_NAME";this.name=n.original},DataNode:function(n,i){t.call(this,i);this.type="DATA";this.id=n},StringNode:function(n,i){t.call(this,i);this.type="STRING";this.original=this.string=this.stringModeValue=n},IntegerNode:function(n,i){t.call(this,i);this.type="INTEGER";this.original=this.integer=n;this.stringModeValue=Number(n)},BooleanNode:function(n,i){t.call(this,i);this.type="BOOLEAN";this.bool=n;this.stringModeValue=n==="true"},CommentNode:function(n,i){t.call(this,i);this.type="comment";this.comment=n}};return i}(n),o=function(){"use strict";return function(){function n(n,t){return{left:n.charAt(2)==="~",right:t.charAt(0)==="~"||t.charAt(1)==="~"}}function i(){this.yy={}}var t={trace:function(){},yy:{},symbols_:{error:2,root:3,statements:4,EOF:5,program:6,simpleInverse:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,sexpr:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,CLOSE_UNESCAPED:24,OPEN_PARTIAL:25,partialName:26,partial_option0:27,sexpr_repetition0:28,sexpr_option0:29,dataName:30,param:31,STRING:32,INTEGER:33,BOOLEAN:34,OPEN_SEXPR:35,CLOSE_SEXPR:36,hash:37,hash_repetition_plus0:38,hashSegment:39,ID:40,EQUALS:41,DATA:42,pathSegments:43,SEP:44,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"CLOSE_UNESCAPED",25:"OPEN_PARTIAL",32:"STRING",33:"INTEGER",34:"BOOLEAN",35:"OPEN_SEXPR",36:"CLOSE_SEXPR",40:"ID",41:"EQUALS",42:"DATA",44:"SEP"},productions_:[0,[3,2],[3,1],[6,2],[6,3],[6,2],[6,1],[6,1],[6,0],[4,1],[4,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,4],[7,2],[17,3],[17,1],[31,1],[31,1],[31,1],[31,1],[31,1],[31,3],[37,1],[39,3],[26,1],[26,1],[26,1],[30,2],[21,1],[43,3],[43,1],[27,0],[27,1],[28,0],[28,2],[29,0],[29,1],[38,1],[38,2]],performAction:function(t,i,r,u,f,e){var o=e.length-1;switch(f){case 1:return new u.ProgramNode(e[o-1],this._$);case 2:return new u.ProgramNode([],this._$);case 3:this.$=new u.ProgramNode([],e[o-1],e[o],this._$);break;case 4:this.$=new u.ProgramNode(e[o-2],e[o-1],e[o],this._$);break;case 5:this.$=new u.ProgramNode(e[o-1],e[o],[],this._$);break;case 6:this.$=new u.ProgramNode(e[o],this._$);break;case 7:this.$=new u.ProgramNode([],this._$);break;case 8:this.$=new u.ProgramNode([],this._$);break;case 9:this.$=[e[o]];break;case 10:e[o-1].push(e[o]);this.$=e[o-1];break;case 11:this.$=new u.BlockNode(e[o-2],e[o-1].inverse,e[o-1],e[o],this._$);break;case 12:this.$=new u.BlockNode(e[o-2],e[o-1],e[o-1].inverse,e[o],this._$);break;case 13:this.$=e[o];break;case 14:this.$=e[o];break;case 15:this.$=new u.ContentNode(e[o],this._$);break;case 16:this.$=new u.CommentNode(e[o],this._$);break;case 17:this.$=new u.MustacheNode(e[o-1],null,e[o-2],n(e[o-2],e[o]),this._$);break;case 18:this.$=new u.MustacheNode(e[o-1],null,e[o-2],n(e[o-2],e[o]),this._$);break;case 19:this.$={path:e[o-1],strip:n(e[o-2],e[o])};break;case 20:this.$=new u.MustacheNode(e[o-1],null,e[o-2],n(e[o-2],e[o]),this._$);break;case 21:this.$=new u.MustacheNode(e[o-1],null,e[o-2],n(e[o-2],e[o]),this._$);break;case 22:this.$=new u.PartialNode(e[o-2],e[o-1],n(e[o-3],e[o]),this._$);break;case 23:this.$=n(e[o-1],e[o]);break;case 24:this.$=new u.SexprNode([e[o-2]].concat(e[o-1]),e[o],this._$);break;case 25:this.$=new u.SexprNode([e[o]],null,this._$);break;case 26:this.$=e[o];break;case 27:this.$=new u.StringNode(e[o],this._$);break;case 28:this.$=new u.IntegerNode(e[o],this._$);break;case 29:this.$=new u.BooleanNode(e[o],this._$);break;case 30:this.$=e[o];break;case 31:e[o-1].isHelper=!0;this.$=e[o-1];break;case 32:this.$=new u.HashNode(e[o],this._$);break;case 33:this.$=[e[o-2],e[o]];break;case 34:this.$=new u.PartialNameNode(e[o],this._$);break;case 35:this.$=new u.PartialNameNode(new u.StringNode(e[o],this._$),this._$);break;case 36:this.$=new u.PartialNameNode(new u.IntegerNode(e[o],this._$));break;case 37:this.$=new u.DataNode(e[o],this._$);break;case 38:this.$=new u.IdNode(e[o],this._$);break;case 39:e[o-2].push({part:e[o],separator:e[o-1]});this.$=e[o-2];break;case 40:this.$=[{part:e[o]}];break;case 43:this.$=[];break;case 44:e[o-1].push(e[o]);break;case 47:this.$=[e[o]];break;case 48:e[o-1].push(e[o])}},table:[{3:1,4:2,5:[1,3],8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[3]},{5:[1,16],8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[2,2]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],25:[2,9]},{4:20,6:18,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{4:20,6:22,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],25:[2,13]},{5:[2,14],14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],25:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],25:[2,15]},{5:[2,16],14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],25:[2,16]},{17:23,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:29,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:30,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:31,21:24,30:25,40:[1,28],42:[1,27],43:26},{21:33,26:32,32:[1,34],33:[1,35],40:[1,28],43:26},{1:[2,1]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],25:[2,10]},{10:36,20:[1,37]},{4:38,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,7],22:[1,13],23:[1,14],25:[1,15]},{7:39,8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,6],22:[1,13],23:[1,14],25:[1,15]},{17:23,18:[1,40],21:24,30:25,40:[1,28],42:[1,27],43:26},{10:41,20:[1,37]},{18:[1,42]},{18:[2,43],24:[2,43],28:43,32:[2,43],33:[2,43],34:[2,43],35:[2,43],36:[2,43],40:[2,43],42:[2,43]},{18:[2,25],24:[2,25],36:[2,25]},{18:[2,38],24:[2,38],32:[2,38],33:[2,38],34:[2,38],35:[2,38],36:[2,38],40:[2,38],42:[2,38],44:[1,44]},{21:45,40:[1,28],43:26},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],42:[2,40],44:[2,40]},{18:[1,46]},{18:[1,47]},{24:[1,48]},{18:[2,41],21:50,27:49,40:[1,28],43:26},{18:[2,34],40:[2,34]},{18:[2,35],40:[2,35]},{18:[2,36],40:[2,36]},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],25:[2,11]},{21:51,40:[1,28],43:26},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,3],22:[1,13],23:[1,14],25:[1,15]},{4:52,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,5],22:[1,13],23:[1,14],25:[1,15]},{14:[2,23],15:[2,23],16:[2,23],19:[2,23],20:[2,23],22:[2,23],23:[2,23],25:[2,23]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],25:[2,12]},{14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],25:[2,18]},{18:[2,45],21:56,24:[2,45],29:53,30:60,31:54,32:[1,57],33:[1,58],34:[1,59],35:[1,61],36:[2,45],37:55,38:62,39:63,40:[1,64],42:[1,27],43:26},{40:[1,65]},{18:[2,37],24:[2,37],32:[2,37],33:[2,37],34:[2,37],35:[2,37],36:[2,37],40:[2,37],42:[2,37]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],25:[2,17]},{5:[2,20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],25:[2,20]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],25:[2,21]},{18:[1,66]},{18:[2,42]},{18:[1,67]},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],25:[1,15]},{18:[2,24],24:[2,24],36:[2,24]},{18:[2,44],24:[2,44],32:[2,44],33:[2,44],34:[2,44],35:[2,44],36:[2,44],40:[2,44],42:[2,44]},{18:[2,46],24:[2,46],36:[2,46]},{18:[2,26],24:[2,26],32:[2,26],33:[2,26],34:[2,26],35:[2,26],36:[2,26],40:[2,26],42:[2,26]},{18:[2,27],24:[2,27],32:[2,27],33:[2,27],34:[2,27],35:[2,27],36:[2,27],40:[2,27],42:[2,27]},{18:[2,28],24:[2,28],32:[2,28],33:[2,28],34:[2,28],35:[2,28],36:[2,28],40:[2,28],42:[2,28]},{18:[2,29],24:[2,29],32:[2,29],33:[2,29],34:[2,29],35:[2,29],36:[2,29],40:[2,29],42:[2,29]},{18:[2,30],24:[2,30],32:[2,30],33:[2,30],34:[2,30],35:[2,30],36:[2,30],40:[2,30],42:[2,30]},{17:68,21:24,30:25,40:[1,28],42:[1,27],43:26},{18:[2,32],24:[2,32],36:[2,32],39:69,40:[1,70]},{18:[2,47],24:[2,47],36:[2,47],40:[2,47]},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],41:[1,71],42:[2,40],44:[2,40]},{18:[2,39],24:[2,39],32:[2,39],33:[2,39],34:[2,39],35:[2,39],36:[2,39],40:[2,39],42:[2,39],44:[2,39]},{5:[2,22],14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],22:[2,22],23:[2,22],25:[2,22]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],25:[2,19]},{36:[1,72]},{18:[2,48],24:[2,48],36:[2,48],40:[2,48]},{41:[1,71]},{21:56,30:60,31:73,32:[1,57],33:[1,58],34:[1,59],35:[1,61],40:[1,28],42:[1,27],43:26},{18:[2,31],24:[2,31],32:[2,31],33:[2,31],34:[2,31],35:[2,31],36:[2,31],40:[2,31],42:[2,31]},{18:[2,33],24:[2,33],36:[2,33],40:[2,33]}],defaultActions:{3:[2,2],16:[2,1],50:[2,42]},parseError:function(n){throw new Error(n);},parse:function(n){function it(){var n;return n=k.lexer.lex()||1,typeof n!="number"&&(n=k.symbols_[n]||n),n}var k=this,r=[0],f=[null],t=[],h=this.table,d="",c=0,g=0,y=0,l,nt,i,p,o,u,w,s,a,e,tt,v,b;for(this.lexer.setInput(n),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,typeof this.lexer.yylloc=="undefined"&&(this.lexer.yylloc={}),l=this.lexer.yylloc,t.push(l),nt=this.lexer.options&&this.lexer.options.ranges,typeof this.yy.parseError=="function"&&(this.parseError=this.yy.parseError),s={};;){if(o=r[r.length-1],this.defaultActions[o]?u=this.defaultActions[o]:((i===null||typeof i=="undefined")&&(i=it()),u=h[o]&&h[o][i]),(typeof u=="undefined"||!u.length||!u[0])&&(b="",!y)){v=[];for(a in h[o])this.terminals_[a]&&a>2&&v.push("'"+this.terminals_[a]+"'");b=this.lexer.showPosition?"Parse error on line "+(c+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+v.join(", ")+", got '"+(this.terminals_[i]||i)+"'":"Parse error on line "+(c+1)+": Unexpected "+(i==1?"end of input":"'"+(this.terminals_[i]||i)+"'");this.parseError(b,{text:this.lexer.match,token:this.terminals_[i]||i,line:this.lexer.yylineno,loc:l,expected:v})}if(u[0]instanceof Array&&u.length>1)throw new Error("Parse Error: multiple actions possible at state: "+o+", token: "+i);switch(u[0]){case 1:r.push(i);f.push(this.lexer.yytext);t.push(this.lexer.yylloc);r.push(u[1]);i=null;p?(i=p,p=null):(g=this.lexer.yyleng,d=this.lexer.yytext,c=this.lexer.yylineno,l=this.lexer.yylloc,y>0&&y--);break;case 2:if(e=this.productions_[u[1]][1],s.$=f[f.length-e],s._$={first_line:t[t.length-(e||1)].first_line,last_line:t[t.length-1].last_line,first_column:t[t.length-(e||1)].first_column,last_column:t[t.length-1].last_column},nt&&(s._$.range=[t[t.length-(e||1)].range[0],t[t.length-1].range[1]]),w=this.performAction.call(s,d,g,c,this.yy,u[1],f,t),typeof w!="undefined")return w;e&&(r=r.slice(0,-2*e),f=f.slice(0,-1*e),t=t.slice(0,-1*e));r.push(this.productions_[u[1]][0]);f.push(s.$);t.push(s._$);tt=h[r[r.length-2]][r[r.length-1]];r.push(tt);break;case 3:return!0}}return!0}},r=function(){var n={EOF:1,parseError:function(n,t){if(this.yy.parser)this.yy.parser.parseError(n,t);else throw new Error(n);},setInput:function(n){return this._input=n,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var n=this._input[0],t;return this.yytext+=n,this.yyleng++,this.offset++,this.match+=n,this.matched+=n,t=n.match(/(?:\r\n?|\n).*/g),t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),n},unput:function(n){var i=n.length,t=n.split(/(?:\r\n?|\n)/g),r,u;return this._input=n+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-i-1),this.offset-=i,r=this.match.split(/(?:\r\n?|\n)/g),this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),t.length-1&&(this.yylineno-=t.length-1),u=this.yylloc.range,this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:t?(t.length===r.length?this.yylloc.first_column:0)+r[r.length-t.length].length-t[0].length:this.yylloc.first_column-i},this.options.ranges&&(this.yylloc.range=[u[0],u[0]+this.yyleng-i]),this},more:function(){return this._more=!0,this},less:function(n){this.unput(this.match.slice(n))},pastInput:function(){var n=this.matched.substr(0,this.matched.length-this.match.length);return(n.length>20?"...":"")+n.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var n=this.match;return n.length<20&&(n+=this._input.substr(0,20-n.length)),(n.substr(0,20)+(n.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var n=this.pastInput(),t=new Array(n.length+1).join("-");return n+this.upcomingInput()+"\n"+t+"^"},next:function(){var f,n,r,e,t,u,i;if(this.done)return this.EOF;for(this._input||(this.done=!0),this._more||(this.yytext="",this.match=""),u=this._currentRules(),i=0;i<u.length;i++)if(r=this._input.match(this.rules[u[i]]),r&&(!n||r[0].length>n[0].length)&&(n=r,e=i,!this.options.flex))break;return n?(t=n[0].match(/(?:\r\n?|\n).*/g),t&&(this.yylineno+=t.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:t?t[t.length-1].length-t[t.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+n[0].length},this.yytext+=n[0],this.match+=n[0],this.matches=n,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(n[0].length),this.matched+=n[0],f=this.performAction.call(this,this.yy,this,u[e],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),f)?f:void 0:this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var n=this.next();return typeof n!="undefined"?n:this.lex()},begin:function(n){this.conditionStack.push(n)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(n){this.begin(n)}};return n.options={},n.performAction=function(n,t,i,r){function u(n,i){return t.yytext=t.yytext.substr(n,t.yyleng-i)}var f=r;switch(i){case 0:if(t.yytext.slice(-2)==="\\\\"?(u(0,1),this.begin("mu")):t.yytext.slice(-1)==="\\"?(u(0,1),this.begin("emu")):this.begin("mu"),t.yytext)return 14;break;case 1:return 14;case 2:return this.popState(),14;case 3:return u(0,4),this.popState(),15;case 4:return 35;case 5:return 36;case 6:return 25;case 7:return 16;case 8:return 20;case 9:return 19;case 10:return 19;case 11:return 23;case 12:return 22;case 13:this.popState();this.begin("com");break;case 14:return u(3,5),this.popState(),15;case 15:return 22;case 16:return 41;case 17:return 40;case 18:return 40;case 19:return 44;case 21:return this.popState(),24;case 22:return this.popState(),18;case 23:return t.yytext=u(1,2).replace(/\\"/g,'"'),32;case 24:return t.yytext=u(1,2).replace(/\\'/g,"'"),32;case 25:return 42;case 26:return 34;case 27:return 34;case 28:return 33;case 29:return 40;case 30:return t.yytext=u(1,2),40;case 31:return"INVALID";case 32:return 5}},n.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{(~)?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:-?[0-9]+(?=([~}\s)])))/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)]))))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/],n.conditions={mu:{rules:[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[3],inclusive:!1},INITIAL:{rules:[0,1,32],inclusive:!0}},n}();return t.lexer=r,i.prototype=t,t.Parser=i,new i}()}(),s=function(n,t){"use strict";function f(n){return n.constructor===u.ProgramNode?n:(r.yy=u,r.parse(n))}var i={},r=n,u=t;return i.parser=r,i.parse=f,i}(o,u),h=function(n){"use strict";function r(){}function u(n,t,r){if(n==null||typeof n!="string"&&n.constructor!==r.AST.ProgramNode)throw new i("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+n);t=t||{};"data"in t||(t.data=!0);var u=r.parse(n),f=(new r.Compiler).compile(u,t);return(new r.JavaScriptCompiler).compile(f,t)}function f(n,t,r){function f(){var i=r.parse(n),u=(new r.Compiler).compile(i,t),f=(new r.JavaScriptCompiler).compile(u,t,undefined,!0);return r.template(f)}if(n==null||typeof n!="string"&&n.constructor!==r.AST.ProgramNode)throw new i("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+n);t=t||{};"data"in t||(t.data=!0);var u;return function(n,t){return u||(u=f()),u.call(this,n,t)}}var t={},i=n;return t.Compiler=r,r.prototype={compiler:r,disassemble:function(){for(var i,e=this.opcodes,n,r=[],u,t,f=0,o=e.length;f<o;f++)if(n=e[f],n.opcode==="DECLARE")r.push("DECLARE "+n.name+"="+n.value);else{for(u=[],i=0;i<n.args.length;i++)t=n.args[i],typeof t=="string"&&(t='"'+t.replace("\n","\\n")+'"'),u.push(t);r.push(n.opcode+" "+u.join(" "))}return r.join("\n")},equals:function(n){var i=this.opcodes.length,t,r,f,u;if(n.opcodes.length!==i)return!1;for(t=0;t<i;t++){if(r=this.opcodes[t],f=n.opcodes[t],r.opcode!==f.opcode||r.args.length!==f.args.length)return!1;for(u=0;u<r.args.length;u++)if(r.args[u]!==f.args[u])return!1}if(i=this.children.length,n.children.length!==i)return!1;for(t=0;t<i;t++)if(!this.children[t].equals(n.children[t]))return!1;return!0},guid:0,compile:function(n,t){var i,r;if(this.opcodes=[],this.children=[],this.depths={list:[]},this.options=t,i=this.options.knownHelpers,this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0},i)for(r in i)this.options.knownHelpers[r]=i[r];return this.accept(n)},accept:function(n){var t=n.strip||{},i;return t.left&&this.opcode("strip"),i=this[n.type](n),t.right&&this.opcode("strip"),i},program:function(n){for(var i=n.statements,t=0,r=i.length;t<r;t++)this.accept(i[t]);return this.isSimple=r===1,this.depths.list=this.depths.list.sort(function(n,t){return n-t}),this},compileProgram:function(n){var t=(new this.compiler).compile(n,this.options),u=this.guid++,r,i,f;for(this.usePartial=this.usePartial||t.usePartial,this.children[u]=t,i=0,f=t.depths.list.length;i<f;i++)if(r=t.depths.list[i],r<2)continue;else this.addDepth(r-1);return u},block:function(n){var f=n.mustache,t=n.program,i=n.inverse,r,u;t&&(t=this.compileProgram(t));i&&(i=this.compileProgram(i));r=f.sexpr;u=this.classifySexpr(r);u==="helper"?this.helperSexpr(r,t,i):u==="simple"?(this.simpleSexpr(r),this.opcode("pushProgram",t),this.opcode("pushProgram",i),this.opcode("emptyHash"),this.opcode("blockValue")):(this.ambiguousSexpr(r,t,i),this.opcode("pushProgram",t),this.opcode("pushProgram",i),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue"));this.opcode("append")},hash:function(n){var u=n.pairs,r,t,i,f;for(this.opcode("pushHash"),i=0,f=u.length;i<f;i++)r=u[i],t=r[1],this.options.stringParams?(t.depth&&this.addDepth(t.depth),this.opcode("getContext",t.depth||0),this.opcode("pushStringParam",t.stringModeValue,t.type),t.type==="sexpr"&&this.sexpr(t)):this.accept(t),this.opcode("assignToHash",r[0]);this.opcode("popHash")},partial:function(n){var t=n.partialName;this.usePartial=!0;n.context?this.ID(n.context):this.opcode("push","depth0");this.opcode("invokePartial",t.name);this.opcode("append")},content:function(n){this.opcode("appendContent",n.string)},mustache:function(n){this.sexpr(n.sexpr);n.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},ambiguousSexpr:function(n,t,i){var r=n.id,u=r.parts[0],f=t!=null||i!=null;this.opcode("getContext",r.depth);this.opcode("pushProgram",t);this.opcode("pushProgram",i);this.opcode("invokeAmbiguous",u,f)},simpleSexpr:function(n){var t=n.id;t.type==="DATA"?this.DATA(t):t.parts.length?this.ID(t):(this.addDepth(t.depth),this.opcode("getContext",t.depth),this.opcode("pushContext"));this.opcode("resolvePossibleLambda")},helperSexpr:function(n,t,r){var f=this.setupFullMustacheParams(n,t,r),u=n.id.parts[0];if(this.options.knownHelpers[u])this.opcode("invokeKnownHelper",f.length,u);else if(this.options.knownHelpersOnly)throw new i("You specified knownHelpersOnly, but used the unknown helper "+u,n);else this.opcode("invokeHelper",f.length,u,n.isRoot)},sexpr:function(n){var t=this.classifySexpr(n);t==="simple"?this.simpleSexpr(n):t==="helper"?this.helperSexpr(n):this.ambiguousSexpr(n)},ID:function(n){var i,t,r;for(this.addDepth(n.depth),this.opcode("getContext",n.depth),i=n.parts[0],i?this.opcode("lookupOnContext",n.parts[0]):this.opcode("pushContext"),t=1,r=n.parts.length;t<r;t++)this.opcode("lookup",n.parts[t])},DATA:function(n){var r,t,u;if(this.options.data=!0,n.id.isScoped||n.id.depth)throw new i("Scoped data references are not supported: "+n.original,n);for(this.opcode("lookupData"),r=n.id.parts,t=0,u=r.length;t<u;t++)this.opcode("lookup",r[t])},STRING:function(n){this.opcode("pushString",n.string)},INTEGER:function(n){this.opcode("pushLiteral",n.integer)},BOOLEAN:function(n){this.opcode("pushLiteral",n.bool)},comment:function(){},opcode:function(n){this.opcodes.push({opcode:n,args:[].slice.call(arguments,1)})},declare:function(n,t){this.opcodes.push({opcode:"DECLARE",name:n,value:t})},addDepth:function(n){n!==0&&(this.depths[n]||(this.depths[n]=!0,this.depths.list.push(n)))},classifySexpr:function(n){var t=n.isHelper,i=n.eligibleHelper,r=this.options,u;return i&&!t&&(u=n.id.parts[0],r.knownHelpers[u]?t=!0:r.knownHelpersOnly&&(i=!1)),t?"helper":i?"ambiguous":"simple"},pushParams:function(n){for(var i=n.length,t;i--;)t=n[i],this.options.stringParams?(t.depth&&this.addDepth(t.depth),this.opcode("getContext",t.depth||0),this.opcode("pushStringParam",t.stringModeValue,t.type),t.type==="sexpr"&&this.sexpr(t)):this[t.type](t)},setupFullMustacheParams:function(n,t,i){var r=n.params;return this.pushParams(r),this.opcode("pushProgram",t),this.opcode("pushProgram",i),n.hash?this.hash(n.hash):this.opcode("emptyHash"),r}},t.precompile=u,t.compile=f,t}(n),c=function(n,t){"use strict";function r(n){this.value=n}function i(){}var c=n.COMPILER_REVISION,l=n.REVISION_CHANGES,e=n.log,o=t,f,s,u,h;for(i.prototype={nameLookup:function(n,t){var u,r;return n.indexOf("depth")===0&&(u=!0),r=/^[0-9]+$/.test(t)?n+"["+t+"]":i.isValidJavaScriptVariableName(t)?n+"."+t:n+"['"+t+"']",u?"("+n+" && "+r+")":r},compilerInfo:function(){var n=c,t=l[n];return"this.compilerInfo = ["+n+",'"+t+"'];\n"},appendToBuffer:function(n){return this.environment.isSimple?"return "+n+";":{appendToBuffer:!0,content:n,toString:function(){return"buffer += "+n+";"}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(n,t,i,r){var f,u,s;for(this.environment=n,this.options=t||{},e("debug",this.environment.disassemble()+"\n\n"),this.name=this.environment.name,this.isChild=!!i,this.context=i||{programs:[],environments:[],aliases:{}},this.preamble(),this.stackSlot=0,this.stackVars=[],this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.compileChildren(n,t),f=n.opcodes,this.i=0,s=f.length;this.i<s;this.i++)u=f[this.i],u.opcode==="DECLARE"?this[u.name]=u.value:this[u.opcode].apply(this,u.args),u.opcode!==this.stripNext&&(this.stripNext=!1);if(this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new o("Compile completed with content left on stack");return this.createFunctionContext(r)},preamble:function(){var t=[],i,n;this.isChild?t.push(""):(i=this.namespace,n="helpers = this.merge(helpers, "+i+".helpers);",this.environment.usePartial&&(n=n+" partials = this.merge(partials, "+i+".partials);"),this.options.data&&(n=n+" data = data || {};"),t.push(n));this.environment.isSimple?t.push(""):t.push(", buffer = "+this.initializeBuffer());this.lastContext=0;this.source=t},createFunctionContext:function(n){var o=this.stackVars.concat(this.registers.list),r,t,u,s,i,f;if(o.length>0&&(this.source[1]=this.source[1]+", "+o.join(", ")),!this.isChild)for(r in this.context.aliases)this.context.aliases.hasOwnProperty(r)&&(this.source[1]=this.source[1]+", "+r+"="+this.context.aliases[r]);for(this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+";"),this.isChild||(this.source[1]+="\n"+this.context.programs.join("\n")+"\n"),this.environment.isSimple||this.pushSource("return buffer;"),t=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"],u=0,s=this.environment.depths.list.length;u<s;u++)t.push("depth"+this.environment.depths.list[u]);return i=this.mergeSource(),this.isChild||(i=this.compilerInfo()+i),n?(t.push(i),Function.apply(this,t)):(f="function "+(this.name||"")+"("+t.join(",")+") {\n  "+i+"}",e("debug",f+"\n\n"),f)},mergeSource:function(){for(var t,i="",n,r=0,u=this.source.length;r<u;r++)t=this.source[r],t.appendToBuffer?n=n?n+"\n    + "+t.content:t.content:(n&&(i+="buffer += "+n+";\n  ",n=undefined),i+=t+"\n  ");return i},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var n=["depth0"];this.setupParams(0,n);this.replaceStack(function(t){return n.splice(1,0,t),"blockHelperMissing.call("+n.join(", ")+")"})},ambiguousBlockValue:function(){var n,t;this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";n=["depth0"];this.setupParams(0,n);t=this.topStack();n.splice(1,0,t);this.pushSource("if (!"+this.lastHelper+") { "+t+" = blockHelperMissing.call("+n.join(", ")+"); }")},appendContent:function(n){this.pendingContent&&(n=this.pendingContent+n);this.stripNext&&(n=n.replace(/^\s+/,""));this.pendingContent=n},strip:function(){this.pendingContent&&(this.pendingContent=this.pendingContent.replace(/\s+$/,""));this.stripNext="strip"},append:function(){this.flushInline();var n=this.popStack();this.pushSource("if("+n+" || "+n+" === 0) { "+this.appendToBuffer(n)+" }");this.environment.isSimple&&this.pushSource("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){this.context.aliases.escapeExpression="this.escapeExpression";this.pushSource(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(n){this.lastContext!==n&&(this.lastContext=n)},lookupOnContext:function(n){this.push(this.nameLookup("depth"+this.lastContext,n,"context"))},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"';this.replaceStack(function(n){return"typeof "+n+" === functionType ? "+n+".apply(depth0) : "+n})},lookup:function(n){this.replaceStack(function(t){return t+" == null || "+t+" === false ? "+t+" : "+this.nameLookup(t,n,"context")})},lookupData:function(){this.pushStackLiteral("data")},pushStringParam:function(n,t){this.pushStackLiteral("depth"+this.lastContext);this.pushString(t);t!=="sexpr"&&(typeof n=="string"?this.pushString(n):this.pushStackLiteral(n))},emptyHash:function(){this.pushStackLiteral("{}");this.options.stringParams&&(this.push("{}"),this.push("{}"))},pushHash:function(){this.hash&&this.hashes.push(this.hash);this.hash={values:[],types:[],contexts:[]}},popHash:function(){var n=this.hash;this.hash=this.hashes.pop();this.options.stringParams&&(this.push("{"+n.contexts.join(",")+"}"),this.push("{"+n.types.join(",")+"}"));this.push("{\n    "+n.values.join(",\n    ")+"\n  }")},pushString:function(n){this.pushStackLiteral(this.quotedString(n))},push:function(n){return this.inlineStack.push(n),n},pushLiteral:function(n){this.pushStackLiteral(n)},pushProgram:function(n){n!=null?this.pushStackLiteral(this.programExpression(n)):this.pushStackLiteral(null)},invokeHelper:function(n,t,i){this.context.aliases.helperMissing="helpers.helperMissing";this.useRegister("helper");var r=this.lastHelper=this.setupHelper(n,t,!0),f=this.nameLookup("depth"+this.lastContext,t,"context"),u="helper = "+r.name+" || "+f;r.paramsInit&&(u+=","+r.paramsInit);this.push("("+u+",helper ? helper.call("+r.callParams+") : helperMissing.call("+r.helperMissingParams+"))");i||this.flushInline()},invokeKnownHelper:function(n,t){var i=this.setupHelper(n,t);this.push(i.name+".call("+i.callParams+")")},invokeAmbiguous:function(n,t){this.context.aliases.functionType='"function"';this.useRegister("helper");this.emptyHash();var i=this.setupHelper(0,n,t),u=this.lastHelper=this.nameLookup("helpers",n,"helper"),f=this.nameLookup("depth"+this.lastContext,n,"context"),r=this.nextStack();i.paramsInit&&this.pushSource(i.paramsInit);this.pushSource("if (helper = "+u+") { "+r+" = helper.call("+i.callParams+"); }");this.pushSource("else { helper = "+f+"; "+r+" = typeof helper === functionType ? helper.call("+i.callParams+") : helper; }")},invokePartial:function(n){var t=[this.nameLookup("partials",n,"partial"),"'"+n+"'",this.popStack(),"helpers","partials"];this.options.data&&t.push("data");this.context.aliases.self="this";this.push("self.invokePartial("+t.join(", ")+")")},assignToHash:function(n){var u=this.popStack(),i,r,t;this.options.stringParams&&(r=this.popStack(),i=this.popStack());t=this.hash;i&&t.contexts.push("'"+n+"': "+i);r&&t.types.push("'"+n+"': "+r);t.values.push("'"+n+"': ("+u+")")},compiler:i,compileChildren:function(n,t){for(var i,f=n.children,r,e,u=0,o=f.length;u<o;u++)r=f[u],e=new this.compiler,i=this.matchExistingProgram(r),i==null?(this.context.programs.push(""),i=this.context.programs.length,r.index=i,r.name="program"+i,this.context.programs[i]=e.compile(r,t,this.context),this.context.environments[i]=r):(r.index=i,r.name="program"+i)},matchExistingProgram:function(n){for(var i,t=0,r=this.context.environments.length;t<r;t++)if(i=this.context.environments[t],i&&i.equals(n))return t},programExpression:function(n){var t,e;if(this.context.aliases.self="this",n==null)return"self.noop";var i=this.environment.children[n],r=i.depths.list,u,f=[i.index,i.name,"data"];for(t=0,e=r.length;t<e;t++)u=r[t],u===1?f.push("depth0"):f.push("depth"+(u-1));return(r.length===0?"self.program(":"self.programWithDepth(")+f.join(", ")+")"},register:function(n,t){this.useRegister(n);this.pushSource(n+" = "+t+";")},useRegister:function(n){this.registers[n]||(this.registers[n]=!0,this.registers.list.push(n))},pushStackLiteral:function(n){return this.push(new r(n))},pushSource:function(n){this.pendingContent&&(this.source.push(this.appendToBuffer(this.quotedString(this.pendingContent))),this.pendingContent=undefined);n&&this.source.push(n)},pushStack:function(n){this.flushInline();var t=this.incrStack();return n&&this.pushSource(t+" = "+n+";"),this.compileStack.push(t),t},replaceStack:function(n){var u="",o=this.isInline(),t,f,s,i,h,e;return o?(i=this.popStack(!0),i instanceof r?(t=i.value,s=!0):(f=!this.stackSlot,h=f?this.incrStack():this.topStackName(),u="("+this.push(h)+" = "+i+"),",t=this.topStack())):t=this.topStack(),e=n.call(this,t),o?(s||this.popStack(),f&&this.stackSlot--,this.push("("+u+e+")")):(/^stack/.test(t)||(t=this.nextStack()),this.pushSource(t+" = ("+u+e+");")),t},nextStack:function(){return this.pushStack()},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var i=this.inlineStack,n,u,t;if(i.length)for(this.inlineStack=[],n=0,u=i.length;n<u;n++)t=i[n],t instanceof r?this.compileStack.push(t):this.pushStack(t)},isInline:function(){return this.inlineStack.length},popStack:function(n){var i=this.isInline(),t=(i?this.inlineStack:this.compileStack).pop();if(!n&&t instanceof r)return t.value;if(!i){if(!this.stackSlot)throw new o("Invalid stack pop");this.stackSlot--}return t},topStack:function(n){var i=this.isInline()?this.inlineStack:this.compileStack,t=i[i.length-1];return!n&&t instanceof r?t.value:t},quotedString:function(n){return'"'+n.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},setupHelper:function(n,t,i){var r=[],u=this.setupParams(n,r,i),f=this.nameLookup("helpers",t,"helper");return{params:r,paramsInit:u,name:f,callParams:["depth0"].concat(r).join(", "),helperMissingParams:i&&["depth0",this.quotedString(t)].concat(r).join(", ")}},setupOptions:function(n,t){var i=[],e=[],o=[],s,r,u,f;for(i.push("hash:"+this.popStack()),this.options.stringParams&&(i.push("hashTypes:"+this.popStack()),i.push("hashContexts:"+this.popStack())),r=this.popStack(),u=this.popStack(),(u||r)&&(u||(this.context.aliases.self="this",u="self.noop"),r||(this.context.aliases.self="this",r="self.noop"),i.push("inverse:"+r),i.push("fn:"+u)),f=0;f<n;f++)s=this.popStack(),t.push(s),this.options.stringParams&&(o.push(this.popStack()),e.push(this.popStack()));return this.options.stringParams&&(i.push("contexts:["+e.join(",")+"]"),i.push("types:["+o.join(",")+"]")),this.options.data&&i.push("data:data"),i},setupParams:function(n,t,i){var r="{"+this.setupOptions(n,t).join(",")+"}";return i?(this.useRegister("options"),t.push("options"),"options="+r):(t.push(r),"")}},f="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),s=i.RESERVED_WORDS={},u=0,h=f.length;u<h;u++)s[f[u]]=!0;return i.isValidJavaScriptVariableName=function(n){return!i.RESERVED_WORDS[n]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(n)?!0:!1},i}(i,n);return function(n,t,i,r,u){"use strict";var f=n,o=t,s=i.parser,h=i.parse,c=r.Compiler,l=r.compile,a=r.precompile,v=u,y=f.create,e=function(){var n=y();return n.compile=function(t,i){return l(t,i,n)},n.precompile=function(t,i){return a(t,i,n)},n.AST=o,n.Compiler=c,n.JavaScriptCompiler=v,n.Parser=s,n.parse=h,n};return f=e(),f.create=e,f}(e,u,s,h,c)}();Date.CultureInfo={name:"en-US",englishName:"English (United States)",nativeName:"English (United States)",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbreviatedDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],shortestDayNames:["Su","Mo","Tu","We","Th","Fr","Sa"],firstLetterDayNames:["S","M","T","W","T","F","S"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],abbreviatedMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],amDesignator:"AM",pmDesignator:"PM",firstDayOfWeek:0,twoDigitYearMax:2029,dateElementOrder:"mdy",formatPatterns:{shortDate:"M/d/yyyy",longDate:"dddd, MMMM dd, yyyy",shortTime:"h:mm tt",longTime:"h:mm:ss tt",fullDateTime:"dddd, MMMM dd, yyyy h:mm:ss tt",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"MMMM dd",yearMonth:"MMMM, yyyy"},regexPatterns:{jan:/^jan(uary)?/i,feb:/^feb(ruary)?/i,mar:/^mar(ch)?/i,apr:/^apr(il)?/i,may:/^may/i,jun:/^jun(e)?/i,jul:/^jul(y)?/i,aug:/^aug(ust)?/i,sep:/^sep(t(ember)?)?/i,oct:/^oct(ober)?/i,nov:/^nov(ember)?/i,dec:/^dec(ember)?/i,sun:/^su(n(day)?)?/i,mon:/^mo(n(day)?)?/i,tue:/^tu(e(s(day)?)?)?/i,wed:/^we(d(nesday)?)?/i,thu:/^th(u(r(s(day)?)?)?)?/i,fri:/^fr(i(day)?)?/i,sat:/^sa(t(urday)?)?/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|aft(er)?|from|hence)/i,subtract:/^(\-|bef(ore)?|ago)/i,yesterday:/^yes(terday)?/i,today:/^t(od(ay)?)?/i,tomorrow:/^tom(orrow)?/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^mn|min(ute)?s?/i,hour:/^h(our)?s?/i,week:/^w(eek)?s?/i,month:/^m(onth)?s?/i,day:/^d(ay)?s?/i,year:/^y(ear)?s?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt|utc)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a(?!u|p)|p)/i},timezones:[{name:"UTC",offset:"-000"},{name:"GMT",offset:"-000"},{name:"EST",offset:"-0500"},{name:"EDT",offset:"-0400"},{name:"CST",offset:"-0600"},{name:"CDT",offset:"-0500"},{name:"MST",offset:"-0700"},{name:"MDT",offset:"-0600"},{name:"PST",offset:"-0800"},{name:"PDT",offset:"-0700"}]},function(){var t=Date,n=t.prototype,i=t.CultureInfo,r=function(n,t){return t||(t=2),("000"+n).slice(t*-1)},f,u,e;n.clearTime=function(){return this.setHours(0),this.setMinutes(0),this.setSeconds(0),this.setMilliseconds(0),this};n.setTimeToNow=function(){var n=new Date;return this.setHours(n.getHours()),this.setMinutes(n.getMinutes()),this.setSeconds(n.getSeconds()),this.setMilliseconds(n.getMilliseconds()),this};t.today=function(){return(new Date).clearTime()};t.compare=function(n,t){if(isNaN(n)||isNaN(t))throw new Error(n+" - "+t);else{if(n instanceof Date&&t instanceof Date)return n<t?-1:n>t?1:0;throw new TypeError(n+" - "+t);}};t.equals=function(n,t){return n.compareTo(t)===0};t.getDayNumberFromName=function(n){for(var u=i.dayNames,f=i.abbreviatedDayNames,e=i.shortestDayNames,r=n.toLowerCase(),t=0;t<u.length;t++)if(u[t].toLowerCase()==r||f[t].toLowerCase()==r||e[t].toLowerCase()==r)return t;return-1};t.getMonthNumberFromName=function(n){for(var r=i.monthNames,f=i.abbreviatedMonthNames,u=n.toLowerCase(),t=0;t<r.length;t++)if(r[t].toLowerCase()==u||f[t].toLowerCase()==u)return t;return-1};t.isLeapYear=function(n){return n%4==0&&n%100!=0||n%400==0};t.getDaysInMonth=function(n,i){return[31,t.isLeapYear(n)?29:28,31,30,31,30,31,31,30,31,30,31][i]};t.getTimezoneAbbreviation=function(n){for(var r=i.timezones,t=0;t<r.length;t++)if(r[t].offset===n)return r[t].name;return null};t.getTimezoneOffset=function(n){for(var r=i.timezones,t=0;t<r.length;t++)if(r[t].name===n.toUpperCase())return r[t].offset;return null};n.clone=function(){return new Date(this.getTime())};n.compareTo=function(n){return Date.compare(this,n)};n.equals=function(n){return Date.equals(this,n||new Date)};n.between=function(n,t){return this.getTime()>=n.getTime()&&this.getTime()<=t.getTime()};n.isAfter=function(n){return this.compareTo(n||new Date)===1};n.isBefore=function(n){return this.compareTo(n||new Date)===-1};n.isToday=function(){return this.isSameDay(new Date)};n.isSameDay=function(n){return this.clone().clearTime().equals(n.clone().clearTime())};n.addMilliseconds=function(n){return this.setMilliseconds(this.getMilliseconds()+n),this};n.addSeconds=function(n){return this.addMilliseconds(n*1e3)};n.addMinutes=function(n){return this.addMilliseconds(n*6e4)};n.addHours=function(n){return this.addMilliseconds(n*36e5)};n.addDays=function(n){return this.setDate(this.getDate()+n),this};n.addWeeks=function(n){return this.addDays(n*7)};n.addMonths=function(n){var i=this.getDate();return this.setDate(1),this.setMonth(this.getMonth()+n),this.setDate(Math.min(i,t.getDaysInMonth(this.getFullYear(),this.getMonth()))),this};n.addYears=function(n){return this.addMonths(n*12)};n.add=function(n){if(typeof n=="number")return this._orient=n,this;var t=n;return t.milliseconds&&this.addMilliseconds(t.milliseconds),t.seconds&&this.addSeconds(t.seconds),t.minutes&&this.addMinutes(t.minutes),t.hours&&this.addHours(t.hours),t.weeks&&this.addWeeks(t.weeks),t.months&&this.addMonths(t.months),t.years&&this.addYears(t.years),t.days&&this.addDays(t.days),this};n.getWeek=function(){var n,i,r,l,h,o,c,s,t,a;return f=f?f:this.getFullYear(),u=u?u:this.getMonth()+1,e=e?e:this.getDate(),u<=2?(n=f-1,i=(n/4|0)-(n/100|0)+(n/400|0),r=((n-1)/4|0)-((n-1)/100|0)+((n-1)/400|0),t=i-r,h=0,o=e-1+31*(u-1)):(n=f,i=(n/4|0)-(n/100|0)+(n/400|0),r=((n-1)/4|0)-((n-1)/100|0)+((n-1)/400|0),t=i-r,h=t+1,o=e+(153*(u-3)+2)/5+58+t),c=(n+i)%7,l=(o+c-h)%7,s=o+3-l|0,a=s<0?53-((c-t)/5|0):s>364+t?1:(s/7|0)+1,f=u=e=null,a};n.getISOWeek=function(){return f=this.getUTCFullYear(),u=this.getUTCMonth()+1,e=this.getUTCDate(),r(this.getWeek())};n.setWeek=function(n){return this.moveToDayOfWeek(1).addWeeks(n-this.getWeek())};t._validate=function(n,t,i,r){if(typeof n=="undefined")return!1;if(typeof n!="number")throw new TypeError(n+" is not a Number.");else if(n<t||n>i)throw new RangeError(n+" is not a valid value for "+r+".");return!0};t.validateMillisecond=function(n){return t._validate(n,0,999,"millisecond")};t.validateSecond=function(n){return t._validate(n,0,59,"second")};t.validateMinute=function(n){return t._validate(n,0,59,"minute")};t.validateHour=function(n){return t._validate(n,0,23,"hour")};t.validateDay=function(n,i,r){return t._validate(n,1,t.getDaysInMonth(i,r),"day")};t.validateMonth=function(n){return t._validate(n,0,11,"month")};t.validateYear=function(n){return t._validate(n,0,9999,"year")};n.set=function(n){return t.validateMillisecond(n.millisecond)&&this.addMilliseconds(n.millisecond-this.getMilliseconds()),t.validateSecond(n.second)&&this.addSeconds(n.second-this.getSeconds()),t.validateMinute(n.minute)&&this.addMinutes(n.minute-this.getMinutes()),t.validateHour(n.hour)&&this.addHours(n.hour-this.getHours()),t.validateMonth(n.month)&&this.addMonths(n.month-this.getMonth()),t.validateYear(n.year)&&this.addYears(n.year-this.getFullYear()),t.validateDay(n.day,this.getFullYear(),this.getMonth())&&this.addDays(n.day-this.getDate()),n.timezone&&this.setTimezone(n.timezone),n.timezoneOffset&&this.setTimezoneOffset(n.timezoneOffset),n.week&&t._validate(n.week,0,53,"week")&&this.setWeek(n.week),this};n.moveToFirstDayOfMonth=function(){return this.set({day:1})};n.moveToLastDayOfMonth=function(){return this.set({day:t.getDaysInMonth(this.getFullYear(),this.getMonth())})};n.moveToNthOccurrence=function(n,t){var i=0;if(t>0)i=t-1;else if(t===-1)return this.moveToLastDayOfMonth(),this.getDay()!==n&&this.moveToDayOfWeek(n,-1),this;return this.moveToFirstDayOfMonth().addDays(-1).moveToDayOfWeek(n,1).addWeeks(i)};n.moveToDayOfWeek=function(n,t){var i=(n-this.getDay()+7*(t||1))%7;return this.addDays(i===0?i+=7*(t||1):i)};n.moveToMonth=function(n,t){var i=(n-this.getMonth()+12*(t||1))%12;return this.addMonths(i===0?i+=12*(t||1):i)};n.getOrdinalNumber=function(){return Math.ceil((this.clone().clearTime()-new Date(this.getFullYear(),0,1))/864e5)+1};n.getTimezone=function(){return t.getTimezoneAbbreviation(this.getUTCOffset())};n.setTimezoneOffset=function(n){var t=this.getTimezoneOffset(),i=Number(n)*-6/10;return this.addMinutes(i-t)};n.setTimezone=function(n){return this.setTimezoneOffset(t.getTimezoneOffset(n))};n.hasDaylightSavingTime=function(){return Date.today().set({month:0,day:1}).getTimezoneOffset()!==Date.today().set({month:6,day:1}).getTimezoneOffset()};n.isDaylightSavingTime=function(){return this.hasDaylightSavingTime()&&(new Date).getTimezoneOffset()===Date.today().set({month:6,day:1}).getTimezoneOffset()};n.getUTCOffset=function(){var t=this.getTimezoneOffset()*-10/6,n;return t<0?(n=(t-1e4).toString(),n.charAt(0)+n.substr(2)):(n=(t+1e4).toString(),"+"+n.substr(1))};n.getElapsed=function(n){return(n||new Date)-this};n.toISOString||(n.toISOString=function(){function n(n){return n<10?"0"+n:n}return'"'+this.getUTCFullYear()+"-"+n(this.getUTCMonth()+1)+"-"+n(this.getUTCDate())+"T"+n(this.getUTCHours())+":"+n(this.getUTCMinutes())+":"+n(this.getUTCSeconds())+'Z"'});n._toString=n.toString;n.toString=function(n){var t=this,u,f;if(n&&n.length==1){u=i.formatPatterns;t.t=t.toString;switch(n){case"d":return t.t(u.shortDate);case"D":return t.t(u.longDate);case"F":return t.t(u.fullDateTime);case"m":return t.t(u.monthDay);case"r":return t.t(u.rfc1123);case"s":return t.t(u.sortableDateTime);case"t":return t.t(u.shortTime);case"T":return t.t(u.longTime);case"u":return t.t(u.universalSortableDateTime);case"y":return t.t(u.yearMonth)}}return f=function(n){switch(n*1){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}},n?n.replace(/(\\)?(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|S)/g,function(n){if(n.charAt(0)==="\\")return n.replace("\\","");t.h=t.getHours;switch(n){case"hh":return r(t.h()<13?t.h()===0?12:t.h():t.h()-12);case"h":return t.h()<13?t.h()===0?12:t.h():t.h()-12;case"HH":return r(t.h());case"H":return t.h();case"mm":return r(t.getMinutes());case"m":return t.getMinutes();case"ss":return r(t.getSeconds());case"s":return t.getSeconds();case"yyyy":return r(t.getFullYear(),4);case"yy":return r(t.getFullYear());case"dddd":return i.dayNames[t.getDay()];case"ddd":return i.abbreviatedDayNames[t.getDay()];case"dd":return r(t.getDate());case"d":return t.getDate();case"MMMM":return i.monthNames[t.getMonth()];case"MMM":return i.abbreviatedMonthNames[t.getMonth()];case"MM":return r(t.getMonth()+1);case"M":return t.getMonth()+1;case"t":return t.h()<12?i.amDesignator.substring(0,1):i.pmDesignator.substring(0,1);case"tt":return t.h()<12?i.amDesignator:i.pmDesignator;case"S":return f(t.getDate());default:return n}}):this._toString()}}(),function(){var t=Date,n=t.prototype,d=t.CultureInfo,u=Number.prototype,y,p,i,w,b,r,l,k,c,a,h;n._orient=1;n._nth=null;n._is=!1;n._same=!1;n._isSecond=!1;u._dateElement="day";n.next=function(){return this._orient=1,this};t.next=function(){return t.today().next()};n.last=n.prev=n.previous=function(){return this._orient=-1,this};t.last=t.prev=t.previous=function(){return t.today().last()};n.is=function(){return this._is=!0,this};n.same=function(){return this._same=!0,this._isSecond=!1,this};n.today=function(){return this.same().day()};n.weekday=function(){return this._is?(this._is=!1,!this.is().sat()&&!this.is().sun()):!1};n.at=function(n){return typeof n=="string"?t.parse(this.toString("d")+" "+n):this.set(n)};u.fromNow=u.after=function(n){var t={};return t[this._dateElement]=this,(n?n.clone():new Date).add(t)};u.ago=u.before=function(n){var t={};return t[this._dateElement]=this*-1,(n?n.clone():new Date).add(t)};var f="sunday monday tuesday wednesday thursday friday saturday".split(/\s/),e="january february march april may june july august september october november december".split(/\s/),o="Millisecond Second Minute Hour Day Week Month Year".split(/\s/),g="Milliseconds Seconds Minutes Hours Date Week Month FullYear".split(/\s/),v="final first second third fourth fifth".split(/\s/),s;for(n.toObject=function(){for(var t={},n=0;n<o.length;n++)t[o[n].toLowerCase()]=this["get"+g[n]]();return t},t.fromObject=function(n){return n.week=null,Date.today().set(n)},y=function(n){return function(){var r,i;if(this._is)return this._is=!1,this.getDay()==n;if(this._nth!==null){if(this._isSecond&&this.addSeconds(this._orient*-1),this._isSecond=!1,r=this._nth,this._nth=null,i=this.clone().moveToLastDayOfMonth(),this.moveToNthOccurrence(n,r),this>i)throw new RangeError(t.getDayName(n)+" does not occur "+r+" times in the month of "+t.getMonthName(i.getMonth())+" "+i.getFullYear()+".");return this}return this.moveToDayOfWeek(n,this._orient)}},p=function(n){return function(){var i=t.today(),r=n-i.getDay();return n===0&&d.firstDayOfWeek===1&&i.getDay()!==0&&(r=r+7),i.addDays(r)}},i=0;i<f.length;i++)t[f[i].toUpperCase()]=t[f[i].toUpperCase().substring(0,3)]=i,t[f[i]]=t[f[i].substring(0,3)]=p(i),n[f[i]]=n[f[i].substring(0,3)]=y(i);for(w=function(n){return function(){return this._is?(this._is=!1,this.getMonth()===n):this.moveToMonth(n,this._orient)}},b=function(n){return function(){return t.today().set({month:n,day:1})}},r=0;r<e.length;r++)t[e[r].toUpperCase()]=t[e[r].toUpperCase().substring(0,3)]=r,t[e[r]]=t[e[r].substring(0,3)]=b(r),n[e[r]]=n[e[r].substring(0,3)]=w(r);for(l=function(n){return function(){var i;if(this._isSecond)return this._isSecond=!1,this;if(this._same){this._same=this._is=!1;var r=this.toObject(),u=(arguments[0]||new Date).toObject(),t="",f=n.toLowerCase();for(i=o.length-1;i>-1;i--){if(t=o[i].toLowerCase(),r[t]!=u[t])return!1;if(f==t)break}return!0}return n.substring(n.length-1)!="s"&&(n+="s"),this["add"+n](this._orient)}},k=function(n){return function(){return this._dateElement=n,this}},c=0;c<o.length;c++)s=o[c].toLowerCase(),n[s]=n[s+"s"]=l(o[c]),u[s]=u[s+"s"]=k(s);for(n._ss=l("Second"),a=function(n){return function(t){return this._same?this._ss(arguments[0]):t||t===0?this.moveToNthOccurrence(t,n):(this._nth=n,n===2&&(t===undefined||t===null))?(this._isSecond=!0,this.addSeconds(this._orient)):this}},h=0;h<v.length;h++)n[v[h]]=h===0?a(-1):a(h)}(),function(){var i,o,f,u;Date.Parsing={Exception:function(n){this.message="Parse error at '"+n.substring(0,10)+" ...'"}};var t=Date.Parsing,n=t.Operators={rtoken:function(n){return function(i){var r=i.match(n);if(r)return[r[0],i.substring(r[0].length)];throw new t.Exception(i);}},token:function(){return function(t){return n.rtoken(new RegExp("^s*"+t+"s*"))(t)}},stoken:function(t){return n.rtoken(new RegExp("^"+t))},until:function(n){return function(t){for(var r=[],i=null;t.length;){try{i=n.call(this,t)}catch(u){r.push(i[0]);t=i[1];continue}break}return[r,t]}},many:function(n){return function(t){for(var i=[],r=null;t.length;){try{r=n.call(this,t)}catch(u){return[i,t]}i.push(r[0]);t=r[1]}return[i,t]}},optional:function(n){return function(t){var i=null;try{i=n.call(this,t)}catch(r){return[null,t]}return[i[0],i[1]]}},not:function(n){return function(i){try{n.call(this,i)}catch(r){return[null,i]}throw new t.Exception(i);}},ignore:function(n){return n?function(t){var i=null;return i=n.call(this,t),[null,i[1]]}:null},product:function(){for(var i=arguments[0],u=Array.prototype.slice.call(arguments,1),r=[],t=0;t<i.length;t++)r.push(n.each(i[t],u));return r},cache:function(n){var r={},i=null;return function(u){try{i=r[u]=r[u]||n.call(this,u)}catch(f){i=r[u]=f}if(i instanceof t.Exception)throw i;else return i}},any:function(){var n=arguments;return function(i){for(var r=null,u=0;u<n.length;u++)if(n[u]!=null){try{r=n[u].call(this,i)}catch(f){r=null}if(r)return r}throw new t.Exception(i);}},each:function(){var n=arguments;return function(i){for(var f=[],u=null,r=0;r<n.length;r++)if(n[r]!=null){try{u=n[r].call(this,i)}catch(e){throw new t.Exception(i);}f.push(u[0]);i=u[1]}return[f,i]}},all:function(){var t=arguments,n=n;return n.each(n.optional(t))},sequence:function(i,r,u){return(r=r||n.rtoken(/^\s*/),u=u||null,i.length==1)?i[0]:function(n){for(var f=null,e=null,s=[],o=0;o<i.length;o++){try{f=i[o].call(this,n)}catch(h){break}s.push(f[0]);try{e=r.call(this,f[1])}catch(c){e=null;break}n=e[1]}if(!f)throw new t.Exception(n);if(e)throw new t.Exception(e[1]);if(u)try{f=u.call(this,f[1])}catch(l){throw new t.Exception(f[1]);}return[s,f?f[1]:n]}},between:function(t,i,u){u=u||t;var f=n.each(n.ignore(t),i,n.ignore(u));return function(n){var t=f.call(this,n);return[[t[0][0],r[0][2]],t[1]]}},list:function(t,i,r){return i=i||n.rtoken(/^\s*/),r=r||null,t instanceof Array?n.each(n.product(t.slice(0,-1),n.ignore(i)),t.slice(-1),n.ignore(r)):n.each(n.many(n.each(t,n.ignore(i))),px,n.ignore(r))},set:function(i,r,u){return r=r||n.rtoken(/^\s*/),u=u||null,function(f){for(var y,a,s=null,l=null,h=null,c=null,e=[[],f],o=!1,v=0;v<i.length;v++){h=null;l=null;s=null;o=i.length==1;try{s=i[v].call(this,f)}catch(p){continue}if(c=[[s[0]],s[1]],s[1].length>0&&!o)try{h=r.call(this,s[1])}catch(w){o=!0}else o=!0;if(o||h[1].length!==0||(o=!0),!o){for(y=[],a=0;a<i.length;a++)v!=a&&y.push(i[a]);l=n.set(y,r).call(this,h[1]);l[0].length>0&&(c[0]=c[0].concat(l[0]),c[1]=l[1])}if(c[1].length<e[1].length&&(e=c),e[1].length===0)break}if(e[0].length===0)return e;if(u){try{h=u.call(this,e[1])}catch(b){throw new t.Exception(e[1]);}e[1]=h[1]}return e}},forward:function(n,t){return function(i){return n[t].call(this,i)}},replace:function(n,t){return function(i){var r=n.call(this,i);return[t,r[1]]}},process:function(n,t){return function(i){var r=n.call(this,i);return[t.call(this,r[0]),r[1]]}},min:function(n,i){return function(r){var u=i.call(this,r);if(u[0].length<n)throw new t.Exception(r);return u}}},s=function(n){return function(){var t=null,u=[],i,r;if(arguments.length>1?t=Array.prototype.slice.call(arguments):arguments[0]instanceof Array&&(t=arguments[0]),t)for(i=0,r=t.shift();i<r.length;i++)return t.unshift(r[i]),u.push(n.apply(null,t)),t.shift(),u;else return n.apply(null,arguments)}},e="optional not ignore cache".split(/\s/);for(i=0;i<e.length;i++)n[e[i]]=s(n[e[i]]);for(o=function(n){return function(){return arguments[0]instanceof Array?n.apply(null,arguments[0]):n.apply(null,arguments)}},f="each any all".split(/\s/),u=0;u<f.length;u++)n[f[u]]=o(n[f[u]])}(),function(){var r=Date,c=r.prototype,f=r.CultureInfo,h=function(n){for(var i=[],t=0;t<n.length;t++)n[t]instanceof Array?i=i.concat(h(n[t])):n[t]&&i.push(n[t]);return i},e,o,s;r.Grammar={};r.Translator={hour:function(n){return function(){this.hour=Number(n)}},minute:function(n){return function(){this.minute=Number(n)}},second:function(n){return function(){this.second=Number(n)}},meridian:function(n){return function(){this.meridian=n.slice(0,1).toLowerCase()}},timezone:function(n){return function(){var t=n.replace(/[^\d\+\-]/g,"");t.length?this.timezoneOffset=Number(t):this.timezone=n.toLowerCase()}},day:function(n){var t=n[0];return function(){this.day=Number(t.match(/\d+/)[0])}},month:function(n){return function(){this.month=n.length==3?"jan feb mar apr may jun jul aug sep oct nov dec".indexOf(n)/4:Number(n)-1}},year:function(n){return function(){var t=Number(n);this.year=n.length>2?t:t+(t+2e3<f.twoDigitYearMax?2e3:1900)}},rday:function(n){return function(){switch(n){case"yesterday":this.days=-1;break;case"tomorrow":this.days=1;break;case"today":this.days=0;break;case"now":this.days=0;this.now=!0}}},finishExact:function(n){var t,i,u;for(n=n instanceof Array?n:[n],t=0;t<n.length;t++)n[t]&&n[t].call(this);if(i=new Date,!(this.hour||this.minute)||this.month||this.year||this.day||(this.day=i.getDate()),this.year||(this.year=i.getFullYear()),this.month||this.month===0||(this.month=i.getMonth()),this.day||(this.day=1),this.hour||(this.hour=0),this.minute||(this.minute=0),this.second||(this.second=0),this.meridian&&this.hour&&(this.meridian=="p"&&this.hour<12?this.hour=this.hour+12:this.meridian=="a"&&this.hour==12&&(this.hour=0)),this.day>r.getDaysInMonth(this.year,this.month))throw new RangeError(this.day+" is not a valid value for days.");return u=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second),this.timezone?u.set({timezone:this.timezone}):this.timezoneOffset&&u.set({timezoneOffset:this.timezoneOffset}),u},finish:function(n){var s,t,i,o,u,e,f;if(n=n instanceof Array?h(n):[n],n.length===0)return null;for(s=0;s<n.length;s++)typeof n[s]=="function"&&n[s].call(this);if(t=r.today(),!this.now||this.unit||this.operator)this.now&&(t=new Date);else return new Date;return(i=!!(this.days&&this.days!==null||this.orient||this.operator),e=this.orient=="past"||this.operator=="subtract"?-1:1,this.now||"hour minute second".indexOf(this.unit)==-1||t.setTimeToNow(),(this.month||this.month===0)&&"year day hour minute second".indexOf(this.unit)!=-1&&(this.value=this.month+1,this.month=null,i=!0),i||!this.weekday||this.day||this.days||(f=Date[this.weekday](),this.day=f.getDate(),this.month||(this.month=f.getMonth()),this.year=f.getFullYear()),i&&this.weekday&&this.unit!="month"&&(this.unit="day",o=r.getDayNumberFromName(this.weekday)-t.getDay(),u=7,this.days=o?(o+e*u)%u:e*u),this.month&&this.unit=="day"&&this.operator&&(this.value=this.month+1,this.month=null),this.value!=null&&this.month!=null&&this.year!=null&&(this.day=this.value*1),this.month&&!this.day&&this.value&&(t.set({day:this.value*1}),i||(this.day=this.value*1)),this.month||!this.value||this.unit!="month"||this.now||(this.month=this.value,i=!0),i&&(this.month||this.month===0)&&this.unit!="year"&&(this.unit="month",o=this.month-t.getMonth(),u=12,this.months=o?(o+e*u)%u:e*u,this.month=null),this.unit||(this.unit="day"),!this.value&&this.operator&&this.operator!==null&&this[this.unit+"s"]&&this[this.unit+"s"]!==null?this[this.unit+"s"]=this[this.unit+"s"]+(this.operator=="add"?1:-1)+(this.value||0)*e:(this[this.unit+"s"]==null||this.operator!=null)&&(this.value||(this.value=1),this[this.unit+"s"]=this.value*e),this.meridian&&this.hour&&(this.meridian=="p"&&this.hour<12?this.hour=this.hour+12:this.meridian=="a"&&this.hour==12&&(this.hour=0)),!this.weekday||this.day||this.days||(f=Date[this.weekday](),this.day=f.getDate(),f.getMonth()!==t.getMonth()&&(this.month=f.getMonth())),(this.month||this.month===0)&&!this.day&&(this.day=1),!this.orient&&!this.operator&&this.unit=="week"&&this.value&&!this.day&&!this.month)?Date.today().setWeek(this.value):(i&&this.timezone&&this.day&&this.days&&(this.day=this.days),i?t.add(this):t.set(this))}};var t=r.Parsing.Operators,n=r.Grammar,i=r.Translator,u;n.datePartDelimiter=t.rtoken(/^([\s\-\.\,\/\x27]+)/);n.timePartDelimiter=t.stoken(":");n.whiteSpace=t.rtoken(/^\s*/);n.generalDelimiter=t.rtoken(/^(([\s\,]|at|@|on)+)/);e={};n.ctoken=function(n){var r=e[n],i;if(!r){var s=f.regexPatterns,u=n.split(/\s+/),o=[];for(i=0;i<u.length;i++)o.push(t.replace(t.rtoken(s[u[i]]),u[i]));r=e[n]=t.any.apply(null,o)}return r};n.ctoken2=function(n){return t.rtoken(f.regexPatterns[n])};n.h=t.cache(t.process(t.rtoken(/^(0[0-9]|1[0-2]|[1-9])/),i.hour));n.hh=t.cache(t.process(t.rtoken(/^(0[0-9]|1[0-2])/),i.hour));n.H=t.cache(t.process(t.rtoken(/^([0-1][0-9]|2[0-3]|[0-9])/),i.hour));n.HH=t.cache(t.process(t.rtoken(/^([0-1][0-9]|2[0-3])/),i.hour));n.m=t.cache(t.process(t.rtoken(/^([0-5][0-9]|[0-9])/),i.minute));n.mm=t.cache(t.process(t.rtoken(/^[0-5][0-9]/),i.minute));n.s=t.cache(t.process(t.rtoken(/^([0-5][0-9]|[0-9])/),i.second));n.ss=t.cache(t.process(t.rtoken(/^[0-5][0-9]/),i.second));n.hms=t.cache(t.sequence([n.H,n.m,n.s],n.timePartDelimiter));n.t=t.cache(t.process(n.ctoken2("shortMeridian"),i.meridian));n.tt=t.cache(t.process(n.ctoken2("longMeridian"),i.meridian));n.z=t.cache(t.process(t.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),i.timezone));n.zz=t.cache(t.process(t.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),i.timezone));n.zzz=t.cache(t.process(n.ctoken2("timezone"),i.timezone));n.timeSuffix=t.each(t.ignore(n.whiteSpace),t.set([n.tt,n.zzz]));n.time=t.each(t.optional(t.ignore(t.stoken("T"))),n.hms,n.timeSuffix);n.d=t.cache(t.process(t.each(t.rtoken(/^([0-2]\d|3[0-1]|\d)/),t.optional(n.ctoken2("ordinalSuffix"))),i.day));n.dd=t.cache(t.process(t.each(t.rtoken(/^([0-2]\d|3[0-1])/),t.optional(n.ctoken2("ordinalSuffix"))),i.day));n.ddd=n.dddd=t.cache(t.process(n.ctoken("sun mon tue wed thu fri sat"),function(n){return function(){this.weekday=n}}));n.M=t.cache(t.process(t.rtoken(/^(1[0-2]|0\d|\d)/),i.month));n.MM=t.cache(t.process(t.rtoken(/^(1[0-2]|0\d)/),i.month));n.MMM=n.MMMM=t.cache(t.process(n.ctoken("jan feb mar apr may jun jul aug sep oct nov dec"),i.month));n.y=t.cache(t.process(t.rtoken(/^(\d\d?)/),i.year));n.yy=t.cache(t.process(t.rtoken(/^(\d\d)/),i.year));n.yyy=t.cache(t.process(t.rtoken(/^(\d\d?\d?\d?)/),i.year));n.yyyy=t.cache(t.process(t.rtoken(/^(\d\d\d\d)/),i.year));u=function(){return t.each(t.any.apply(null,arguments),t.not(n.ctoken2("timeContext")))};n.day=u(n.d,n.dd);n.month=u(n.M,n.MMM);n.year=u(n.yyyy,n.yy);n.orientation=t.process(n.ctoken("past future"),function(n){return function(){this.orient=n}});n.operator=t.process(n.ctoken("add subtract"),function(n){return function(){this.operator=n}});n.rday=t.process(n.ctoken("yesterday tomorrow today now"),i.rday);n.unit=t.process(n.ctoken("second minute hour day week month year"),function(n){return function(){this.unit=n}});n.value=t.process(t.rtoken(/^\d\d?(st|nd|rd|th)?/),function(n){return function(){this.value=n.replace(/\D/g,"")}});n.expression=t.set([n.rday,n.operator,n.value,n.unit,n.orientation,n.ddd,n.MMM]);u=function(){return t.set(arguments,n.datePartDelimiter)};n.mdy=u(n.ddd,n.month,n.day,n.year);n.ymd=u(n.ddd,n.year,n.month,n.day);n.dmy=u(n.ddd,n.day,n.month,n.year);n.date=function(t){return(n[f.dateElementOrder]||n.mdy).call(this,t)};n.format=t.process(t.many(t.any(t.process(t.rtoken(/^(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?)/),function(t){if(n[t])return n[t];throw r.Parsing.Exception(t);}),t.process(t.rtoken(/^[^dMyhHmstz]+/),function(n){return t.ignore(t.stoken(n))}))),function(n){return t.process(t.each.apply(null,n),i.finishExact)});o={};s=function(t){return o[t]=o[t]||n.format(t)[0]};n.formats=function(n){var r,i;if(n instanceof Array){for(r=[],i=0;i<n.length;i++)r.push(s(n[i]));return t.any.apply(null,r)}return s(n)};n._formats=n.formats(['"yyyy-MM-ddTHH:mm:ssZ"',"yyyy-MM-ddTHH:mm:ssZ","yyyy-MM-ddTHH:mm:ssz","yyyy-MM-ddTHH:mm:ss","yyyy-MM-ddTHH:mmZ","yyyy-MM-ddTHH:mmz","yyyy-MM-ddTHH:mm","ddd, MMM dd, yyyy H:mm:ss tt","ddd MMM d yyyy HH:mm:ss zzz","MMddyyyy","ddMMyyyy","Mddyyyy","ddMyyyy","Mdyyyy","dMyyyy","yyyy","Mdyy","dMyy","d"]);n._start=t.process(t.set([n.date,n.time,n.expression],n.generalDelimiter,n.whiteSpace),i.finish);n.start=function(t){try{var i=n._formats.call({},t);if(i[1].length===0)return i}catch(r){}return n._start.call({},t)};r._parse=r.parse;r.parse=function(n){var t=null;if(!n)return null;if(n instanceof Date)return n;try{t=r.Grammar.start.call({},n.replace(/^\s*(\S*(\s+\S+)*)\s*$/,"$1"))}catch(i){return null}return t[1].length===0?t[0]:null};r.getParseFunction=function(n){var t=r.Grammar.formats(n);return function(n){var i=null;try{i=t.call({},n)}catch(r){return null}return i[1].length===0?i[0]:null}};r.parseExact=function(n,t){return r.getParseFunction(t)(n)}}(),function(n){function r(){var t=u(this);return isNaN(t.datetime)||n(this).text(i(t.datetime)),this}function u(i){if(i=n(i),!i.data("timeago")){i.data("timeago",{datetime:t.datetime(i)});var r=n.trim(i.text());r.length>0&&!(t.isTime(i)&&i.attr("title"))&&i.attr("title",r)}return i.data("timeago")}function i(n){return t.inWords(f(n))}function f(n){return(new Date).getTime()-n.getTime()}n.timeago=function(t){return t instanceof Date?i(t):typeof t=="string"?i(n.timeago.parse(t)):typeof t=="number"?i(new Date(t)):i(n.timeago.datetime(t))};var t=n.timeago;n.extend(n.timeago,{settings:{refreshMillis:6e4,allowFuture:!1,strings:{prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years",wordSeparator:" ",numbers:[]}},inWords:function(t){function r(r,u){var f=n.isFunction(r)?r(u,t):r,e=i.numbers&&i.numbers[u]||u;return f.replace(/%d/i,e)}var i=this.settings.strings,s=i.prefixAgo,h=i.suffixAgo,l,a;this.settings.allowFuture&&t<0&&(s=i.prefixFromNow,h=i.suffixFromNow);var f=Math.abs(t)/1e3,e=f/60,o=e/60,u=o/24,c=u/365;return l=f<45&&r(i.seconds,Math.round(f))||f<90&&r(i.minute,1)||e<45&&r(i.minutes,Math.round(e))||e<90&&r(i.hour,1)||o<24&&r(i.hours,Math.round(o))||o<42&&r(i.day,1)||u<30&&r(i.days,Math.round(u))||u<45&&r(i.month,1)||u<365&&r(i.months,Math.round(u/30))||c<1.5&&r(i.year,1)||r(i.years,Math.round(c)),a=i.wordSeparator===undefined?" ":i.wordSeparator,n.trim([s,l,h].join(a))},parse:function(t){var i=n.trim(t);return i=i.replace(/\.\d+/,""),i=i.replace(/-/,"/").replace(/-/,"/"),i=i.replace(/T/," ").replace(/Z/," UTC"),i=i.replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2"),new Date(i)},datetime:function(i){var r=t.isTime(i)?n(i).attr("datetime"):n(i).attr("title");return t.parse(r)},isTime:function(t){return n(t).get(0).tagName.toLowerCase()==="time"}});n.fn.timeago=function(){var n=this,i;return n.each(r),i=t.settings,i.refreshMillis>0&&setInterval(function(){n.each(r)},i.refreshMillis),n};document.createElement("abbr");document.createElement("time")}(jQuery);q=null;window.PR_SHOULD_USE_CONTINUATION=!0,function(){function w(n){function u(n){var i=n.charCodeAt(0),t;return i!==92?i:(t=n.charAt(1),(i=a[t])?i:"0"<=t&&t<="7"?parseInt(n.substring(1),8):t==="u"||t==="x"?parseInt(n.substring(2),16):n.charCodeAt(1))}function f(n){return n<32?(n<16?"\\x0":"\\x")+n.toString(16):(n=String.fromCharCode(n),(n==="\\"||n==="-"||n==="["||n==="]")&&(n="\\"+n),n)}function h(n){for(var t,s,o=n.substring(1,n.length-1).match(/\\u[\dA-Fa-f]{4}|\\x[\dA-Fa-f]{2}|\\[0-3][0-7]{0,2}|\\[0-7]{1,2}|\\[\S\s]|[^\\]/g),n=[],i=[],h=o[0]==="^",r=h?1:0,e=o.length;r<e;++r)t=o[r],/\\[bdsw]/i.test(t)?n.push(t):(t=u(t),r+2<e&&"-"===o[r+1]?(s=u(o[r+2]),r+=2):s=t,i.push([t,s]),s<65||t>122||(s<65||t>90||i.push([Math.max(65,t)|32,Math.min(s,90)|32]),s<97||t>122||i.push([Math.max(97,t)&-33,Math.min(s,122)&-33])));for(i.sort(function(n,t){return n[0]-t[0]||t[1]-n[1]}),o=[],t=[NaN,NaN],r=0;r<i.length;++r)e=i[r],e[0]<=t[1]+1?t[1]=Math.max(t[1],e[1]):o.push(t=e);for(i=["["],h&&i.push("^"),i.push.apply(i,n),r=0;r<o.length;++r)e=o[r],i.push(f(e[0])),e[1]>e[0]&&(e[1]+1>e[0]&&i.push("-"),i.push(f(e[1])));return i.push("]"),i.join("")}function c(n){for(var i,r=n.source.match(/\[(?:[^\\\]]|\\[\S\s])*]|\\u[\dA-Fa-f]{4}|\\x[\dA-Fa-f]{2}|\\\d+|\\[^\dux]|\(\?[!:=]|[()^]|[^()[\\^]+/g),o=r.length,f=[],t=0,u=0;t<o;++t)i=r[t],i==="("?++u:"\\"===i.charAt(0)&&(i=+i.substring(1))&&i<=u&&(f[i]=-1);for(t=1;t<f.length;++t)-1===f[t]&&(f[t]=++l);for(u=t=0;t<o;++t)i=r[t],i==="("?(++u,f[u]===void 0&&(r[t]="(?:")):"\\"===i.charAt(0)&&(i=+i.substring(1))&&i<=u&&(r[t]="\\"+f[u]);for(u=t=0;t<o;++t)"^"===r[t]&&"^"!==r[t+1]&&(r[t]="");if(n.ignoreCase&&e)for(t=0;t<o;++t)i=r[t],n=i.charAt(0),i.length>=2&&n==="["?r[t]=h(i):n!=="\\"&&(r[t]=i.replace(/[A-Za-z]/g,function(n){return n=n.charCodeAt(0),"["+String.fromCharCode(n&-33,n|32)+"]"}));return r.join("")}for(var t,l=0,e=!1,r=!1,i=0,o=n.length;i<o;++i)if(t=n[i],t.ignoreCase)r=!0;else if(/[a-z]/i.test(t.source.replace(/\\u[\da-f]{4}|\\x[\da-f]{2}|\\[^UXux]/gi,""))){e=!0;r=!1;break}for(var a={b:8,t:9,n:10,v:11,f:12,r:13},s=[],i=0,o=n.length;i<o;++i){if(t=n[i],t.global||t.multiline)throw Error(""+t);s.push("(?:"+c(t)+")")}return RegExp(s.join("|"),r?"gi":"g")}function b(n){function e(n){switch(n.nodeType){case 1:if(s.test(n.className))break;for(var r=n.firstChild;r;r=r.nextSibling)e(r);r=n.nodeName;("BR"===r||"LI"===r)&&(u[t]="\n",i[t<<1]=f++,i[t++<<1|1]=n);break;case 3:case 4:r=n.nodeValue;r.length&&(r=o?r.replace(/\r\n?/g,"\n"):r.replace(/[\t\n\r ]+/g," "),u[t]=r,i[t<<1]=f,f+=r.length,i[t++<<1|1]=n)}}var s=/(?:^|\s)nocode(?:\s|$)/,u=[],f=0,i=[],t=0,r,o;return n.currentStyle?r=n.currentStyle.whiteSpace:window.getComputedStyle&&(r=document.defaultView.getComputedStyle(n,q).getPropertyValue("white-space")),o=r&&"pre"===r.substring(0,3),e(n),{a:u.join("").replace(/\n$/,""),c:i}}function e(n,t,i,r){t&&(n={a:t,d:n},i(n),r.push.apply(r,n.e))}function i(n,t){function i(n){for(var c,p,w,v=n.d,y=[v,"pln"],k=0,d=n.a.match(u)||[],g={},b=0,nt=d.length;b<nt;++b){var l=d[b],h=g[l],a=void 0,o;if(typeof h=="string")o=!1;else{if(c=r[l.charAt(0)],c)a=l.match(c[1]),h=c[0];else{for(o=0;o<f;++o)if(c=t[o],a=l.match(c[1])){h=c[0];break}a||(h="pln")}!(o=h.length>=5&&"lang-"===h.substring(0,5))||a&&typeof a[1]=="string"||(o=!1,h="src");o||(g[l]=h)}c=k;k+=l.length;o?(o=a[1],p=l.indexOf(o),w=p+o.length,a[2]&&(w=l.length-a[2].length,p=w-o.length),h=h.substring(5),e(v+c,l.substring(0,p),i,y),e(v+c+p,o,s(h,o),y),e(v+c+w,l.substring(w),i,y)):y.push(v+c,h)}n.e=y}var r={},u,f;return function(){for(var i,f,s,h=n.concat(t),e=[],c={},o=0,l=h.length;o<l;++o){if(i=h[o],f=i[3],f)for(s=f.length;--s>=0;)r[f.charAt(s)]=i;i=i[1];f=""+i;c.hasOwnProperty(f)||(e.push(i),c[f]=q)}e.push(/[\S\s]/);u=w(e)}(),f=t.length,i}function t(n){var r=[],t=[],u;return n.tripleQuotedStrings?r.push(["str",/^(?:'''(?:[^'\\]|\\[\S\s]|''?(?=[^']))*(?:'''|$)|"""(?:[^"\\]|\\[\S\s]|""?(?=[^"]))*(?:"""|$)|'(?:[^'\\]|\\[\S\s])*(?:'|$)|"(?:[^"\\]|\\[\S\s])*(?:"|$))/,q,"'\""]):n.multiLineStrings?r.push(["str",/^(?:'(?:[^'\\]|\\[\S\s])*(?:'|$)|"(?:[^"\\]|\\[\S\s])*(?:"|$)|`(?:[^\\`]|\\[\S\s])*(?:`|$))/,q,"'\"`"]):r.push(["str",/^(?:'(?:[^\n\r'\\]|\\.)*(?:'|$)|"(?:[^\n\r"\\]|\\.)*(?:"|$))/,q,"\"'"]),n.verbatimStrings&&t.push(["str",/^@"(?:[^"]|"")*(?:"|$)/,q]),u=n.hashComments,u&&(n.cStyleComments?(u>1?r.push(["com",/^#(?:##(?:[^#]|#(?!##))*(?:###|$)|.*)/,q,"#"]):r.push(["com",/^#(?:(?:define|elif|else|endif|error|ifdef|include|ifndef|line|pragma|undef|warning)\b|[^\n\r]*)/,q,"#"]),t.push(["str",/^<(?:(?:(?:\.\.\/)*|\/?)(?:[\w-]+(?:\/[\w-]+)+)?[\w-]+\.h|[a-z]\w*)>/,q])):r.push(["com",/^#[^\n\r]*/,q,"#"])),n.cStyleComments&&(t.push(["com",/^\/\/[^\n\r]*/,q]),t.push(["com",/^\/\*[\S\s]*?(?:\*\/|$)/,q])),n.regexLiterals&&t.push(["lang-regex",/^(?:^^\.?|[!+-]|!=|!==|#|%|%=|&|&&|&&=|&=|\(|\*|\*=|\+=|,|-=|->|\/|\/=|:|::|;|<|<<|<<=|<=|=|==|===|>|>=|>>|>>=|>>>|>>>=|[?@[^]|\^=|\^\^|\^\^=|{|\||\|=|\|\||\|\|=|~|break|case|continue|delete|do|else|finally|instanceof|return|throw|try|typeof)\s*(\/(?=[^*/])(?:[^/[\\]|\\[\S\s]|\[(?:[^\\\]]|\\[\S\s])*(?:]|$))+\/)/]),(u=n.types)&&t.push(["typ",u]),n=(""+n.keywords).replace(/^ | $/g,""),n.length&&t.push(["kwd",RegExp("^(?:"+n.replace(/[\s,]+/g,"|")+")\\b"),q]),r.push(["pln",/^\s+/,q," \r\n\t "]),t.push(["lit",/^@[$_a-z][\w$@]*/i,q],["typ",/^(?:[@_]?[A-Z]+[a-z][\w$@]*|\w+_t\b)/,q],["pln",/^[$_a-z][\w$@]*/i,q],["lit",/^(?:0x[\da-f]+|(?:\d(?:_\d+)*\d*(?:\.\d*)?|\.\d\+)(?:e[+-]?\d+)?)[a-z]*/i,q,"0123456789"],["pln",/^\\[\S\s]?/,q],["pun",/^.[^\s\w"-$'./@\\`]*/,q]),i(r,t)}function o(n,t){function o(n){var t,i,r;switch(n.nodeType){case 1:if(c.test(n.className))break;if("BR"===n.nodeName)s(n),n.parentNode&&n.parentNode.removeChild(n);else for(n=n.firstChild;n;n=n.nextSibling)o(n);break;case 3:case 4:h&&(t=n.nodeValue,i=t.match(l),i&&(r=t.substring(0,i.index),n.nodeValue=r,(t=t.substring(i.index+i[0].length))&&n.parentNode.insertBefore(f.createTextNode(t),n.nextSibling),s(n),r||n.parentNode.removeChild(n)))}}function s(n){function i(n,t){var e=t?n.cloneNode(!1):n,r=n.parentNode,f,u;if(r)for(r=i(r,1),f=n.nextSibling,r.appendChild(e),u=f;u;u=f)f=u.nextSibling,r.appendChild(u);return e}for(;!n.nextSibling;)if(n=n.parentNode,!n)return;for(var n=i(n.nextSibling,0),t;(t=n.parentNode)&&t.nodeType===1;)n=t;u.push(n)}var c=/(?:^|\s)nocode(?:\s|$)/,l=/\r\n?|\n/,f=n.ownerDocument,i,h,u,r,e;for(n.currentStyle?i=n.currentStyle.whiteSpace:window.getComputedStyle&&(i=f.defaultView.getComputedStyle(n,q).getPropertyValue("white-space")),h=i&&"pre"===i.substring(0,3),i=f.createElement("LI");n.firstChild;)i.appendChild(n.firstChild);for(u=[i],r=0;r<u.length;++r)o(u[r]);t===(t|0)&&u[0].setAttribute("value",t);e=f.createElement("OL");e.className="linenums";for(var a=Math.max(0,t-1|0)||0,r=0,v=u.length;r<v;++r)i=u[r],i.className="L"+(r+a)%10,i.firstChild||i.appendChild(f.createTextNode(" ")),e.appendChild(i);n.appendChild(e)}function n(n,t){for(var i,r=t.length;--r>=0;)i=t[r],f.hasOwnProperty(i)?window.console&&console.warn("cannot override language handler %s",i):f[i]=n}function s(n,t){return n&&f.hasOwnProperty(n)||(n=/^\s*</.test(t)?"default-markup":"default-code"),f[n]}function h(n){var g=n.g,r,u,f,i,k,c,d;try{r=b(n.h);u=r.a;n.a=u;n.c=r.c;n.d=0;s(g,u)(n);var it=/\bMSIE\b/.test(navigator.userAgent),g=/\n/g,p=n.a,w=p.length,r=0,l=n.c,rt=l.length,u=0,t=n.e,h=t.length,n=0;for(t[h]=w,i=f=0;i<h;)t[i]!==t[i+2]?(t[f++]=t[i++],t[f++]=t[i++]):i+=2;for(h=f,i=f=0;i<h;){for(var ut=t[i],nt=t[i+1],o=i+2;o+2<=h&&t[o+1]===nt;)o+=2;t[f++]=ut;t[f++]=nt;i=o}for(t.length=f;u<rt;){var a=l[u+2]||w,tt=t[n+2]||w,o=Math.min(a,tt),e=l[u+1],v;e.nodeType!==1&&(v=p.substring(r,o))&&(it&&(v=v.replace(g,"\r")),e.nodeValue=v,k=e.ownerDocument,c=k.createElement("SPAN"),c.className=t[n+1],d=e.parentNode,d.replaceChild(c,e),c.appendChild(e),r<a&&(l[u+1]=e=k.createTextNode(p.substring(o,a)),d.insertBefore(e,c.nextSibling)));r=o;r>=a&&(u+=2);r>=tt&&(n+=2)}}catch(y){"console"in window&&console.log(y&&y.stack?y.stack:y)}}var r=["break,continue,do,else,for,if,return,while"],u=[[r,"auto,case,char,const,default,double,enum,extern,float,goto,int,long,register,short,signed,sizeof,static,struct,switch,typedef,union,unsigned,void,volatile"],"catch,class,delete,false,import,new,operator,private,protected,public,this,throw,true,try,typeof"],c=[u,"alignof,align_union,asm,axiom,bool,concept,concept_map,const_cast,constexpr,decltype,dynamic_cast,explicit,export,friend,inline,late_check,mutable,namespace,nullptr,reinterpret_cast,static_assert,static_cast,template,typeid,typename,using,virtual,where"],l=[u,"abstract,boolean,byte,extends,final,finally,implements,import,instanceof,null,native,package,strictfp,super,synchronized,throws,transient"],a=[l,"as,base,by,checked,decimal,delegate,descending,dynamic,event,fixed,foreach,from,group,implicit,in,interface,internal,into,is,lock,object,out,override,orderby,params,partial,readonly,ref,sbyte,sealed,stackalloc,string,select,uint,ulong,unchecked,unsafe,ushort,var"],u=[u,"debugger,eval,export,function,get,null,set,undefined,var,with,Infinity,NaN"],v=[r,"and,as,assert,class,def,del,elif,except,exec,finally,from,global,import,in,is,lambda,nonlocal,not,or,pass,print,raise,try,with,yield,False,True,None"],y=[r,"alias,and,begin,case,class,def,defined,elsif,end,ensure,false,in,module,next,nil,not,or,redo,rescue,retry,self,super,then,true,undef,unless,until,when,yield,BEGIN,END"],r=[r,"case,done,elif,esac,eval,fi,function,in,local,set,then,until"],p=/^(DIR|FILE|vector|(de|priority_)?queue|list|stack|(const_)?iterator|(multi)?(set|map)|bitset|u?(int|float)\d*)/,k=/\S/,d=t({keywords:[c,a,u,"caller,delete,die,do,dump,elsif,eval,exit,foreach,for,goto,if,import,last,local,my,next,no,our,print,package,redo,require,sub,undef,unless,until,use,wantarray,while,BEGIN,END"+v,y,r],hashComments:!0,cStyleComments:!0,multiLineStrings:!0,regexLiterals:!0}),f={};n(d,["default-code"]);n(i([],[["pln",/^[^<?]+/],["dec",/^<!\w[^>]*(?:>|$)/],["com",/^<\!--[\S\s]*?(?:--\>|$)/],["lang-",/^<\?([\S\s]+?)(?:\?>|$)/],["lang-",/^<%([\S\s]+?)(?:%>|$)/],["pun",/^(?:<[%?]|[%?]>)/],["lang-",/^<xmp\b[^>]*>([\S\s]+?)<\/xmp\b[^>]*>/i],["lang-js",/^<script\b[^>]*>([\S\s]*?)(<\/script\b[^>]*>)/i],["lang-css",/^<style\b[^>]*>([\S\s]*?)(<\/style\b[^>]*>)/i],["lang-in.tag",/^(<\/?[a-z][^<>]*>)/i]]),["default-markup","htm","html","mxml","xhtml","xml","xsl"]);n(i([["pln",/^\s+/,q," \t\r\n"],["atv",/^(?:"[^"]*"?|'[^']*'?)/,q,"\"'"]],[["tag",/^^<\/?[a-z](?:[\w-.:]*\w)?|\/?>$/i],["atn",/^(?!style[\s=]|on)[a-z](?:[\w:-]*\w)?/i],["lang-uq.val",/^=\s*([^\s"'>]*(?:[^\s"'/>]|\/(?=\s)))/],["pun",/^[/<->]+/],["lang-js",/^on\w+\s*=\s*"([^"]+)"/i],["lang-js",/^on\w+\s*=\s*'([^']+)'/i],["lang-js",/^on\w+\s*=\s*([^\s"'>]+)/i],["lang-css",/^style\s*=\s*"([^"]+)"/i],["lang-css",/^style\s*=\s*'([^']+)'/i],["lang-css",/^style\s*=\s*([^\s"'>]+)/i]]),["in.tag"]);n(i([],[["atv",/^[\S\s]+/]]),["uq.val"]);n(t({keywords:c,hashComments:!0,cStyleComments:!0,types:p}),["c","cc","cpp","cxx","cyc","m"]);n(t({keywords:"null,true,false"}),["json"]);n(t({keywords:a,hashComments:!0,cStyleComments:!0,verbatimStrings:!0,types:p}),["cs"]);n(t({keywords:l,cStyleComments:!0}),["java"]);n(t({keywords:r,hashComments:!0,multiLineStrings:!0}),["bsh","csh","sh"]);n(t({keywords:v,hashComments:!0,multiLineStrings:!0,tripleQuotedStrings:!0}),["cv","py"]);n(t({keywords:"caller,delete,die,do,dump,elsif,eval,exit,foreach,for,goto,if,import,last,local,my,next,no,our,print,package,redo,require,sub,undef,unless,until,use,wantarray,while,BEGIN,END",hashComments:!0,multiLineStrings:!0,regexLiterals:!0}),["perl","pl","pm"]);n(t({keywords:y,hashComments:!0,multiLineStrings:!0,regexLiterals:!0}),["rb"]);n(t({keywords:u,cStyleComments:!0,regexLiterals:!0}),["js"]);n(t({keywords:"all,and,by,catch,class,else,extends,false,finally,for,if,in,is,isnt,loop,new,no,not,null,of,off,on,or,return,super,then,true,try,unless,until,when,while,yes",hashComments:3,cStyleComments:!0,multilineStrings:!0,tripleQuotedStrings:!0,regexLiterals:!0}),["coffee"]);n(i([],[["str",/^[\S\s]+/]]),["regex"]);window.prettyPrintOne=function(n,t,i){var r=document.createElement("PRE");return r.innerHTML=n,i&&o(r,i),h({g:t,i:i,h:r}),r.innerHTML};window.prettyPrint=function(n){function c(){for(var l,e,y,r,v,p,f,w=window.PR_SHOULD_USE_CONTINUATION?t.now()+250:Infinity;i<u.length&&t.now()<w;i++)if(l=u[i],e=l.className,e.indexOf("prettyprint")>=0){if(e=e.match(s),r=!e){for(r=l,f=void 0,v=r.firstChild;v;v=v.nextSibling)p=v.nodeType,f=p===1?f?r:v:p===3?k.test(v.nodeValue)?r:f:f;r=(y=f===r?void 0:f)&&"CODE"===y.tagName}for(r&&(e=y.className.match(s)),e&&(e=e[1]),r=!1,f=l.parentNode;f;f=f.parentNode)if((f.tagName==="pre"||f.tagName==="code"||f.tagName==="xmp")&&f.className&&f.className.indexOf("prettyprint")>=0){r=!0;break}r||((r=(r=l.className.match(/\blinenums\b(?::(\d+))?/))?r[1]&&r[1].length?+r[1]:!0:!1)&&o(l,r),a={g:e,h:l,i:r},h(a))}i<u.length?setTimeout(c,250):n&&n()}for(var e,l,t,i,a,s,r=[document.getElementsByTagName("pre"),document.getElementsByTagName("code"),document.getElementsByTagName("xmp")],u=[],f=0;f<r.length;++f)for(e=0,l=r[f].length;e<l;++e)u.push(r[f][e]);r=q;t=Date;t.now||(t={now:function(){return+new Date}});i=0;s=/\blang(?:uage)?-([\w.]+)(?!\S)/;c()};window.PR={createSimpleLexer:i,registerLangHandler:n,sourceDecorator:t,PR_ATTRIB_NAME:"atn",PR_ATTRIB_VALUE:"atv",PR_COMMENT:"com",PR_DECLARATION:"dec",PR_KEYWORD:"kwd",PR_LITERAL:"lit",PR_NOCODE:"nocode",PR_PLAIN:"pln",PR_PUNCTUATION:"pun",PR_SOURCE:"src",PR_STRING:"str",PR_TAG:"tag",PR_TYPE:"typ"}}();jQuery.cookie=function(n,t,i){var u,r,f,e;return arguments.length>1&&(t===null||typeof t!="object")?(i=jQuery.extend({},i),t===null&&(i.expires=-1),typeof i.expires=="number"&&(u=i.expires,r=i.expires=new Date,r.setDate(r.getDate()+u)),document.cookie=[encodeURIComponent(n),"=",i.raw?String(t):encodeURIComponent(String(t)),i.expires?"; expires="+i.expires.toUTCString():"",i.path?"; path="+i.path:"",i.domain?"; domain="+i.domain:"",i.secure?"; secure":""].join("")):(i=t||{},e=i.raw?function(n){return n}:decodeURIComponent,(f=new RegExp("(?:^|; )"+encodeURIComponent(n)+"=([^;]*)").exec(document.cookie))?e(f[1]):null)},function(){var n=function(n,t){return function(){return n.apply(t,arguments)}},t=[].indexOf||function(n){for(var t=0,i=this.length;t<i;t++)if(t in this&&this[t]===n)return t;return-1};(function(i){var r;return i.fn.pagination=function(n){return this.each(function(){return new r(i(this),n).render()})},r=function(){function r(t,r){var u;if(this.el=t,this.change=n(this.change,this),this.clicked=n(this.clicked,this),this.isValidPage=n(this.isValidPage,this),this.render=n(this.render,this),this.pages=n(this.pages,this),this.buildLink=n(this.buildLink,this),this.buildLi=n(this.buildLi,this),this.buildLinks=n(this.buildLinks,this),u={current_page:1,total_pages:1,next:"&gt;",prev:"&lt;",first:!1,last:!1,display_max:8,ignore_single_page:!0,no_turbolink:!1},this.settings=i.extend(u,r),i(document).on)i(this.el).on("click","a",this.clicked);else i("a",this.el).live("click",this.clicked);this.el.data("paginationView",this)}return r.prototype.buildLinks=function(){var i,n,r,t,f,u;for(i=this.settings.current_page,n=[],this.settings.first&&n.push(this.buildLi(1,this.settings.first)),this.settings.prev&&n.push(this.buildLi(i-1,this.settings.prev)),u=this.pages(),t=0,f=u.length;t<f;t++)r=u[t],n.push(this.buildLi(r,r));return this.settings.next&&n.push(this.buildLi(i+1,this.settings.next)),this.settings.last&&n.push(this.buildLi(this.settings.total_pages,this.settings.last)),n},r.prototype.buildLi=function(n,t){return t==null&&(t=n),"<li>"+this.buildLink(n,t)+"<\/li>"},r.prototype.buildLink=function(n,t){var i;return t==null&&(t=n),i=this.settings.no_turbolink?" data-no-turbolink='1'":"","<a href='#' data-page='"+n+"'"+i+">"+t+"<\/a>"},r.prototype.pages=function(){var v,e,f,r,u,n,o,s,h,c,l,y,p,w,a;if(n=this.settings.total_pages,e=this.settings.current_page,u=[],f=this.settings.display_max,n>10){if(u.push(1),e>f-1&&u.push(".."),e===n)for(r=o=y=n-f;y<=n?o<=n:o>=n;r=y<=n?++o:--o)u.push(r);if(n-e<f-1)for(r=s=p=n-f;p<=n?s<=n:s>=n;r=p<=n?++s:--s)u.push(r);else if(e>f-1)for(v=f/2,r=h=w=e-v,a=e+v;w<=a?h<=a:h>=a;r=w<=a?++h:--h)u.push(r);else if(e<=f-1)for(r=c=2;2<=f?c<=f:c>=f;r=2<=f?++c:--c)u.push(r);u=i.grep(u,function(n,t){return i.inArray(n,u)===t});t.call(u,n)<0&&(n-e<f-1||u.push(".."),u.push(n))}else for(r=l=1;1<=n?l<=n:l>=n;r=1<=n?++l:--l)u.push(r);return u},r.prototype.render=function(){var n,u,t,f,r;if(this.el.html(""),this.settings.total_pages!==1||!this.settings.ignore_single_page){for(n=["<div class='jquery-bootstrap-pagination'>"],n.push("<ul class='pagination'>"),r=this.buildLinks(),t=0,f=r.length;t<f;t++)u=r[t],n.push(u);return n.push("<\/ul>"),n.push("<\/div>"),this.el.html(n.join("\n")),i("[data-page="+this.settings.current_page+"]",this.el).closest("li").addClass("active"),i("[data-page='..']",this.el).closest("li").addClass("disabled"),i("[data-page='0']",this.el).closest("li").addClass("disabled"),i("[data-page='"+(this.settings.total_pages+1)+"']",this.el).closest("li").addClass("disabled"),this.settings.current_page===1&&this.settings.first&&i("li:first",this.el).removeClass("active").addClass("disabled"),this.settings.current_page===this.settings.total_pages&&this.settings.last?i("li:last",this.el).removeClass("active").addClass("disabled"):void 0}},r.prototype.isValidPage=function(n){return n>0&&n!==this.settings.current_page&&n<=this.settings.total_pages},r.prototype.clicked=function(n){n.stopPropagation();var t;if(t=parseInt(i(n.target).attr("data-page")),this.isValidPage(t))return this.settings.callback!=null&&this.settings.callback(n,t),this.change(t)},r.prototype.change=function(n){if(n=parseInt(n),this.isValidPage(n))return this.settings.current_page=n,this.render()},r}()})(jQuery)}.call(this),function(){"use strict";function n(n){function s(s,h){var rt,ut,p=s==window,l=h&&h.message!==undefined?h.message:undefined,g,k,d,tt,nt,w,b,it,ft,et,at;if(h=n.extend({},n.blockUI.defaults,h||{}),!h.ignoreIfBlocked||!n(s).data("blockUI.isBlocked")){if(h.overlayCSS=n.extend({},n.blockUI.defaults.overlayCSS,h.overlayCSS||{}),rt=n.extend({},n.blockUI.defaults.css,h.css||{}),h.onOverlayClick&&(h.overlayCSS.cursor="pointer"),ut=n.extend({},n.blockUI.defaults.themedCSS,h.themedCSS||{}),l=l===undefined?h.message:l,p&&t&&e(window,{fadeOut:0}),l&&typeof l!="string"&&(l.parentNode||l.jquery)&&(g=l.jquery?l[0]:l,k={},n(s).data("blockUI.history",k),k.el=g,k.parent=g.parentNode,k.display=g.style.display,k.position=g.style.position,k.parent&&k.parent.removeChild(g)),n(s).data("blockUI.onUnblock",h.onUnblock),d=h.baseZ,tt=f||h.forceIframe?n('<iframe class="blockUI" style="z-index:'+d+++';display:none;border:none;margin:0;padding:0;position:absolute;width:100%;height:100%;top:0;left:0" src="'+h.iframeSrc+'"><\/iframe>'):n('<div class="blockUI" style="display:none"><\/div>'),nt=h.theme?n('<div class="blockUI blockOverlay ui-widget-overlay" style="z-index:'+d+++';display:none"><\/div>'):n('<div class="blockUI blockOverlay" style="z-index:'+d+++';display:none;border:none;margin:0;padding:0;width:100%;height:100%;top:0;left:0"><\/div>'),h.theme&&p?(b='<div class="blockUI '+h.blockMsgClass+' blockPage ui-dialog ui-widget ui-corner-all" style="z-index:'+(d+10)+';display:none;position:fixed">',h.title&&(b+='<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(h.title||"&nbsp;")+"<\/div>"),b+='<div class="ui-widget-content ui-dialog-content"><\/div>',b+="<\/div>"):h.theme?(b='<div class="blockUI '+h.blockMsgClass+' blockElement ui-dialog ui-widget ui-corner-all" style="z-index:'+(d+10)+';display:none;position:absolute">',h.title&&(b+='<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(h.title||"&nbsp;")+"<\/div>"),b+='<div class="ui-widget-content ui-dialog-content"><\/div>',b+="<\/div>"):b=p?'<div class="blockUI '+h.blockMsgClass+' blockPage" style="z-index:'+(d+10)+';display:none;position:fixed"><\/div>':'<div class="blockUI '+h.blockMsgClass+' blockElement" style="z-index:'+(d+10)+';display:none;position:absolute"><\/div>',w=n(b),l&&(h.theme?(w.css(ut),w.addClass("ui-widget-content")):w.css(rt)),h.theme||nt.css(h.overlayCSS),nt.css("position",p?"fixed":"absolute"),(f||h.forceIframe)&&tt.css("opacity",0),it=[tt,nt,w],ft=p?n("body"):n(s),n.each(it,function(){this.appendTo(ft)}),h.theme&&h.draggable&&n.fn.draggable&&w.draggable({handle:".ui-dialog-titlebar",cancel:"li"}),et=v&&(!n.support.boxModel||n("object,embed",p?null:s).length>0),o||et){if(p&&h.allowBodyStretch&&n.support.boxModel&&n("html,body").css("height","100%"),(o||!n.support.boxModel)&&!p)var ot=r(s,"borderTopWidth"),st=r(s,"borderLeftWidth"),ht=ot?"(0 - "+ot+")":0,ct=st?"(0 - "+st+")":0;n.each(it,function(n,t){var i=t[0].style,r,u;i.position="absolute";n<2?(p?i.setExpression("height","Math.max(document.body.scrollHeight, document.body.offsetHeight) - (jQuery.support.boxModel?0:"+h.quirksmodeOffsetHack+') + "px"'):i.setExpression("height",'this.parentNode.offsetHeight + "px"'),p?i.setExpression("width",'jQuery.support.boxModel && document.documentElement.clientWidth || document.body.clientWidth + "px"'):i.setExpression("width",'this.parentNode.offsetWidth + "px"'),ct&&i.setExpression("left",ct),ht&&i.setExpression("top",ht)):h.centerY?(p&&i.setExpression("top",'(document.documentElement.clientHeight || document.body.clientHeight) / 2 - (this.offsetHeight / 2) + (blah = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"'),i.marginTop=0):!h.centerY&&p&&(r=h.css&&h.css.top?parseInt(h.css.top,10):0,u="((document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "+r+') + "px"',i.setExpression("top",u))})}if(l&&(h.theme?w.find(".ui-widget-content").append(l):w.append(l),(l.jquery||l.nodeType)&&n(l).show()),(f||h.forceIframe)&&h.showOverlay&&tt.show(),h.fadeIn){var lt=h.onBlock?h.onBlock:u,vt=h.showOverlay&&!l?lt:u,yt=l?lt:u;h.showOverlay&&nt._fadeIn(h.fadeIn,vt);l&&w._fadeIn(h.fadeIn,yt)}else h.showOverlay&&nt.show(),l&&w.show(),h.onBlock&&h.onBlock();c(1,s,h);p?(t=w[0],i=n(":input:enabled:visible",t),h.focusInput&&setTimeout(a,20)):y(w[0],h.centerX,h.centerY);h.timeout&&(at=setTimeout(function(){p?n.unblockUI(h):n(s).unblock(h)},h.timeout),n(s).data("blockUI.timeout",at))}}function e(r,u){var o=r==window,e=n(r),s=e.data("blockUI.history"),l=e.data("blockUI.timeout"),f;l&&(clearTimeout(l),e.removeData("blockUI.timeout"));u=n.extend({},n.blockUI.defaults,u||{});c(0,r,u);u.onUnblock===null&&(u.onUnblock=e.data("blockUI.onUnblock"),e.removeData("blockUI.onUnblock"));f=o?n("body").children().filter(".blockUI").add("body > .blockUI"):e.find(">.blockUI");u.cursorReset&&(f.length>1&&(f[1].style.cursor=u.cursorReset),f.length>2&&(f[2].style.cursor=u.cursorReset));o&&(t=i=null);u.fadeOut?(f.fadeOut(u.fadeOut),setTimeout(function(){h(f,s,u,r)},u.fadeOut)):h(f,s,u,r)}function h(t,i,r,u){var e=n(u);if(t.each(function(){this.parentNode&&this.parentNode.removeChild(this)}),i&&i.el&&(i.el.style.display=i.display,i.el.style.position=i.position,i.parent&&i.parent.appendChild(i.el),e.removeData("blockUI.history")),e.data("blockUI.static")&&e.css("position","static"),typeof r.onUnblock=="function")r.onUnblock(u,r);var f=n(document.body),o=f.width(),s=f[0].style.width;f.width(o-1).width(o);f[0].style.width=s}function c(i,r,u){var e=r==window,o=n(r),f;(i||(!e||t)&&(e||o.data("blockUI.isBlocked")))&&(o.data("blockUI.isBlocked",i),u.bindEvents&&(!i||u.showOverlay))&&(f="mousedown mouseup keydown keypress keyup touchstart touchend touchmove",i?n(document).bind(f,u,l):n(document).unbind(f,l))}function l(r){var u,f;if(r.keyCode&&r.keyCode==9&&t&&r.data.constrainTabKey){var e=i,s=!r.shiftKey&&r.target===e[e.length-1],o=r.shiftKey&&r.target===e[0];if(s||o)return setTimeout(function(){a(o)},10),!1}return(u=r.data,f=n(r.target),f.hasClass("blockOverlay")&&u.onOverlayClick&&u.onOverlayClick(),f.parents("div."+u.blockMsgClass).length>0)?!0:f.parents().children().filter("div.blockUI").length===0}function a(n){if(i){var t=i[n===!0?i.length-1:0];t&&t.focus()}}function y(n,t,i){var u=n.parentNode,f=n.style,e=(u.offsetWidth-n.offsetWidth)/2-r(u,"borderLeftWidth"),o=(u.offsetHeight-n.offsetHeight)/2-r(u,"borderTopWidth");t&&(f.left=e>0?e+"px":"0");i&&(f.top=o>0?o+"px":"0")}function r(t,i){return parseInt(n.css(t,i),10)||0}var t,i;n.fn._fadeIn=n.fn.fadeIn;var u=n.noop||function(){},f=/MSIE/.test(navigator.userAgent),o=/MSIE 6.0/.test(navigator.userAgent)&&!/MSIE 8.0/.test(navigator.userAgent),p=document.documentMode||0,v=n.isFunction(document.createElement("div").style.setExpression);n.blockUI=function(n){s(window,n)};n.unblockUI=function(n){e(window,n)};n.growlUI=function(t,i,r,u){var f=n('<div class="growlUI"><\/div>');t&&f.append("<h1>"+t+"<\/h1>");i&&f.append("<h2>"+i+"<\/h2>");r===undefined&&(r=3e3);n.blockUI({message:f,fadeIn:700,fadeOut:1e3,centerY:!1,timeout:r,showOverlay:!1,onUnblock:u,css:n.blockUI.defaults.growlCSS})};n.fn.block=function(t){var i=n.extend({},n.blockUI.defaults,t||{});return this.each(function(){var t=n(this);i.ignoreIfBlocked&&t.data("blockUI.isBlocked")||t.unblock({fadeOut:0})}),this.each(function(){n.css(this,"position")=="static"&&(this.style.position="relative",n(this).data("blockUI.static",!0));this.style.zoom=1;s(this,t)})};n.fn.unblock=function(n){return this.each(function(){e(this,n)})};n.blockUI.version=2.56;n.blockUI.defaults={message:"<h1>Please wait...<\/h1>",title:null,draggable:!0,theme:!1,css:{padding:0,margin:0,width:"30%",top:"40%",left:"35%",textAlign:"center",color:"#000",border:"3px solid #aaa",backgroundColor:"#fff",cursor:"wait"},themedCSS:{width:"30%",top:"40%",left:"35%"},overlayCSS:{backgroundColor:"#000",opacity:.6,cursor:"wait"},cursorReset:"default",growlCSS:{width:"350px",top:"10px",left:"",right:"10px",border:"none",padding:"5px",opacity:.6,cursor:"default",color:"#fff",backgroundColor:"#000","-webkit-border-radius":"10px","-moz-border-radius":"10px","border-radius":"10px"},iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank",forceIframe:!1,baseZ:1e3,centerX:!0,centerY:!0,allowBodyStretch:!0,bindEvents:!0,constrainTabKey:!0,fadeIn:200,fadeOut:400,timeout:0,showOverlay:!0,focusInput:!0,onBlock:null,onUnblock:null,onOverlayClick:null,quirksmodeOffsetHack:4,blockMsgClass:"blockMsg",ignoreIfBlocked:!1};t=null;i=[]}typeof define=="function"&&define.amd&&define.amd.jQuery?define(["jquery"],n):n(jQuery)}(),function(n){function t(t){this._element=n(t);this._target=this._element.data("target")||{};this._attachmentSettings=this._element.data("attachmentsettings");this._serviceUrlGet=this._element.attr("data-url-get");this._serviceUrlAdd=this._element.attr("data-url-add");this._serviceUrlEdit=this._element.attr("data-url-edit");this._serviceUrlDelete=this._element.attr("data-url-delete");this._addEnabled=this._element.data("add-enabled");this._editEnabled=this._element.data("edit-enabled");this._deleteEnabled=this._element.data("delete-enabled");this._pageSize=this._element.attr("data-pagesize");this._orders=this._element.data("orders");this._addSuccess=!1;this._editSuccess=!1;this._deleteSuccess=!1;var i=this;n(t).on("refresh",function(n,t){i.load(t)})}function i(t,i){if(typeof t!=typeof undefined&&t!==!1&&t!=null){console.log(t);var u=i.find(".modal-body"),r=i.find(".alert-danger.error");r.length==0?r=n("<div><\/div>").addClass("alert alert-block alert-danger error clearfix"):r.empty();typeof t.InnerError!=typeof undefined&&typeof t.InnerError.Message!=typeof undefined&&t.InnerError.Message!==!1&&t.InnerError.Message!=null?typeof t.InnerError.Message=="number"?r.append("<p><span class='fa fa-exclamation-triangle' aria-hidden='true'><\/span> "+t.InnerError.Message+" Error<\/p>"):r.append("<p><span class='fa fa-exclamation-triangle' aria-hidden='true'><\/span> "+t.InnerError.Message+"<\/p>"):typeof t.Message!=typeof undefined&&t.Message!==!1&&t.Message!=null&&(typeof t.Message=="number"?r.append("<p><span class='fa fa-exclamation-triangle' aria-hidden='true'><\/span> "+t.Message+" Error<\/p>"):r.append("<p><span class='fa fa-exclamation-triangle' aria-hidden='true'><\/span> "+t.Message+"<\/p>"));u.prepend(r)}}n(document).ready(function(){n(".entity-notes").each(function(){new t(n(this)).render()})});t.prototype.render=function(){var t=this,i=t._element,r=i.children(".note-actions").find("a.addnote"),n=i.children(".modal-addnote").appendTo("body"),u=n.find(".modal-footer .btn-primary");if(t.load(),t._addEnabled){r.on("click",function(){n.modal("show")});u.on("click",function(){t.addNote(n)});n.on("hidden.bs.modal",function(){n.find("textarea").val("");n.find("input[type='file']").val("");n.find(".alert-danger.error").remove()})}};t.prototype.load=function(t){var i=this,r=i._element,u=r.children(".notes"),o=r.children(".notes-error"),s=r.children(".notes-empty"),h=r.children(".notes-access-denied"),c=r.children(".notes-loading"),l=r.find(".notes-pagination"),a=i._serviceUrlGet,v=i._target,y=i._orders,p=i._pageSize,f,e;o.hide();s.hide();h.hide();u.hide().empty();c.show();f=l.data("current-page");(f==null||f=="")&&(f=1);t=t||f;e=l.data("pagesize");(e==null||e=="")&&(e=p);i.getData(a,v,y,t,e,function(t){var f,e;if(typeof t==typeof undefined||t===!1||t==null){s.fadeIn();return}if(typeof t.Records!=typeof undefined&&t.Records!==!1&&(t.Records==null||t.Records.length==0)){s.fadeIn();return}if(typeof t.AccessDenied!=typeof undefined&&t.AccessDenied!==!1&&t.AccessDenied){h.fadeIn();return}f=n("#notes-template").html();Handlebars.registerHelper("AttachmentUrlWithTimeStamp",function(){return this.AttachmentUrl+"?t="+(new Date).getTime()});e=Handlebars.compile(f);u.html(e(t));u.find("abbr.timeago").each(function(){var i=n(this).attr("title"),t=window.moment;if(t){var u=dateFormatConverter.convert(r.closest("[data-dateformat]").data("dateformat")||"M/d/yyyy",dateFormatConverter.dotNet,dateFormatConverter.momentJs),f=dateFormatConverter.convert(r.closest("[data-timeformat]").data("timeformat")||"h:mm tt",dateFormatConverter.dotNet,dateFormatConverter.momentJs),e=u+" "+f;n(this).text(t(i).format(e))}});u.find("abbr.timeago").timeago();u.fadeIn();i.initializePagination(t);i._editEnabled&&i._editEnabled!="False"&&i.addEditClickEventHandlers();i._deleteEnabled&&i._deleteEnabled!="False"&&i.addDeleteClickEventHandlers()},function(n,t,i){o.find(".details").append(i);o.show()},function(){c.hide()})};t.prototype.getData=function(t,i,r,u,f,e,o,s){var h,c;if(e=n.isFunction(e)?e:function(){},o=n.isFunction(o)?o:function(){},s=n.isFunction(s)?s:function(){},!t||t==""){s.call(this);o.call(this,null,"error","A required service url was not provided.");return}if(!i){s.call(this);o.call(this,null,"error","A required regarding EntityReference parameter was not provided.");return}f=f||-1;h={};h.regarding=i;h.orders=r;h.page=u;h.pageSize=f;c=JSON.stringify(h);n.ajax({type:"POST",dataType:"json",contentType:"application/json",url:t,data:c,global:!1}).done(e).fail(o).always(s)};t.prototype.addEditClickEventHandlers=function(){var u=this,f=u._element,t=f.children(".modal-editnote").appendTo("body"),i,r;if(t.length!=0){if(i=t.find("input[type='file']"),r=t.find("button.primary"),i.length>0)i.on("change",function(){t.find(".attachment").remove()});r.unbind("click");r.on("click",function(n){n.preventDefault();u.updateNote(t)});t.on("hidden.bs.modal",function(){t.find(".alert-danger.error").remove();t.find("textarea").val("");t.find("input[type='file']").val("");t.find(".alert-danger.error").remove();t.data("id","")});f.find(".edit-link").on("click",function(r){var h,f,o,c;r.preventDefault();var u=n(this).closest(".note"),s=u.data("id"),a=u.data("unformattedtext")||"",v=u.data("subject")||"",y=u.data("isprivate"),p=u.data("hasattachment"),w=u.data("attachmentfilename"),b=u.data("attachmentfilesize"),e=u.data("attachmenturl"),k=u.data("attachmentisimage");if(!s||s==""){console.log("Failed to launch edit note dialog. Data parameter 'id' is null.");return}if(t.data("id",s),t.data("subject",v),t.find("textarea").val(a),y&&t.find("input[type='checkbox']").prop("checked",!0),h=i.parent(),p)if(e+="?t="+(new Date).getTime(),f=t.find(".attachment"),f.length==0&&(f=n("<div class='attachment clearfix'><\/div>")),o=n("<div class='link'><\/div>"),c=n("<a target='_blank'><\/a>").attr("href",e).html("<span class='fa fa-file' aria-hidden='true'><\/span> "+w+" ("+b+")"),o.html(c),k){var d=n("<a target='_blank' class='thumbnail'><\/a>").attr("href",e),g=n("<img />").attr("src",e),l=n("<div class='img col-md-4'><\/div>");l.append(d.html(g));f.html(l).append(o);h.prepend(f)}else f.html(o),h.prepend(f);t.modal()})}};t.prototype.addDeleteClickEventHandlers=function(){var r=this,u=r._element,f=r._serviceUrlDelete,t=u.children(".modal-deletenote").appendTo("body");if(t.length!=0){t.on("hidden.bs.modal",function(){t.find(".alert-danger.error").remove()});u.find(".delete-link").on("click",function(e){var h,o,s;if(e.preventDefault(),h=n(this).closest(".note"),o=h.data("id"),!o||o==""){console.log("Failed to launch delete note dialog. Data parameter 'id' is null.");return}s=t.find(".modal-footer button.primary");s.unbind("click");s.on("click",function(){var e,h;n(this).attr("disabled","disabled").prepend("<span class='fa fa-spinner fa-spin' aria-hidden='true'><\/span>");e={};e.id=o;h=JSON.stringify(e);n.ajax({type:"POST",contentType:"application/json",url:f,data:h}).done(function(){r._deleteSuccess=!0;u.trigger("refresh");t.modal("hide")}).fail(function(r){var u=r.getResponseHeader("content-type"),f=u.indexOf("json")>-1?n.parseJSON(r.responseText):{Message:r.status,InnerError:{Message:r.statusText}};i(f,t)}).always(function(){s.removeAttr("disabled","disabled").find(".fa-spin").remove()})});t.modal()})}};t.prototype.addNote=function(t){var u=this,y=u._element,h=u._target,e=u._serviceUrlAdd,c=t.find(".modal-footer button.primary"),o=t.find("textarea").val(),l=!1,a=null,v,s,f,r;if(e==null||e==""){v={Message:"System Error",InnerError:{Message:"The URL to the service for this Add Note Request could not be determined."}};i(v,t);return}o==null||o.length<=0||(s=t.find("input[type='checkbox']"),s.length>0&&(l=s.prop("checked")),f=t.find("input[type='file']"),c.attr("disabled","disabled").prepend("<span class='fa fa-spinner fa-spin' aria-hidden='true'><\/span>"),window.FormData!==undefined?(f.length>0&&typeof f[0].files!=typeof undefined&&f[0].files.length>0&&(a=f[0].files[0]),r=new FormData,r.append("regardingEntityLogicalName",h.LogicalName),r.append("regardingEntityId",h.Id),r.append("text",o),r.append("isPrivate",l),r.append("file",a),r.append("attachmentSettings",JSON.stringify(u._attachmentSettings)),n.ajax({url:e,type:"POST",data:r,mimeType:"multipart/form-data",contentType:!1,cache:!1,processData:!1}).done(function(){u._addSuccess=!0;y.trigger("refresh");t.modal("hide")}).fail(function(r){var u=r.getResponseHeader("content-type"),f=u.indexOf("json")>-1?n.parseJSON(r.responseText):{Message:r.status,InnerError:{Message:r.statusText}};i(f,t)}).always(function(){c.removeAttr("disabled","disabled").find(".fa-spin").remove()})):i({Message:"Your browser does not support FormData."},t))};t.prototype.updateNote=function(t){var f=this,p=f._element,o=f._serviceUrlEdit,c=t.find(".modal-footer button.primary"),s=t.find("textarea").val(),w=t.data("subject")||"",l=!1,a=null,v,h,u,e,y,r;if(o==null||o==""){v={Message:"System Error",InnerError:{Message:"The URL to the service for this Update Note Request could not be determined."}};i(v,t);return}if(s!=null&&!(s.length<=0))if(h=t.find("input[type='checkbox']"),h.length>0&&(l=h.prop("checked")),u=t.find("input[type='file']"),c.attr("disabled","disabled").prepend("<span class='fa fa-spinner fa-spin' aria-hidden='true'><\/span>"),window.FormData!==undefined){if(u.length>0&&typeof u[0].files!=typeof undefined&&u[0].files.length>0&&(a=u[0].files[0]),e=t.data("id"),!e||e==""){y={Message:"System Error",InnerError:{Message:"Failed to determine record ID."}};i(y,t);return}r=new FormData;r.append("id",e);r.append("text",s);r.append("subject",w);r.append("isPrivate",l);r.append("file",a);r.append("attachmentSettings",JSON.stringify(f._attachmentSettings));n.ajax({url:o,type:"POST",data:r,mimeType:"multipart/form-data",contentType:!1,cache:!1,processData:!1}).done(function(){f._editSuccess=!0;p.trigger("refresh");t.modal("hide")}).fail(function(r){var u=r.getResponseHeader("content-type"),f=u.indexOf("json")>-1?n.parseJSON(r.responseText):{Message:r.status,InnerError:{Message:r.statusText}};i(f,t)}).always(function(){c.removeAttr("disabled","disabled").find(".fa-spin").remove()})}else i({Message:"Your browser does not support FormData."},t)};t.prototype.initializePagination=function(t){if(typeof t!=typeof undefined&&t!==!1&&t!=null&&typeof t.PageSize!=typeof undefined&&t.PageSize!==!1&&t.PageSize!=null&&typeof t.PageCount!=typeof undefined&&t.PageCount!==!1&&t.PageCount!=null&&typeof t.PageNumber!=typeof undefined&&t.PageNumber!==!1&&t.PageNumber!=null&&typeof t.ItemCount!=typeof undefined&&t.ItemCount!==!1&&t.ItemCount!=null){var r=this,u=r._element,i=u.find(".notes-pagination");if(t.PageCount<=1){i.hide();return}i.data("pagesize",t.PageSize).data("pages",t.PageCount).data("current-page",t.PageNumber).data("count",t.ItemCount).unbind("click").pagination({total_pages:i.data("pages"),current_page:i.data("current-page"),callback:function(t,i){t.preventDefault();var u=n(t.target).closest("li");u.not(".disabled").length>0&&u.not(".active").length>0&&r.load(i)}}).show()}}}(jQuery),function(n){function u(t){var r,i,f,u;(this._element=n(t),this._layout=null,r=this._element,i=r.closest(".entity-form"),i.length<1&&(f=r.closest(".crmEntityFormView"),i=f.find(".entity-form")),i.length!=0)&&(u=i.find("[id$='_EntityLayoutConfig']"),u.length!=0)&&(this._layout=u.data("form-layout"))}function t(t){n.cookie("adx-notification",t,{expires:1})}function i(t,i){var e,r,f,u,o;typeof t!=typeof undefined&&t!==!1&&t!=null&&(console.log(t),e=typeof t.InnerError!=typeof undefined&&t.InnerError!==!1&&t.InnerError!=null?t.InnerError.Message:t.Message,r=n(".notifications"),r.length==0&&(f=n(".page-heading"),r=f.length==0?n("<div class='notifications'><\/div>").prependTo(n("#content-container")):n("<div class='notifications'><\/div>").appendTo(f)),r.find(".notification").slideUp().remove(),u=i.find(".navbar-collapse").find(".action-status"),u.length==0&&(u=i.parent().find(".navbar-collapse").find(".action-status")),u.html("<span class='fa fa-fw fa-exclamation-circle text-danger' aria-hidden='true'><\/span>"),o=n("<div class='notification alert alert-danger error alert-dismissible' role='alert'><button type='button' class='close' data-dismiss='alert' aria-label='Close'><span aria-hidden='true'>&times;<\/span><\/button><span class='fa fa-exclamation-triangle' aria-hidden='true'><\/span> "+e+"<\/div>").on("closed.bs.alert",function(){u.html("<span class='fa fa-fw' aria-hidden='true'><\/span>");r.find(".notification").length==0&&r.hide()}).prependTo(r),r.show(),n("html, body").animate({scrollTop:o.offset().top-20},200))}function r(n,t){var i;if(typeof n==typeof undefined||n==null){f(t);return}var r=typeof n.OnComplete!=typeof undefined&&n.OnComplete!=null&&n.OnComplete!=0;r?(i=o(n),i!=null&&i!=""?e(i):f(t)):f(t)}function e(t){typeof t!="undefined"&&t!=null&&t!=""&&(n.blockUI({css:{border:"none",backgroundColor:"transparent",opacity:.5,color:"#fff"},message:"<span class='fa fa-2x fa-spinner fa-pulse' aria-hidden='true'><\/span>"}),parent?parent.location.replace(t):window.location.replace(t))}function f(t){n.blockUI({css:{border:"none",backgroundColor:"transparent",opacity:.5,color:"#fff"},message:"<span class='fa fa-2x fa-spinner fa-pulse' aria-hidden='true'><\/span>"});t&&parent?parent.location.reload():window.location.reload()}function o(n){return!n||!n.RedirectUrl?null:n.RedirectUrl.Host==window.location.hostname?URI(n.RedirectUrl.PathWithQueryString):URI(n.RedirectUrl.Uri)}n(document).ready(function(){n(".form-custom-actions").each(function(){new u(n(this)).render()});n(".form-custom-actions .dropdown-toggle").each(function(){var t=n(this).parent().find(".dropdown-menu"),i=t.find("a:not(.hidden)").length;i<1&&n(this).parent().hide()})});u.prototype.render=function(){var n=this,i=n._element,t=n._layout;(typeof t==typeof undefined||t==null||t=="")&&i.hide();var e=n.addDeleteActionLinkClickEventHandlers(),o=n.addWorkflowActionLinkClickEventHandlers(),s=n.addQualifyLeadActionLinkClickEventHandlers(),h=n.addCloseCaseActionLinkClickEventHandlers(),c=n.addResolveCaseActionLinkClickEventHandlers(),l=n.addReopenCaseActionLinkClickEventHandlers(),a=n.addCancelCaseActionLinkClickEventHandlers(),v=n.addConvertQuoteActionLinkClickEventHandlers(),y=n.addConvertOrderActionLinkClickEventHandlers(),p=n.addCalculateOpportunityActionLinkClickEventHandlers(),w=n.addActivateActionLinkClickEventHandlers(),b=n.addDeactivateActionLinkClickEventHandlers(),k=n.addActivateQuoteActionLinkClickEventHandlers(),d=n.addSetOpportunityOnHoldActionLinkClickEventHandlers(),g=n.addReopenOpportunityActionLinkClickEventHandlers(),nt=n.addWinOpportunityActionLinkClickEventHandlers(),tt=n.addLoseOpportunityActionLinkClickEventHandlers(),it=n.addGenerateQuoteFromOpportunityActionLinkClickEventHandlers(),rt=n.addUpdatePipelinePhaseActionLinkClickEventHandlers(),r=n.addSubmitActionLinkClickEventHandlers(),u=n.addNextActionLinkClickEventHandlers(),f=n.addPreviousActionLinkClickEventHandlers();(e||o||s||h||c||l||a||v||y||p||w||b||k||d||nt||tt||it||rt||g||r||u||f)&&t!=null&&(t.EnableActions||r||u||f)?i.show():i.hide()};u.prototype.addDeleteActionLinkClickEventHandlers=function(){var c=this,f=c._element,u=c._layout,h,l,a,s;if(u==null||u==""||u.DeleteActionLink==null||!u.DeleteActionLink.Enabled||!u.DeleteActionLink.URL)return h=f.find(".delete-link"),h.hide(),h.addClass("hidden"),!1;var v=u.DeleteActionLink.URL.PathWithQueryString,o=f.children(".modal-delete"),e=f.closest(".entity-form");e.length<1&&(l=f.closest(".crmEntityFormView"),e=l.find(".entity-form"));a=e.find("[id$='_EntityID']").val();s=o.find("button.primary");s.off("click");s.on("click",function(f){var h,c;f.preventDefault();n(this).attr("disabled","disabled").prepend("<span class='fa fa-spinner fa-spin' aria-hidden='true'><\/span>");e.find(".navbar-collapse").find(".action-status").html("<span class='fa fa-spinner fa-spin fa-fw' aria-hidden='true'><\/span>");h={};h.LogicalName=u.EntityName;h.Id=a;c=JSON.stringify(h);n.ajax({type:"POST",contentType:"application/json",url:v,data:c}).done(function(){o.modal("hide");t(u.DeleteActionLink.SuccessMessage);r(u.DeleteActionLink,!0)}).fail(function(t){var r=t.getResponseHeader("content-type"),u=r.indexOf("json")>-1?n.parseJSON(t.responseText):{Message:t.status,InnerError:{Message:t.statusText}};o.modal("hide");i(u,e)}).always(function(){s.removeAttr("disabled","disabled").find(".fa-spin").remove()})});f.find(".delete-link").on("click",function(n){n.preventDefault();o.modal()});return!0};u.prototype.addSubmitActionLinkClickEventHandlers=function(){var i=this,r=i._element,n=i._layout,t;return n==null||n==""||n.SubmitActionLink==null||!n.SubmitActionLink.Enabled?(t=r.find(".submit-btn"),t.addClass("hidden"),t.hide(),!1):!0};u.prototype.addNextActionLinkClickEventHandlers=function(){var i=this,r=i._element,n=i._layout,t;return n==null||n==""||n.NextActionLink==null||!n.NextActionLink.Enabled?(t=r.find(".next-btn"),t.addClass("hidden"),t.hide(),!1):!0};u.prototype.addPreviousActionLinkClickEventHandlers=function(){var i=this,r=i._element,n=i._layout,t;return n==null||n==""||n.PreviousActionLink==null||!n.PreviousActionLink.Enabled?(t=r.find(".previous-btn"),t.addClass("hidden"),t.hide(),!1):!0};u.prototype.addWorkflowActionLinkClickEventHandlers=function(){var a=this,e=a._element,u=a._layout,s=e.closest(".entity-form"),v,f,h,l,o,c;if(s.length<1&&(v=e.closest(".crmEntityFormView"),s=v.find(".entity-form")),f=[],u!=null&&u!=""&&u.TopFormActionLinks&&u.TopFormActionLinks.length>0&&u.BottomFormActionLinks&&u.BottomFormActionLinks.length>0)f=_.union(u.TopFormActionLinks,u.BottomFormActionLinks);else if(u!=null&&u!=""&&u.TopFormActionLinks&&u.TopFormActionLinks.length>0)f=u.TopFormActionLinks;else if(u!=null&&u!="")f=u.BottomFormActionLinks;else return!1;if(f.length==0)return e.find(".workflow-link").hide(),!1;for(h=null,l=0;l<f.length;l++)if(o=f[l],o!=null&&typeof o.Type!=typeof undefined&&o.Type==7&&typeof o.Workflow!=typeof undefined&&o.Workflow!=null){h=o;break}if(u==null||u==""||h==null||!h.Enabled||!h.URL)return e.find(".workflow-link").hide(),e.find(".workflow-link").addClass("hidden"),!1;if(h.ShowModal==1){c=e.children(".modal-run-workflow");e.find(".workflow-link").on("click",function(e){e.preventDefault();var a=s.find("[id$='_EntityID']").val(),o=c.find("button.primary"),l=n(this).data("url"),h=n(this).data("workflowid");if(h&&l){o.off("click");o.on("click",function(e){var y,p,v,w,b,k,d;for(e.preventDefault(),n(this).attr("disabled","disabled").prepend("<span class='fa fa-spinner fa-spin' aria-hidden='true'><\/span>"),y=null,p=0;p<f.length;p++)if(v=f[p],v!=null&&typeof v.Type!=typeof undefined&&v.Type==7&&typeof v.Workflow!=typeof undefined&&v.Workflow!=null&&v.Workflow.Id==h){y=v;break}w={};b={};b.LogicalName="workflow";b.Id=h;w.workflow=b;k={};k.LogicalName=u.EntityName;k.Id=a;w.entity=k;d=JSON.stringify(w);n.ajax({type:"POST",contentType:"application/json",url:l,data:d}).done(function(){c.modal("hide");t(y!=null?y.SuccessMessage:null);r(y)}).fail(function(t){var r=t.getResponseHeader("content-type"),u=r.indexOf("json")>-1?n.parseJSON(t.responseText):{Message:t.status,InnerError:{Message:t.statusText}};c.modal("hide");i(u,s)}).always(function(){o.removeAttr("disabled","disabled").find(".fa-spin").remove()})});c.modal()}})}else e.find(".workflow-link").on("click",function(e){var h,c,o,l,a,v,w;e.preventDefault();var b=s.find("[id$='_EntityID']").val(),y=n(this).data("workflowid"),p=n(this).data("url");if(y&&p){for(h=null,c=0;c<f.length;c++)if(o=f[c],o!=null&&typeof o.Type!=typeof undefined&&o.Type==7&&typeof o.Workflow!=typeof undefined&&o.Workflow!=null&&o.Workflow.Id==y){h=o;break}l={};a={};a.LogicalName="workflow";a.Id=y;l.workflow=a;v={};v.LogicalName=u.EntityName;v.Id=b;l.entity=v;w=JSON.stringify(l);n.ajax({type:"POST",contentType:"application/json",url:p,data:w}).done(function(){t(h!=null?h.SuccessMessage:null);r(h,!0)}).fail(function(t){var r=t.getResponseHeader("content-type"),u=r.indexOf("json")>-1?n.parseJSON(t.responseText):{Message:t.status,InnerError:{Message:t.statusText}};i(u,s)})}});return!0};u.prototype.addQualifyLeadActionLinkClickEventHandlers=function(){var h=this,e=h._element,u=h._layout,f=e.closest(".entity-form"),c,l,s,o;if(f.length<1&&(c=e.closest(".crmEntityFormView"),f=c.find(".entity-form")),l=f.find("[id$='_EntityState']").val(),u==null||u==""||u.QualifyLeadActionLink==null||!u.QualifyLeadActionLink.Enabled||!u.QualifyLeadActionLink.URL||l!="0")return s=e.find(".qualify-lead-link"),s.addClass("hidden"),s.hide(),!1;if(u.QualifyLeadActionLink.ShowModal==1){o=e.children(".modal-qualify");e.find(".qualify-lead-link").on("click",function(e){e.preventDefault();var h=f.find("[id$='_EntityID']").val(),s=o.find("button.primary"),c=n(this).data("url");s.off("click");s.on("click",function(e){var l,a,v;e.preventDefault();n(this).attr("disabled","disabled").prepend("<span class='fa fa-spinner fa-spin' aria-hidden='true'><\/span>");l={};l.createAccount=!0;l.createContact=!0;l.createOpportunity=!0;a={};a.LogicalName=u.EntityName;a.Id=h;l.entityReference=a;v=JSON.stringify(l);n.ajax({type:"POST",contentType:"application/json",url:c,data:v}).done(function(){o.modal("hide");t(u.QualifyLeadActionLink.SuccessMessage);r(u.QualifyLeadActionLink)}).fail(function(t){var r=t.getResponseHeader("content-type"),u=r.indexOf("json")>-1?n.parseJSON(t.responseText):{Message:t.status,InnerError:{Message:t.statusText}};o.modal("hide");i(u,f)}).always(function(){s.removeAttr("disabled","disabled").find(".fa-spin").remove()})});o.modal()})}else e.find(".qualify-lead-link").on("click",function(e){var s,h;e.preventDefault();var c=f.find("[id$='_EntityID']").val(),l=n(this).data("url"),o={};o.createAccount=!0;o.createContact=!0;o.createOpportunity=!0;s={};s.LogicalName=u.EntityName;s.Id=c;o.entityReference=s;h=JSON.stringify(o);n.ajax({type:"POST",contentType:"application/json",url:l,data:h}).done(function(){t(u.QualifyLeadActionLink.SuccessMessage);r(u.QualifyLeadActionLink)}).fail(function(t){var r=t.getResponseHeader("content-type"),u=r.indexOf("json")>-1?n.parseJSON(t.responseText):{Message:t.status,InnerError:{Message:t.statusText}};i(u,f)})});return!0};u.prototype.addCloseCaseActionLinkClickEventHandlers=function(){var h=this,e=h._element,u=h._layout,f=e.closest(".entity-form"),c,l,s,o;if(f.length<1&&(c=e.closest(".crmEntityFormView"),f=c.find(".entity-form")),l=f.find("[id$='_EntityState']").val(),u==null||u==""||u.CloseIncidentActionLink==null||!u.CloseIncidentActionLink.Enabled||!u.CloseIncidentActionLink.URL||l!="0")return s=e.find(".close-case-link"),s.addClass("hidden"),s.hide(),!1;if(u.CloseIncidentActionLink.ShowModal==1){o=e.children(".modal-closecase");e.find(".close-case-link").on("click",function(e){e.preventDefault();var h=f.find("[id$='_EntityID']").val(),s=o.find("button.primary"),c=n(this).data("url");s.off("click");s.on("click",function(e){var l,a,v,y,p;e.preventDefault();n(this).attr("disabled","disabled").prepend("<span class='fa fa-spinner fa-spin' aria-hidden='true'><\/span>");l={};a={};a.LogicalName=u.EntityName;a.Id=h;l.entityReference=a;v=u.CloseIncidentActionLink.DefaultResolution;y=u.CloseIncidentActionLink.DefaultResolutionDescription;l.resolutionSubject=v;l.resolutionDescription=y;p=JSON.stringify(l);n.ajax({type:"POST",contentType:"application/json",url:c,data:p}).done(function(){o.modal("hide");t(u.CloseIncidentActionLink.SuccessMessage);r(u.CloseIncidentActionLink)}).fail(function(t){var r=t.getResponseHeader("content-type"),u=r.indexOf("json")>-1?n.parseJSON(t.responseText):{Message:t.status,InnerError:{Message:t.statusText}};o.modal("hide");i(u,f)}).always(function(){s.removeAttr("disabled","disabled").find(".fa-spin").remove()})});o.modal()})}else e.find(".close-case-link").on("click",function(e){var h,c,l;e.preventDefault();var a=f.find("[id$='_EntityID']").val(),v=n(this).data("url"),o={},s={};s.LogicalName=u.EntityName;s.Id=a;o.entityReference=s;h=u.CloseIncidentActionLink.DefaultResolution;c=u.CloseIncidentActionLink.DefaultResolutionDescription;o.resolutionSubject=h;o.resolutionDescription=c;l=JSON.stringify(o);n.ajax({type:"POST",contentType:"application/json",url:v,data:l}).done(function(){t(u.CloseIncidentActionLink.SuccessMessage);r(u.CloseIncidentActionLink)}).fail(function(t){var r=t.getResponseHeader("content-type"),u=r.indexOf("json")>-1?n.parseJSON(t.responseText):{Message:t.status,InnerError:{Message:t.statusText}};i(u,f)})});return!0};u.prototype.addConvertQuoteActionLinkClickEventHandlers=function(){var h=this,e=h._element,u=h._layout,f=e.closest(".entity-form"),c,l,s,o;if(f.length<1&&(c=e.closest(".crmEntityFormView"),f=c.find(".entity-form")),l=f.find("[id$='_EntityState']").val(),u==null||u==""||u.ConvertQuoteToOrderActionLink==null||!u.ConvertQuoteToOrderActionLink.Enabled||!u.ConvertQuoteToOrderActionLink.URL||l!="1")return s=e.find(".convert-quote-link"),s.addClass("hidden"),s.hide(),!1;if(u.ConvertQuoteToOrderActionLink.ShowModal==1){o=e.children(".modal-convert-quote");e.find(".convert-quote-link").on("click",function(e){e.preventDefault();var h=f.find("[id$='_EntityID']").val(),s=o.find("button.primary"),c=n(this).data("url");s.off("click");s.on("click",function(e){var a,l,v;e.preventDefault();n(this).attr("disabled","disabled").prepend("<span class='fa fa-spinner fa-spin' aria-hidden='true'><\/span>");a={};l={};l.LogicalName=u.EntityName;l.Id=h;a.entityReference=l;v=JSON.stringify(a);n.ajax({type:"POST",contentType:"application/json",url:c,data:v}).done(function(){o.modal("hide");t(u.ConvertQuoteToOrderActionLink.SuccessMessage);r(u.ConvertQuoteToOrderActionLink)}).fail(function(t){var r=t.getResponseHeader("content-type"),u=r.indexOf("json")>-1?n.parseJSON(t.responseText):{Message:t.status,InnerError:{Message:t.statusText}};o.modal("hide");i(u,f)}).always(function(){s.removeAttr("disabled","disabled").find(".fa-spin").remove()})});o.modal()})}else e.find(".convert-quote-link").on("click",function(e){var o,c;e.preventDefault();o=n(this);o.attr("disabled","disabled");o.closest("li.action").children(".dropdown-toggle").css("cursor","not-allowed").dropdown("toggle").removeAttr("data-toggle").off("click");o.closest(".navbar-collapse").find(".action-status").html("<span class='fa fa-spinner fa-spin fa-fw' aria-hidden='true'><\/span>");var l=f.find("[id$='_EntityID']").val(),a=n(this).data("url"),h={},s={};s.LogicalName=u.EntityName;s.Id=l;h.entityReference=s;c=JSON.stringify(h);n.ajax({type:"POST",contentType:"application/json",url:a,data:c}).done(function(){t(u.ConvertQuoteToOrderActionLink.SuccessMessage);r(u.ConvertQuoteToOrderActionLink)}).fail(function(t){var r=t.getResponseHeader("content-type"),u=r.indexOf("json")>-1?n.parseJSON(t.responseText):{Message:t.status,InnerError:{Message:t.statusText}};i(u,f)}).always(function(){o.removeAttr("disabled");o.closest("li.action").children(".dropdown-toggle").css("cursor","").attr("data-toggle","dropdown").data("toggle","dropdown").on("click",function(){n(this).dropdown()})})});return!0};u.prototype.addConvertOrderActionLinkClickEventHandlers=function(){var h=this,e=h._element,u=h._layout,f=e.closest(".entity-form"),c,l,s,o;if(f.length<1&&(c=e.closest(".crmEntityFormView"),f=c.find(".entity-form")),l=f.find("[id$='_EntityState']").val(),u==null||u==""||u.ConvertOrderToInvoiceActionLink==null||!u.ConvertOrderToInvoiceActionLink.Enabled||!u.ConvertOrderToInvoiceActionLink.URL||l=="2")return s=e.find(".convert-order-link"),s.addClass("hidden"),s.hide(),!1;if(u.ConvertOrderToInvoiceActionLink.ShowModal==1){o=e.children(".modal-convert-order");e.find(".convert-order-link").on("click",function(e){e.preventDefault();var h=f.find("[id$='_EntityID']").val(),s=o.find("button.primary"),c=n(this).data("url");s.off("click");s.on("click",function(e){var a,l,v;e.preventDefault();n(this).attr("disabled","disabled").prepend("<span class='fa fa-spinner fa-spin' aria-hidden='true'><\/span>");a={};l={};l.LogicalName=u.EntityName;l.Id=h;a.entityReference=l;v=JSON.stringify(a);n.ajax({type:"POST",contentType:"application/json",url:c,data:v}).done(function(){o.modal("hide");t(u.ConvertOrderToInvoiceActionLink.SuccessMessage);r(u.ConvertOrderToInvoiceActionLink)}).fail(function(t){var r=t.getResponseHeader("content-type"),u=r.indexOf("json")>-1?n.parseJSON(t.responseText):{Message:t.status,InnerError:{Message:t.statusText}};o.modal("hide");i(u,f)}).always(function(){s.removeAttr("disabled","disabled").find(".fa-spin").remove()})});o.modal()})}else e.find(".convert-order-link").on("click",function(e){var h;e.preventDefault();var c=f.find("[id$='_EntityID']").val(),l=n(this).data("url"),s={},o={};o.LogicalName=u.EntityName;o.Id=c;s.entityReference=o;h=JSON.stringify(s);n.ajax({type:"POST",contentType:"application/json",url:l,data:h}).done(function(){t(u.ConvertOrderToInvoiceActionLink.SuccessMessage);r(u.ConvertOrderToInvoiceActionLink)}).fail(function(t){var r=t.getResponseHeader("content-type"),u=r.indexOf("json")>-1?n.parseJSON(t.responseText):{Message:t.status,InnerError:{Message:t.statusText}};i(u,f)})});return!0};u.prototype.addCalculateOpportunityActionLinkClickEventHandlers=function(){var h=this,e=h._element,u=h._layout,s,f,c,o;if(u==null||u==""||u.CalculateOpportunityActionLink==null||!u.CalculateOpportunityActionLink.Enabled||!u.CalculateOpportunityActionLink.URL)return s=e.find(".calculate-opportunity-link"),s.addClass("hidden"),s.hide(),!1;if(f=e.closest(".entity-form"),f.length<2&&(c=e.closest(".crmEntityFormView"),f=c.find(".entity-form")),u.CalculateOpportunityActionLink.ShowModal==1){o=e.children(".modal-calculate");e.find(".calculate-opportunity-link").on("click",function(e){e.preventDefault();var h=f.find("[id$='_EntityID']").val(),s=o.find("button.primary"),c=n(this).data("url");s.off("click");s.on("click",function(e){var a,l,v;e.preventDefault();n(this).attr("disabled","disabled").prepend("<span class='fa fa-spinner fa-spin' aria-hidden='true'><\/span>");a={};l={};l.LogicalName=u.EntityName;l.Id=h;a.entityReference=l;v=JSON.stringify(a);n.ajax({type:"POST",contentType:"application/json",url:c,data:v}).done(function(){o.modal("hide");t(u.CalculateOpportunityActionLink.SuccessMessage);r(u.CalculateOpportunityActionLink)}).fail(function(t){var r=t.getResponseHeader("content-type"),u=r.indexOf("json")>-1?n.parseJSON(t.responseText):{Message:t.status,InnerError:{Message:t.statusText}};o.modal("hide");i(u,f)}).always(function(){s.removeAttr("disabled","disabled").find(".fa-spin").remove()})});o.modal()})}else e.find(".calculate-opportunity-link").on("click",function(e){var h;e.preventDefault();var c=f.find("[id$='_EntityID']").val(),l=n(this).data("url"),s={},o={};o.LogicalName=u.EntityName;o.Id=c;s.entityReference=o;h=JSON.stringify(s);n.ajax({type:"POST",contentType:"application/json",url:l,data:h}).done(function(){t(u.CalculateOpportunityActionLink.SuccessMessage);r(u.CalculateOpportunityActionLink)}).fail(function(t){var r=t.getResponseHeader("content-type"),u=r.indexOf("json")>-1?n.parseJSON(t.responseText):{Message:t.status,InnerError:{Message:t.statusText}};i(u,f)})});return!0};u.prototype.addResolveCaseActionLinkClickEventHandlers=function(){var h=this,e=h._element,f=h._layout,o=e.closest(".entity-form"),c,l,s,u;if(o.length<1&&(c=e.closest(".crmEntityFormView"),o=c.find(".entity-form")),l=o.find("[id$='_EntityState']").val(),f==null||f==""||f.ResolveCaseActionLink==null||!f.ResolveCaseActionLink.Enabled||!f.ResolveCaseActionLink.URL||l!="0")return s=e.find(".resolve-case-link"),s.addClass("hidden"),s.hide(),!1;u=e.children(".modal-resolvecase");u.on("hidden.bs.modal.entityform",function(){u.find(".resolution-input").val("");u.find(".resolution-description-input").val("")});e.find(".resolve-case-link").on("click",function(e){e.preventDefault();var h=o.find("[id$='_EntityID']").val(),s=u.find("button.primary"),c=n(this).data("url");s.off("click");s.on("click",function(e){var l,a,v,y,p;e.preventDefault();n(this).attr("disabled","disabled").prepend("<span class='fa fa-spinner fa-spin' aria-hidden='true'><\/span>");l={};a={};a.LogicalName=f.EntityName;a.Id=h;l.entityReference=a;v=u.find(".resolution-input");l.resolutionSubject=v.val();y=u.find(".resolution-description-input");l.resolutionDescription=y.val();p=JSON.stringify(l);n.ajax({type:"POST",contentType:"application/json",url:c,data:p}).done(function(){u.modal("hide");t(f.ResolveCaseActionLink.SuccessMessage);r(f.ResolveCaseActionLink)}).fail(function(t){var r=t.getResponseHeader("content-type"),f=r.indexOf("json")>-1?n.parseJSON(t.responseText):{Message:t.status,InnerError:{Message:t.statusText}};u.modal("hide");i(f,o)}).always(function(){s.removeAttr("disabled","disabled").find(".fa-spin").remove()})});u.modal()});return!0};u.prototype.addReopenCaseActionLinkClickEventHandlers=function(){var h=this,e=h._element,u=h._layout,f=e.closest(".entity-form"),c,l,s,o;if(f.length<1&&(c=e.closest(".crmEntityFormView"),f=c.find(".entity-form")),l=f.find("[id$='_EntityState']").val(),u==null||u==""||u.ReopenCaseActionLink==null||!u.ReopenCaseActionLink.Enabled||!u.ReopenCaseActionLink.URL||l=="0")return s=e.find(".reopen-case-link"),s.addClass("hidden"),s.hide(),!1;if(u.ReopenCaseActionLink.ShowModal==1){o=e.children(".modal-reopencase");e.find(".reopen-case-link").on("click",function(e){e.preventDefault();var h=f.find("[id$='_EntityID']").val(),s=o.find("button.primary"),c=n(this).data("url");s.off("click");s.on("click",function(e){var a,l,v;e.preventDefault();n(this).attr("disabled","disabled").prepend("<span class='fa fa-spinner fa-spin' aria-hidden='true'><\/span>");a={};l={};l.LogicalName=u.EntityName;l.Id=h;a.entityReference=l;v=JSON.stringify(a);n.ajax({type:"POST",contentType:"application/json",url:c,data:v}).done(function(){o.modal("hide");t(u.ReopenCaseActionLink.SuccessMessage);r(u.ReopenCaseActionLink)}).fail(function(t){var r=t.getResponseHeader("content-type"),u=r.indexOf("json")>-1?n.parseJSON(t.responseText):{Message:t.status,InnerError:{Message:t.statusText}};o.modal("hide");i(u,f)}).always(function(){s.removeAttr("disabled","disabled").find(".fa-spin").remove()})});o.modal()})}else e.find(".reopen-case-link").on("click",function(e){var h;e.preventDefault();var c=f.find("[id$='_EntityID']").val(),l=n(this).data("url"),s={},o={};o.LogicalName=u.EntityName;o.Id=c;s.entityReference=o;h=JSON.stringify(s);n.ajax({type:"POST",contentType:"application/json",url:l,data:h}).done(function(){t(u.ReopenCaseActionLink.SuccessMessage);r(u.ReopenCaseActionLink)}).fail(function(t){var r=t.getResponseHeader("content-type"),u=r.indexOf("json")>-1?n.parseJSON(t.responseText):{Message:t.status,InnerError:{Message:t.statusText}};i(u,f)})});return!0};u.prototype.addCancelCaseActionLinkClickEventHandlers=function(){var h=this,e=h._element,u=h._layout,f=e.closest(".entity-form"),c,l,s,o;if(f.length<1&&(c=e.closest(".crmEntityFormView"),f=c.find(".entity-form")),l=f.find("[id$='_EntityState']").val(),u==null||u==""||u.CancelCaseActionLink==null||!u.CancelCaseActionLink.Enabled||!u.CancelCaseActionLink.URL||l!="0")return s=e.find(".cancel-case-link"),s.addClass("hidden"),s.hide(),!1;if(u.CancelCaseActionLink.ShowModal==1){o=e.children(".modal-cancelcase");e.find(".cancel-case-link").on("click",function(e){e.preventDefault();var h=f.find("[id$='_EntityID']").val(),s=o.find("button.primary"),c=n(this).data("url");s.off("click");s.on("click",function(e){var a,l,v;e.preventDefault();n(this).attr("disabled","disabled").prepend("<span class='fa fa-spinner fa-spin' aria-hidden='true'><\/span>");a={};l={};l.LogicalName=u.EntityName;l.Id=h;a.entityReference=l;v=JSON.stringify(a);n.ajax({type:"POST",contentType:"application/json",url:c,data:v}).done(function(){o.modal("hide");t(u.CancelCaseActionLink.SuccessMessage);r(u.CancelCaseActionLink)}).fail(function(t){var r=t.getResponseHeader("content-type"),u=r.indexOf("json")>-1?n.parseJSON(t.responseText):{Message:t.status,InnerError:{Message:t.statusText}};o.modal("hide");i(u,f)}).always(function(){s.removeAttr("disabled","disabled").find(".fa-spin").remove()})});o.modal()})}else e.find(".cancel-case-link").on("click",function(e){var h;e.preventDefault();var c=f.find("[id$='_EntityID']").val(),l=n(this).data("url"),s={},o={};o.LogicalName=u.EntityName;o.Id=c;s.entityReference=o;h=JSON.stringify(s);n.ajax({type:"POST",contentType:"application/json",url:l,data:h}).done(function(){t(u.CancelCaseActionLink.SuccessMessage);r(u.CancelCaseActionLink)}).fail(function(t){var r=t.getResponseHeader("content-type"),u=r.indexOf("json")>-1?n.parseJSON(t.responseText):{Message:t.status,InnerError:{Message:t.statusText}};i(u,f)})});return!0};u.prototype.addActivateActionLinkClickEventHandlers=function(){var h=this,e=h._element,u=h._layout,f=e.closest(".entity-form"),c,l,s,o;if(f.length<1&&(c=e.closest(".crmEntityFormView"),f=c.find(".entity-form")),l=f.find("[id$='_EntityState']").val(),u==null||u==""||u.ActivateActionLink==null||!u.ActivateActionLink.Enabled||!u.ActivateActionLink.URL||l=="0")return s=e.find(".activate-link"),s.addClass("hidden"),s.hide(),!1;if(u.ActivateActionLink.ShowModal==1){o=e.children(".modal-activate");e.find(".activate-link").on("click",function(e){e.preventDefault();var h=f.find("[id$='_EntityID']").val(),s=o.find("button.primary"),c=n(this).data("url");s.off("click");s.on("click",function(e){var a,l,v;e.preventDefault();n(this).attr("disabled","disabled").prepend("<span class='fa fa-spinner fa-spin' aria-hidden='true'><\/span>");a={};l={};l.LogicalName=u.EntityName;l.Id=h;a.entityReference=l;v=JSON.stringify(a);n.ajax({type:"POST",contentType:"application/json",url:c,data:v}).done(function(){o.modal("hide");t(u.ActivateActionLink.SuccessMessage);r(u.ActivateActionLink)}).fail(function(t){var r=t.getResponseHeader("content-type"),u=r.indexOf("json")>-1?n.parseJSON(t.responseText):{Message:t.status,InnerError:{Message:t.statusText}};o.modal("hide");i(u,f)}).always(function(){s.removeAttr("disabled","disabled").find(".fa-spin").remove()})});o.modal()})}else e.find(".activate-link").on("click",function(e){var h;e.preventDefault();var c=f.find("[id$='_EntityID']").val(),l=n(this).data("url"),s={},o={};o.LogicalName=u.EntityName;o.Id=c;s.entityReference=o;h=JSON.stringify(s);n.ajax({type:"POST",contentType:"application/json",url:l,data:h}).done(function(){t(u.ActivateActionLink.SuccessMessage);r(u.ActivateActionLink)}).fail(function(t){var r=t.getResponseHeader("content-type"),u=r.indexOf("json")>-1?n.parseJSON(t.responseText):{Message:t.status,InnerError:{Message:t.statusText}};i(u,f)})});return!0};u.prototype.addDeactivateActionLinkClickEventHandlers=function(){var h=this,e=h._element,u=h._layout,f=e.closest(".entity-form"),c,l,s,o;if(f.length<1&&(c=e.closest(".crmEntityFormView"),f=c.find(".entity-form")),l=f.find("[id$='_EntityState']").val(),u==null||u==""||u.DeactivateActionLink==null||!u.DeactivateActionLink.Enabled||!u.DeactivateActionLink.URL||l=="1")return s=e.find(".deactivate-link"),s.addClass("hidden"),s.hide(),!1;if(u.DeactivateActionLink.ShowModal==1){o=e.children(".modal-deactivate");e.find(".deactivate-link").on("click",function(e){e.preventDefault();var h=f.find("[id$='_EntityID']").val(),s=o.find("button.primary"),c=n(this).data("url");s.off("click");s.on("click",function(e){var a,l,v;e.preventDefault();n(this).attr("disabled","disabled").prepend("<span class='fa fa-spinner fa-spin' aria-hidden='true'><\/span>");a={};l={};l.LogicalName=u.EntityName;l.Id=h;a.entityReference=l;v=JSON.stringify(a);n.ajax({type:"POST",contentType:"application/json",url:c,data:v}).done(function(){o.modal("hide");t(u.DeactivateActionLink.SuccessMessage);r(u.DeactivateActionLink)}).fail(function(t){var r=t.getResponseHeader("content-type"),u=r.indexOf("json")>-1?n.parseJSON(t.responseText):{Message:t.status,InnerError:{Message:t.statusText}};o.modal("hide");i(u,f)}).always(function(){s.removeAttr("disabled","disabled").find(".fa-spin").remove()})});o.modal()})}else e.find(".deactivate-link").on("click",function(e){var h;e.preventDefault();var c=f.find("[id$='_EntityID']").val(),l=n(this).data("url"),s={},o={};o.LogicalName=u.EntityName;o.Id=c;s.entityReference=o;h=JSON.stringify(s);n.ajax({type:"POST",contentType:"application/json",url:l,data:h}).done(function(){t(u.DeactivateActionLink.SuccessMessage);r(u.DeactivateActionLink)}).fail(function(t){var r=t.getResponseHeader("content-type"),u=r.indexOf("json")>-1?n.parseJSON(t.responseText):{Message:t.status,InnerError:{Message:t.statusText}};i(u,f)})});return!0};u.prototype.addActivateQuoteActionLinkClickEventHandlers=function(){var h=this,e=h._element,u=h._layout,f=e.closest(".entity-form"),c,l,s,o;if(f.length<1&&(c=e.closest(".crmEntityFormView"),f=c.find(".entity-form")),l=f.find("[id$='_EntityState']").val(),u==null||u==""||u.ActivateQuoteActionLink==null||!u.ActivateQuoteActionLink.Enabled||!u.ActivateQuoteActionLink.URL||l!="0")return s=e.find(".activate-quote-link"),s.addClass("hidden"),s.hide(),!1;if(u.ActivateQuoteActionLink.ShowModal==1){o=e.children(".modal-activate-quote");e.find(".activate-quote-link").on("click",function(e){e.preventDefault();var h=f.find("[id$='_EntityID']").val(),s=o.find("button.primary"),c=n(this).data("url");s.off("click");s.on("click",function(e){var a,l,v;e.preventDefault();n(this).attr("disabled","disabled").prepend("<span class='fa fa-spinner fa-spin' aria-hidden='true'><\/span>");a={};l={};l.LogicalName=u.EntityName;l.Id=h;a.entityReference=l;v=JSON.stringify(a);n.ajax({type:"POST",contentType:"application/json",url:c,data:v}).done(function(){o.modal("hide");t(u.ActivateQuoteActionLink.SuccessMessage);r(u.ActivateQuoteActionLink)}).fail(function(t){var r=t.getResponseHeader("content-type"),u=r.indexOf("json")>-1?n.parseJSON(t.responseText):{Message:t.status,InnerError:{Message:t.statusText}};o.modal("hide");i(u,f)}).always(function(){s.removeAttr("disabled","disabled").find(".fa-spin").remove()})});o.modal()})}else e.find(".activate-quote-link").on("click",function(e){var h;e.preventDefault();var c=f.find("[id$='_EntityID']").val(),l=n(this).data("url"),s={},o={};o.LogicalName=u.EntityName;o.Id=c;s.entityReference=o;h=JSON.stringify(s);n.ajax({type:"POST",contentType:"application/json",url:l,data:h}).done(function(){t(u.ActivateQuoteActionLink.SuccessMessage);r(u.ActivateQuoteActionLink)}).fail(function(t){var r=t.getResponseHeader("content-type"),u=r.indexOf("json")>-1?n.parseJSON(t.responseText):{Message:t.status,InnerError:{Message:t.statusText}};i(u,f)})});return!0};u.prototype.addSetOpportunityOnHoldActionLinkClickEventHandlers=function(){var h=this,e=h._element,u=h._layout,f=e.closest(".entity-form"),c,l,a,s,o;if(f.length<1&&(c=e.closest(".crmEntityFormView"),f=c.find(".entity-form")),l=f.find("[id$='_EntityState']").val(),a=f.find("[id$='_EntityStatus']").val(),u==null||u==""||u.SetOpportunityOnHoldActionLink==null||!u.SetOpportunityOnHoldActionLink.Enabled||!u.SetOpportunityOnHoldActionLink.URL||l!="0"||a=="2")return s=e.find(".set-opportunity-on-hold-link"),s.addClass("hidden"),s.hide(),!1;if(u.SetOpportunityOnHoldActionLink.ShowModal==1){o=e.children(".modal-set-opportunity-on-hold");e.find(".set-opportunity-on-hold-link").on("click",function(e){e.preventDefault();var h=f.find("[id$='_EntityID']").val(),s=o.find("button.primary"),c=n(this).data("url");s.off("click");s.on("click",function(e){var a,l,v;e.preventDefault();n(this).attr("disabled","disabled").prepend("<span class='fa fa-spinner fa-spin' aria-hidden='true'><\/span>");a={};l={};l.LogicalName=u.EntityName;l.Id=h;a.entityReference=l;v=JSON.stringify(a);n.ajax({type:"POST",contentType:"application/json",url:c,data:v}).done(function(){o.modal("hide");t(u.SetOpportunityOnHoldActionLink.SuccessMessage);r(u.SetOpportunityOnHoldActionLink)}).fail(function(t){var r=t.getResponseHeader("content-type"),u=r.indexOf("json")>-1?n.parseJSON(t.responseText):{Message:t.status,InnerError:{Message:t.statusText}};o.modal("hide");i(u,f)}).always(function(){s.removeAttr("disabled","disabled").find(".fa-spin").remove()})});o.modal()})}else e.find(".set-opportunity-on-hold-link").on("click",function(e){var h;e.preventDefault();var c=f.find("[id$='_EntityID']").val(),l=n(this).data("url"),s={},o={};o.LogicalName=u.EntityName;o.Id=c;s.entityReference=o;h=JSON.stringify(s);n.ajax({type:"POST",contentType:"application/json",url:l,data:h}).done(function(){t(u.SetOpportunityOnHoldActionLink.SuccessMessage);r(u.SetOpportunityOnHoldActionLink)}).fail(function(t){var r=t.getResponseHeader("content-type"),u=r.indexOf("json")>-1?n.parseJSON(t.responseText):{Message:t.status,InnerError:{Message:t.statusText}};i(u,f)}).always(function(){})});return!0};u.prototype.addReopenOpportunityActionLinkClickEventHandlers=function(){var h=this,e=h._element,u=h._layout,f=e.closest(".entity-form"),c,l,a,s,o;if(f.length<1&&(c=e.closest(".crmEntityFormView"),f=c.find(".entity-form")),l=f.find("[id$='_EntityState']").val(),a=f.find("[id$='_EntityStatus']").val(),u==null||u==""||u.ReopenOpportunityActionLink==null||!u.ReopenOpportunityActionLink.Enabled||!u.ReopenOpportunityActionLink.URL||l=="0")return s=e.find(".reopen-opportunity-link"),s.addClass("hidden"),s.hide(),!1;if(u.ReopenOpportunityActionLink.ShowModal==1){o=e.children(".modal-reopen-opportunity");e.find(".reopen-opportunity-link").on("click",function(e){e.preventDefault();var h=f.find("[id$='_EntityID']").val(),s=o.find("button.primary"),c=n(this).data("url");s.off("click");s.on("click",function(e){var a,l,v;e.preventDefault();n(this).attr("disabled","disabled").prepend("<span class='fa fa-spinner fa-spin' aria-hidden='true'><\/span>");a={};l={};l.LogicalName=u.EntityName;l.Id=h;a.entityReference=l;v=JSON.stringify(a);n.ajax({type:"POST",contentType:"application/json",url:c,data:v}).done(function(){o.modal("hide");t(u.ReopenOpportunityActionLink.SuccessMessage);r(u.ReopenOpportunityActionLink)}).fail(function(t){var r=t.getResponseHeader("content-type"),u=r.indexOf("json")>-1?n.parseJSON(t.responseText):{Message:t.status,InnerError:{Message:t.statusText}};o.modal("hide");i(u,f)}).always(function(){s.removeAttr("disabled","disabled").find(".fa-spin").remove()})});o.modal()})}else e.find(".reopen-opportunity-link").on("click",function(e){var h;e.preventDefault();var c=f.find("[id$='_EntityID']").val(),l=n(this).data("url"),s={},o={};o.LogicalName=u.EntityName;o.Id=c;s.entityReference=o;h=JSON.stringify(s);n.ajax({type:"POST",contentType:"application/json",url:l,data:h}).done(function(){t(u.ReopenOpportunityActionLink.SuccessMessage);r(u.ReopenOpportunityActionLink)}).fail(function(t){var r=t.getResponseHeader("content-type"),u=r.indexOf("json")>-1?n.parseJSON(t.responseText):{Message:t.status,InnerError:{Message:t.statusText}};i(u,f)}).always(function(){})});return!0};u.prototype.addWinOpportunityActionLinkClickEventHandlers=function(){var h=this,e=h._element,u=h._layout,f=e.closest(".entity-form"),c,l,s,o;if(f.length<1&&(c=e.closest(".crmEntityFormView"),f=c.find(".entity-form")),l=f.find("[id$='_EntityState']").val(),u==null||u==""||u.WinOpportunityActionLink==null||!u.WinOpportunityActionLink.Enabled||!u.WinOpportunityActionLink.URL||l!="0")return s=e.find(".win-opportunity-link"),s.addClass("hidden"),s.hide(),!1;if(u.WinOpportunityActionLink.ShowModal==1){o=e.children(".modal-win-opportunity");e.find(".win-opportunity-link").on("click",function(e){e.preventDefault();var h=f.find("[id$='_EntityID']").val(),s=o.find("button.primary"),c=n(this).data("url");s.off("click");s.on("click",function(e){var a,l,v;e.preventDefault();n(this).attr("disabled","disabled").prepend("<span class='fa fa-spinner fa-spin' aria-hidden='true'><\/span>");a={};l={};l.LogicalName=u.EntityName;l.Id=h;a.entityReference=l;v=JSON.stringify(a);n.ajax({type:"POST",contentType:"application/json",url:c,data:v}).done(function(){o.modal("hide");t(u.WinOpportunityActionLink.SuccessMessage);r(u.WinOpportunityActionLink)}).fail(function(t){var r=t.getResponseHeader("content-type"),u=r.indexOf("json")>-1?n.parseJSON(t.responseText):{Message:t.status,InnerError:{Message:t.statusText}};o.modal("hide");i(u,f)}).always(function(){s.removeAttr("disabled","disabled").find(".fa-spin").remove()})});o.modal()})}else e.find(".win-opportunity-link").on("click",function(e){var h;e.preventDefault();var c=f.find("[id$='_EntityID']").val(),l=n(this).data("url"),s={},o={};o.LogicalName=u.EntityName;o.Id=c;s.entityReference=o;h=JSON.stringify(s);n.ajax({type:"POST",contentType:"application/json",url:l,data:h}).done(function(){t(u.WinOpportunityActionLink.SuccessMessage);r(u.WinOpportunityActionLink)}).fail(function(t){var r=t.getResponseHeader("content-type"),u=r.indexOf("json")>-1?n.parseJSON(t.responseText):{Message:t.status,InnerError:{Message:t.statusText}};i(u,f)}).always(function(){})});return!0};u.prototype.addLoseOpportunityActionLinkClickEventHandlers=function(){var h=this,e=h._element,u=h._layout,f=e.closest(".entity-form"),c,l,s,o;if(f.length<1&&(c=e.closest(".crmEntityFormView"),f=c.find(".entity-form")),l=f.find("[id$='_EntityState']").val(),u==null||u==""||u.LoseOpportunityActionLink==null||!u.LoseOpportunityActionLink.Enabled||!u.LoseOpportunityActionLink.URL||l!="0")return s=e.find(".lose-opportunity-link"),s.addClass("hidden"),s.hide(),!1;if(u.LoseOpportunityActionLink.ShowModal==1){o=e.children(".modal-lose-opportunity");e.find(".lose-opportunity-link").on("click",function(e){e.preventDefault();var h=f.find("[id$='_EntityID']").val(),s=o.find("button.primary"),c=n(this).data("url");s.off("click");s.on("click",function(e){var a,l,v;e.preventDefault();n(this).attr("disabled","disabled").prepend("<span class='fa fa-spinner fa-spin' aria-hidden='true'><\/span>");a={};l={};l.LogicalName=u.EntityName;l.Id=h;a.entityReference=l;v=JSON.stringify(a);n.ajax({type:"POST",contentType:"application/json",url:c,data:v}).done(function(){o.modal("hide");t(u.LoseOpportunityActionLink.SuccessMessage);r(u.LoseOpportunityActionLink)}).fail(function(t){var r=t.getResponseHeader("content-type"),u=r.indexOf("json")>-1?n.parseJSON(t.responseText):{Message:t.status,InnerError:{Message:t.statusText}};o.modal("hide");i(u,f)}).always(function(){s.removeAttr("disabled","disabled").find(".fa-spin").remove()})});o.modal()})}else e.find(".lose-opportunity-link").on("click",function(e){var h;e.preventDefault();var c=f.find("[id$='_EntityID']").val(),l=n(this).data("url"),s={},o={};o.LogicalName=u.EntityName;o.Id=c;s.entityReference=o;h=JSON.stringify(s);n.ajax({type:"POST",contentType:"application/json",url:l,data:h}).done(function(){t(u.LoseOpportunityActionLink.SuccessMessage);r(u.LoseOpportunityActionLink)}).fail(function(t){var r=t.getResponseHeader("content-type"),u=r.indexOf("json")>-1?n.parseJSON(t.responseText):{Message:t.status,InnerError:{Message:t.statusText}};i(u,f)}).always(function(){})});return!0};u.prototype.addGenerateQuoteFromOpportunityActionLinkClickEventHandlers=function(){var h=this,e=h._element,u=h._layout,f=e.closest(".entity-form"),c,l,s,o;if(f.length<1&&(c=e.closest(".crmEntityFormView"),f=c.find(".entity-form")),l=f.find("[id$='_EntityState']").val(),u==null||u==""||u.GenerateQuoteFromOpportunityActionLink==null||!u.GenerateQuoteFromOpportunityActionLink.Enabled||!u.GenerateQuoteFromOpportunityActionLink.URL||l!="0")return s=e.find(".generate-quote-from-opportunity-link"),s.addClass("hidden"),s.hide(),!1;if(u.GenerateQuoteFromOpportunityActionLink.ShowModal==1){o=e.children(".modal-generate-quote-from-opportunity");e.find(".generate-quote-from-opportunity-link").on("click",function(e){e.preventDefault();var h=f.find("[id$='_EntityID']").val(),s=o.find("button.primary"),c=n(this).data("url");s.off("click");s.on("click",function(e){var a,l,v;e.preventDefault();n(this).attr("disabled","disabled").prepend("<span class='fa fa-spinner fa-spin' aria-hidden='true'><\/span>");a={};l={};l.LogicalName=u.EntityName;l.Id=h;a.entityReference=l;v=JSON.stringify(a);n.ajax({type:"POST",contentType:"application/json",url:c,data:v}).done(function(){o.modal("hide");t(u.GenerateQuoteFromOpportunityActionLink.SuccessMessage);r(u.GenerateQuoteFromOpportunityActionLink)}).fail(function(t){var r=t.getResponseHeader("content-type"),u=r.indexOf("json")>-1?n.parseJSON(t.responseText):{Message:t.status,InnerError:{Message:t.statusText}};o.modal("hide");i(u,f)}).always(function(){s.removeAttr("disabled","disabled").find(".fa-spin").remove()})});o.modal()})}else e.find(".generate-quote-from-opportunity-link").on("click",function(e){var h;e.preventDefault();var c=f.find("[id$='_EntityID']").val(),l=n(this).data("url"),s={},o={};o.LogicalName=u.EntityName;o.Id=c;s.entityReference=o;h=JSON.stringify(s);n.ajax({type:"POST",contentType:"application/json",url:l,data:h}).done(function(){t(u.GenerateQuoteFromOpportunityActionLink.SuccessMessage);r(u.GenerateQuoteFromOpportunityActionLink)}).fail(function(t){var r=t.getResponseHeader("content-type"),u=r.indexOf("json")>-1?n.parseJSON(t.responseText):{Message:t.status,InnerError:{Message:t.statusText}};i(u,f)})});return!0};u.prototype.addUpdatePipelinePhaseActionLinkClickEventHandlers=function(){var h=this,e=h._element,u=h._layout,o=e.closest(".entity-form"),c,l,s,f;if(o.length<1&&(c=e.closest(".crmEntityFormView"),o=c.find(".entity-form")),l=o.find("[id$='_EntityState']").val(),u==null||u==""||u.UpdatePipelinePhaseActionLink==null||!u.UpdatePipelinePhaseActionLink.Enabled||!u.UpdatePipelinePhaseActionLink.URL||l!="0")return s=e.find(".update-pipeline-phase-link"),s.addClass("hidden"),s.hide(),!1;f=e.children(".modal-updatepipelinephase");e.find(".update-pipeline-phase-link").on("click",function(e){e.preventDefault();var h=o.find("[id$='_EntityID']").val(),s=f.find("button.primary"),c=n(this).data("url");s.off("click");s.on("click",function(e){var l,a,v,y,p,w;e.preventDefault();n(this).attr("disabled","disabled").prepend("<span class='fa fa-spinner fa-spin' aria-hidden='true'><\/span>");l={};a={};a.LogicalName=u.EntityName;a.Id=h;l.entityReference=a;v=f.find(".pipelinephase-input");l.salesStage=v.val();y=v.find("option:selected");l.stepName=y.text();p=f.find(".resolution-description-input");l.description=p.val();w=JSON.stringify(l);n.ajax({type:"POST",contentType:"application/json",url:c,data:w}).done(function(){f.modal("hide");t(u.UpdatePipelinePhaseActionLink.SuccessMessage);r(u.UpdatePipelinePhaseActionLink)}).fail(function(t){var r=t.getResponseHeader("content-type"),u=r.indexOf("json")>-1?n.parseJSON(t.responseText):{Message:t.status,InnerError:{Message:t.statusText}};f.modal("hide");i(u,o)}).always(function(){s.removeAttr("disabled","disabled").find(".fa-spin").remove()})});f.modal()});return!0}}(jQuery),function(n){function f(t){this._element=n(t);this._layouts=this._element.data("view-layouts");this._gridClass=this._element.data("grid-class");this._serviceUrlForGet=this._element.data("get-url");this._deferLoading=this._element.data("defer-loading");this._enableActions=this._element.data("enable-actions");this._selectMode=this._element.data("select-mode");this._columnWidthStyle=this._element.data("column-width-style");this._applyRelatedRecordFilter=this._element.data("apply-related-record-filter");this._filterRelationshipName=this._element.data("filter-relationship-name");this._filterEntityName=this._element.data("filter-entity-name");this._filterAttributeName=this._element.data("filter-attribute-name");this._allowFilterOff=this._element.data("allow-filter-off");this._toggleFilterText=this._element.data("toggle-filter-text");this._userIsAuthenticated=this._element.data("user-isauthenticated");this._userParentAccountName=this._element.data("user-parent-account-name");this._metaFilter=null;var i=this;n(t).on("refresh",function(){i.load()});n(t).on("metafilter",function(n,t){i._metaFilter=t;i.load()})}function t(t){var u,i,r,f;typeof t!=typeof undefined&&t!==!1&&t!=null&&(console.log(t),u=typeof t.InnerError!=typeof undefined&&t.InnerError!==!1&&t.InnerError!=null?t.InnerError.Message:t.Message,i=n(".notifications"),i.length==0&&(r=n(".page-heading"),i=r.length==0?n("<div class='notifications'><\/div>").prependTo(n("#content-container")):n("<div class='notifications'><\/div>").appendTo(r)),i.find(".notification").slideUp().remove(),f=n("<div class='notification alert alert-danger error alert-dismissible' role='alert'><button type='button' class='close' data-dismiss='alert' aria-label='Close'><span aria-hidden='true'>&times;<\/span><\/button><span class='fa fa-exclamation-triangle' aria-hidden='true'><\/span> "+u+"<\/div>").on("closed.bs.alert",function(){i.find(".notification").length==0&&i.hide()}).prependTo(i),i.show(),n("html, body").animate({scrollTop:f.offset().top-20},200))}function i(t,i,r){var u=n(".notifications"),f,e;u.length==0&&(f=n(".page-heading"),u=f.length==0?n("<div class='notifications'><\/div>").prependTo(n("#content-container")):n("<div class='notifications'><\/div>").appendTo(f));u.find(".notification").slideUp().remove();typeof t!=typeof undefined&&t!==!1&&t!=null&&t!=""&&(e=n("<div class='notification alert alert-success success alert-dismissible' role='alert'><button type='button' class='close' data-dismiss='alert' aria-label='Close'><span aria-hidden='true'>&times;<\/span><\/button>"+t+"<\/div>").on("closed.bs.alert",function(){u.find(".notification").length==0&&u.hide()}).prependTo(u),u.show(),n("html, body").animate({scrollTop:e.offset().top-20},200),r&&setTimeout(function(){e.slideUp(100).remove();u.find(".notification").length==0&&u.hide()},5e3))}function v(n){var o=[],s,f,e,t,i,r,u,h;if(n==null||(s=/(\w+)\s*(asc|ascending|desc|descending)?\s*(,)?/gi,f=n.match(s),f==null))return o;for(e=0;e<f.length;e++)t=f[e],t!=null&&t!=""&&(r="ASC",u=t.indexOf(" "),u!=-1?(i=t.substr(0,u),r=t.substr(u+1,t.length-u)):i=t,i!=null&&(i=i.replace(/,\s*$/,"")),r!=null&&(r=r.replace(/,\s*$/,"")),h={name:i,direction:r},o.push(h));return o}function o(t,i,r){var u=-1;return n.each(t,function(n,t){t[i].toString().toLowerCase().indexOf(r.toString().toLowerCase())!=-1&&(u=n)}),u}function u(n){return!n||!n.URL?null:a(n.URL)}function e(n){return!n||!n.RedirectUrl?null:a(n.RedirectUrl)}function a(n){return n?n.Host==window.location.hostname?URI(n.PathWithQueryString):URI(n.Uri):null}function r(n,t){var i;if(typeof t==typeof undefined||t==null){n.trigger("refresh");return}var r=typeof t.OnComplete!=typeof undefined&&t.OnComplete!=null&&t.OnComplete!=0;r?(i=p(t),i!=null&&i!=""?y(i):n.trigger("refresh")):n.trigger("refresh")}function y(t){typeof t!="undefined"&&t!=null&&t!=""&&(n.blockUI({css:{border:"none",backgroundColor:"transparent",opacity:.5,color:"#fff"},message:"<span class='fa fa-2x fa-spinner fa-pulse' aria-hidden='true'><\/span>"}),parent?parent.location.replace(t):window.location.replace(t))}function p(n){return!n||!n.RedirectUrl?null:n.RedirectUrl.Host==window.location.hostname?URI(n.RedirectUrl.PathWithQueryString):URI(n.RedirectUrl.Uri)}function l(){try{return window.self!==window.top}catch(n){return!0}}var s=0,h=1,c=2;n(document).ready(function(){n(".entity-grid").each(function(){new f(n(this)).render()});n(".entitylist").on("click.entitylist",".entitylist-filter-option-breaker a",function(t){t.preventDefault();t.stopPropagation();var i=n(this).data("collapsed"),r=n(this).closest("ul"),u=r.data("pagesize");r.children("li.entitylist-filter-option").each(function(t){t>=u&&(i?n(this).attr("aria-hidden","false"):n(this).attr("aria-hidden","true"))});n(this).find(".fa").toggleClass("fa-caret-down",i).toggleClass("fa-caret-up",!i);n(this).find(".expand-label").text(i?"Less":"More");n(this).data("collapsed",!i)})});f.prototype.render=function(i){var f=this,e=f._element,g=f._layouts,ui=f._gridClass,k=e.data("selected-view"),fi=f._deferLoading,it=f._enableActions,ei=f._allowFilterOff,rt=f._toggleFilterText,lt=f._selectMode,at=f._columnWidthStyle,oi=f._userIsAuthenticated,ut=f._userParentAccountName,w=0,yt,ft,a,y,et,nt,st,tt,ht,bt,kt,dt,d,ct,p;typeof k!=typeof undefined&&k!==!1&&k!=null&&k!=""&&(w=o(g,"Id",k),w==-1&&(w=0));this._activeLayoutIndex=w;var r=g[w],si=URI(window.location).search(!0),vt=l();if(f._metaFilter=si[r.Configuration.FilterSettings.FilterQueryStringParameterName||"mf"]||null,yt=oi&&ut&&ut!=""&&r.Configuration.FilterPortalUserAttributeName!=null&&r.Configuration.FilterPortalUserAttributeName!=""&&r.Configuration.FilterAccountAttributeName!=null&&r.Configuration.FilterAccountAttributeName!="",ft=e.children(".view-grid"),ft.empty(),e.children(".view-toolbar").remove(),a=n("<div><\/div>").addClass("view-toolbar").addClass("grid-actions").addClass("clearfix"),y=!1,ei&&(et=n("<a><\/a>").attr("href","#").addClass("toggle-related-filter").data("placement","bottom").data("toggle","tooltip").addClass("btn btn-default").addClass("active").html("<span class='fa fa-filter' aria-hidden='true'><\/span>").on("click",function(t){t.preventDefault();n(this).toggleClass("active");f.load(0,e.children(".view-toolbar").find(".view-filter-select").data("filter"),!n(this).hasClass("active"))}),rt&&rt!=""&&et.attr("title",rt).tooltip(),et.prependTo(a),y=!0),nt=r.Configuration.Search,nt.Enabled){var hi=n("<div><\/div>").addClass("input-group").addClass("pull-right").addClass("view-search").addClass("entitylist-search"),pt=n("<button><\/button>").attr("type","button").addClass("btn").addClass("btn-default").append(n("<span><\/span>").addClass("sr-only").html("Search Results")).append(n("<span><\/span>").addClass("fa").addClass("fa-search")).on("click",function(n){n.preventDefault();f.load(1)}),ci=n("<div><\/div>").addClass("input-group-btn").append(pt),ot=n("<input/>").attr("placeholder",nt.PlaceholderText).data("toggle","tooltip").attr("title",nt.TooltipText).tooltip().addClass("query").addClass("form-control").val("").on("keypress",function(t){var i=t.keyCode?t.keyCode:t.which;i=="13"&&(t.preventDefault(),pt.trigger("click"),n(this).trigger("focus"))});hi.append(ot).append(ci).prependTo(a);y=!0}it&&window.addEventListener("message",function(n){var t=null;(t=window.location.origin?window.location.origin:window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:""),n.origin==t)&&n.data=="Success"&&(e.children(".modal-form").modal("hide"),e.trigger("refresh"))});e.children(".modal-form-details").on("hidden.bs.modal.entitygrid",function(){var t=n(this).find("iframe");t.attr("src","")});e.children(".modal-form-edit").on("hidden.bs.modal.entitygrid",function(){var t=n(this).find("iframe");t.attr("src","")});if(it&&r.Configuration.InsertActionLink.Enabled&&r.Configuration.InsertActionLink.URL&&(st=n("<a><\/a>").attr("href",u(r.Configuration.InsertActionLink)).addClass("btn").addClass("btn-primary").addClass("pull-right").addClass("action").html(r.Configuration.InsertActionLink.Label).attr("title",r.Configuration.InsertActionLink.Tooltip),vt&&st.attr("target","_top"),st.prependTo(a),y=!0),it&&n.each(r.Configuration.ViewActionLinks,function(i,o){var rt,p,l,k,d,w;if(o.Enabled)switch(o.Type){case 3:var v="#",g=e.data("ref-entity"),nt=e.data("ref-id"),tt=e.data("ref-rel"),it=e.data("ref-rel-role"),b="";if(g&&nt&&tt&&(b+="refentity="+g+"&refid="+nt+"&refrel="+tt,it&&(b+="&refrelrole="+it)),(o.Target==h||o.Target==c&&o.URL!=null)&&(v=URI(u(o)).toString(),rt=v.indexOf("?")>=0?"&":"?",v+=rt+b),p=n("<a><\/a>").attr("href",v).addClass("btn").addClass("btn-primary").addClass("pull-right").addClass("action").html(o.Label).attr("title",o.Tooltip),v!="#"&&vt&&p.attr("target","_top"),o.Target==s&&o.EntityForm){l=e.children(".modal-form-insert");l.off("hidden.bs.modal.entitygrid").on("hidden.bs.modal.entitygrid",function(){var t=n(this).find("iframe");t.attr("src","");p.trigger("focus")});p.on("click",function(n){n.preventDefault();var t=l.find("iframe"),u=t.data("page"),f=o.EntityForm.Id.toString(),i=u+"?entityformid="+f+"&languagecode="+r.Configuration.LanguageCode;i+="&"+b;t.attr("src",i);t.on("load",function(){l.find(".form-loading").hide();l.find("iframe").contents().find("#EntityFormControl").show()});l.find(".form-loading").show();l.find("iframe").contents().find("#EntityFormControl").hide();l.modal()})}p.prependTo(a);y=!0;break;case 5:k=n("<a><\/a>").attr("href","#").addClass("btn").addClass("btn-info").addClass("pull-right").addClass("action").html(o.Label).attr("title",o.Tooltip);d=e.find(".associate-lookup .modal-associate");d.off("hidden.bs.modal.entitygrid").on("hidden.bs.modal.entitygrid",function(){k.trigger("focus")});k.on("click",function(n){n.preventDefault();d.modal()});k.prependTo(a);y=!0;break;case 8:w=n("<a><\/a>").attr("href","#").addClass("entitylist-download").addClass("btn").addClass("btn-info").addClass("pull-right").addClass("action").attr("title",o.Tooltip).html(o.Label);w.on("click",function(i){var u,s;i.preventDefault();w.attr("disabled","disabled");u={};u.viewName=r.ViewName;u.columns=r.Columns;u.base64SecureConfiguration=r.Base64SecureConfiguration;u.sortExpression=r.SortExpression;u.search=ot?ot.val():null;u.filter=f.getCurrentFilter();u.metaFilter=f._metaFilter;u.page=e.children(".view-pagination").data("current-page");u.pageSize=e.children(".view-pagination").data("pagesize");s=JSON.stringify(u);n.ajax({type:"POST",dataType:"json",contentType:"application/json; charset=utf-8",url:o.URL.Path,data:s,global:!1,success:function(n){n.success&&(window.location=o.URL.Path+"?key="+n.sessionKey)}}).fail(function(i){var r=i.getResponseHeader("content-type"),u=r.indexOf("json")>-1?n.parseJSON(i.responseText):{Message:i.status,InnerError:{Message:i.statusText}};t(u,e)}).always(function(){w.removeAttr("disabled","disabled")})});w.prependTo(a);y=!0}}),yt){var b=n("<ul><\/ul>").addClass("view-filter-select").addClass("nav").addClass("nav-pills").addClass("pull-left").data("filter","user"),wt=n("<li><\/li>").addClass("dropdown"),li=n("<a><\/a>").addClass("dropdown-toggle").attr("data-toggle","dropdown").attr("href","#").append(n("<span><\/span>").addClass("fa").addClass("fa-filter").attr("aria-hidden","true")).append(n("<span><\/span>").addClass("title").html(" "+r.Configuration.FilterByUserOptionLabel)).append(n("<span><\/span>").addClass("caret").attr("aria-hidden","true")).dropdown();wt.append(li);tt=n("<ul><\/ul>").addClass("dropdown-menu");ht=n("<li><\/li>");ht.addClass("active");bt=n("<a><\/a>").attr("href","#").addClass("filter-user").html(r.Configuration.FilterByUserOptionLabel).on("click",function(t){t.preventDefault();b.find("li").removeClass("active");n(this).closest("li").toggleClass("active");b.data("filter","user");f.changeFilter()});ht.append(bt).appendTo(tt);kt=n("<li><\/li>");dt=n("<a><\/a>").attr("href","#").addClass("filter-account").html(ut).on("click",function(t){t.preventDefault();b.find("li").removeClass("active");n(this).closest("li").toggleClass("active");b.data("filter","account");f.changeFilter()});kt.append(dt).appendTo(tt);wt.append(tt).appendTo(b);b.prependTo(a);y=!0}if(g.length>1){d=r.Configuration.ViewDisplayName;(d==null||d=="")&&(d=r.ViewName);var gt=n("<ul><\/ul>").addClass("view-select").addClass("nav").addClass("nav-pills").addClass("pull-left"),ni=n("<li><\/li>").addClass("dropdown"),ai=n("<a><\/a>").addClass("dropdown-toggle").attr("data-toggle","dropdown").attr("href","#").append(n("<span><\/span>").addClass("fa").addClass("fa-list").attr("aria-hidden","true")).append(n("<span><\/span>").addClass("title").html(" "+d)).append(n("<span><\/span>").addClass("caret").attr("aria-hidden","true")).dropdown();ni.append(ai);ct=n("<ul><\/ul>").addClass("dropdown-menu");n.each(g,function(t,i){var u=n("<li><\/li>"),r,e;t==w&&u.addClass("active");r=i.Configuration.ViewDisplayName;(r==null||r=="")&&(r=i.ViewName);e=n("<a><\/a>").attr("href","#").data("id",i.Id).html(r).on("click",function(t){t.preventDefault();var i=n(this).data("id");f.changeView(i)});u.append(e).appendTo(ct)});ni.append(ct).appendTo(gt);gt.prependTo(a);y=!0}if(y&&e.prepend(a),r.Columns.length!=0){p=n("<table><\/table>").attr("aria-live","polite").attr("aria-relevant","additions");p.addClass("table");p.addClass(ui);(lt=="Single"||lt=="Multiple")&&p.addClass("table-hover");at=="Pixels"&&p.attr("style","width:"+r.ColumnsTotalWidth+"px !important; max-width:"+r.ColumnsTotalWidth+"px !important;");p.data("sort-expression",r.SortExpression);var ti=n("<thead><\/thead>"),vi=n("<tbody><\/tbody>"),ii=n("<tr><\/tr>"),ri=v(r.SortExpression);n.each(r.Columns,function(t,i){var r=n("<th><\/th>").data("field",i.LogicalName),u,f,e;at=="Pixels"?r.attr("style","width:"+i.Width+"px;"):r.attr("style","width:"+i.WidthAsPercent+"%;");i.SortDisabled?(r.html(i.Name),r.addClass("sort-disabled")):(r.addClass("sort-enabled").data("sort-name",i.LogicalName),u=n("<a><\/a>").attr("href","#"),f=o(ri,"name",i.LogicalName),f!=-1?(e=ri[f],e.direction.toLowerCase().match("asc")!=-1?(u.append(i.Name+" ").append(n("<span><\/span>").addClass("fa").addClass("fa-arrow-up").attr("aria-hidden","true")).append("<span class='sr-only sort-hint'>. Activate to sort in descending order<\/span>"),r.data("sort-dir","ASC").attr("aria-sort","ascending").addClass("sort").addClass("sort-asc")):(u.append(i.Name+" ").append(n("<span><\/span>").append("Activate to sort in ascending order").addClass("fa").addClass("fa-arrow-down").attr("aria-hidden","true")).append("<span class='sr-only sort-hint'>. Activate to sort in ascending order<\/span>"),r.data("sort-dir","DESC").attr("aria-sort","descending").addClass("sort").addClass("sort-desc"))):u.html(i.Name).append("<span class='sr-only sort-hint'>. Activate to sort in descending order<\/span>"),u.appendTo(r));r.appendTo(ii)});ii.appendTo(ti);ti.appendTo(p);vi.appendTo(p);p.appendTo(ft);f.addSortEventHandlers();fi?i&&f.load():f.load()}};f.prototype.changeView=function(n){var t=this,i=t._element;i.data("selected-view",n);t.render(!0)};f.prototype.changeFilter=function(){var n=this,e=n._element,s=n._layouts,t=e.data("selected-view"),c=e.children(".view-toolbar").find(".view-filter-select"),i=0,f,h;typeof t!=typeof undefined&&t!==!1&&t!=null&&t!=""&&(i=o(s,"Id",t),i==-1&&(i=0));this._activeLayoutIndex=i;var r=s[i],l=n._userIsAuthenticated,u=n._userParentAccountName,a=l&&u&&u!=""&&(r.Configuration.FilterPortalUserAttributeName!=null&&r.Configuration.FilterPortalUserAttributeName!=""||r.Configuration.FilterAccountAttributeName!=null&&r.Configuration.FilterAccountAttributeName!="");a&&(f=n.getCurrentFilter(),h=f=="user"?r.Configuration.FilterByUserOptionLabel:u,c.find("li.dropdown").find("span.title").html(" "+h),n.load(0,f))};f.prototype.getCurrentFilter=function(){var r=this,s=r._element,h=r._layouts,t=s.data("selected-view"),c=s.children(".view-toolbar").find(".view-filter-select"),i=0,f;typeof t!=typeof undefined&&t!==!1&&t!=null&&t!=""&&(i=o(h,"Id",t),i==-1&&(i=0));this._activeLayoutIndex=i;var n=h[i],l=r._userIsAuthenticated,u=r._userParentAccountName,e="user";return l?n.Configuration.FilterPortalUserAttributeName==null||n.Configuration.FilterPortalUserAttributeName==""?u&&u!=""&&n.Configuration.FilterAccountAttributeName!=null&&n.Configuration.FilterAccountAttributeName!=""?"account":null:!u||u==""||n.Configuration.FilterAccountAttributeName==null||n.Configuration.FilterAccountAttributeName==""?e:(f=c.data("filter")||e,f=="user"||f=="account")?f:e:null};f.prototype.isRelatedRecordFilterEnabled=function(){var n=this,t=n._element;return t.children(".view-toolbar").find(".toggle-related-filter").length==0?n._applyRelatedRecordFilter||!1:t.children(".view-toolbar").find(".toggle-related-filter").hasClass("active")};f.prototype.load=function(t,i,r,f){var a=this,v=a._element,tt=v.children(".view-grid").find("table"),y=n("<tbody><\/tbody>"),it=v.children(".view-error"),rt=v.children(".view-empty"),at=v.children(".view-access-denied"),vt=v.children(".view-loading"),ut=v.children(".view-pagination"),yt=v.children(".view-toolbar").find(".entitylist-search input.query"),pt=tt.data("sort-expression"),wt=a._serviceUrlForGet,bt=a._layouts,p=bt[a._activeLayoutIndex],ft=p.Configuration,w=a._selectMode,kt=a._enableActions,et,dt=a._filterRelationshipName,ot=a._filterEntityName,g=a._filterAttributeName,st=null,ht=v.closest(".entity-form").children("input[type='hidden'][id$='EntityName']").val(),ct=v.closest(".entity-form").children("input[type='hidden'][id$='EntityID']").val(),gt=a._metaFilter,b,k,d,lt,nt;v.children(".view-grid").find("tbody").remove();it.hide().prop("aria-hidden",!0);rt.hide().prop("aria-hidden",!0);at.hide().prop("aria-hidden",!0);vt.show().prop("aria-hidden",!1);ut.data("pagesize",ft.PageSize);b=ut.data("current-page");(b==null||b=="")&&(b=1);i=i||a.getCurrentFilter();t=t||b;k=ut.data("pagesize");(k==null||k=="")&&(k=10);d=yt.val();(typeof d==typeof undefined||d===!1)&&(d=null);et=typeof r==typeof undefined?a.isRelatedRecordFilterEnabled():!r;et&&(ot&&ht&&ht!=""&&ot==ht&&ct&&ct!=""?st=ct:g&&g!=""&&(lt=n("#"+g),lt.length>0&&(nt=lt.val(),nt&&nt!=""&&(st=nt))));a.hidePagination();a.getData(wt,ft,p.Base64SecureConfiguration,pt,i,gt,d,t,k,et,dt,ot,g,st,function(t){var d,gt,et,g,nt,it,yt,ot,k,ii,pt,wt,ut,b,bt,dt,st,i,ht,ri,ct,lt,ui,vt;if(y.empty(),typeof t==typeof undefined||t===!1||t==null){rt.fadeIn().prop("aria-hidden",!1);v.trigger("loaded");return}if(typeof t.Records!=typeof undefined&&t.Records!==!1&&(t.Records==null||t.Records.length==0)){rt.fadeIn().prop("aria-hidden",!1);v.trigger("loaded");return}if(typeof t.AccessDenied!=typeof undefined&&t.AccessDenied!==!1&&t.AccessDenied){at.fadeIn().prop("aria-hidden",!1);v.trigger("loaded");return}for(d=n.map(tt.find("th"),function(t){return n(t).data("field")}),gt=d.length==0?"":d[0]=="col-select"?d[1]:d[0],v.data("total-record-count",t.ItemCount),et=0;et<t.Records.length;et++){var r=t.Records[et],ni=o(r.Attributes,"Name",gt),ti="";for(ni!=-1&&(ti=r.Attributes[ni].DisplayValue),g=n("<tr><\/tr>").attr("data-id",r.Id).attr("data-entity",ft.EntityName).attr("data-name",ti).on("focus",function(){n(this).addClass("active")}).on("blur",function(){n(this).removeClass("active")}),nt=n.noop,w=="Multiple"?(nt=function(){var t=n(this).attr("aria-checked")==="true";n(this).children("td:first").find(".fa-fw").toggleClass("fa-check",!t);n(this).toggleClass("selected").toggleClass("info").attr("aria-checked",!t)},g.on("click",nt).on("keypress",function(n){var t=n.keyCode?n.keyCode:n.which;(t=="13"||t=="32")&&(n.preventDefault(),nt.apply(this,arguments))}).attr("tabindex",0).attr("role","checkbox").attr("aria-checked","false")):w=="Single"&&(nt=function(){var t=n(this).attr("aria-checked")==="true",i=tt.find("tr.selected");i.each(function(){n(this).children("td:first").find(".fa-fw").removeClass("fa-check");n(this).removeClass("selected").removeClass("info").attr("aria-checked",!1)});t||(n(this).children("td:first").find(".fa-fw").addClass("fa-check"),n(this).addClass("selected").addClass("info").attr("aria-checked",!0))},g.on("click",nt).on("keypress",function(n){var t=n.keyCode?n.keyCode:n.which;(t=="13"||t=="32")&&(n.preventDefault(),nt.apply(this,arguments))}).attr("tabindex",0).attr("role","radio").attr("aria-checked","false")),it=0;it<d.length;it++){for(yt=!1,ot=0;ot<r.Attributes.length;ot++)if(k=r.Attributes[ot],k.Name==d[it]){ii=a.formatAttributeValue(k,k.AttributeMetadata,it,r)||k.DisplayValue;pt=n("<td><\/td>").attr("data-type",k.Type).attr("data-attribute",k.Name).attr("data-value",typeof k.Value=="object"?JSON.stringify(k.Value):k.Value).html(ii);k.AttributeMetadata&&pt.data("attribute-metadata",k.AttributeMetadata);g.append(pt);yt=!0;break}if(!yt)if(d[it]=="col-action"){wt=n("<td><\/td>");ut=n("<div class='dropdown action'><\/div>");n("<a class='btn btn-default btn-xs'><span class='fa fa-chevron-circle-down' aria-hidden='true'><\/span><\/a>").attr("href","#").attr("data-toggle","dropdown").appendTo(ut);b=n("<ul class='dropdown-menu' role='menu'><ul>");b.css("position","fixed").appendTo(ut);ut.on("show.bs.dropdown",function(){var t=n(this).get(0).getBoundingClientRect(),i=n(this).find(".dropdown-menu:first"),r=n(window).width(),u=t.left+i.outerWidth()<=r;u?i.css("left",t.left).css("top",t.top+n(this).outerHeight()):i.css("left",t.left+t.width-i.outerWidth()).css("top",t.top+n(this).outerHeight())});if(n(window).scroll(function(){var n=v.find(".dropdown.action.open");n.length!=0&&n.removeClass("open")}),bt=l(),kt&&p.Configuration.ItemActionLinks&&p.Configuration.ItemActionLinks.length>0)for(dt=p.Configuration.ItemActionLinks,st=0;st<dt.length;st++){i=dt[st];switch(i.Type){case 1:i.Enabled&&(ht="#",(i.Target==h||i.Target==c)&&i.URL!=null&&(ht=URI(u(i)).addSearch(i.QueryStringIdParameterName,r.Id.toString())),ri=n("<li role='presentation'><\/li>"),ct=n("<a class='details-link' role='menuitem' tabindex='-1'><\/a>").attr("href",ht).attr("title",i.Tooltip).html(i.Label),ht!="#"&&bt&&ct.attr("target","_top"),i.Target==s&&i.EntityForm&&ct.addClass("launch-modal").attr("data-entityformid",i.EntityForm.Id),ri.append(ct).appendTo(b));break;case 2:i.Enabled&&r.CanWrite&&(lt="#",(i.Target==h||i.Target==c)&&i.URL!=null&&(lt=URI(u(i)).addSearch(i.QueryStringIdParameterName,r.Id.toString())),ui=n("<li role='presentation'><\/li>"),vt=n("<a class='edit-link' role='menuitem' tabindex='-1'><\/a>").attr("href",lt).attr("title",i.Tooltip).html(i.Label),lt!="#"&&bt&&vt.attr("target","_top"),i.Target==s&&i.EntityForm&&vt.addClass("launch-modal").attr("data-entityformid",i.EntityForm.Id),ui.append(vt).appendTo(b));break;case 4:i.Enabled&&r.CanDelete&&n("<li role='presentation'><\/li>").append(n("<a class='delete-link' role='menuitem' tabindex='-1' href='#'><\/a>").attr("title",i.Tooltip).html(i.Label)).appendTo(b);break;case 6:i.Enabled&&r.CanAppend&&n("<li role='presentation'><\/li>").append(n("<a class='disassociate-link' role='menuitem' tabindex='-1' href='#'><\/a>").attr("title",i.Tooltip).html(i.Label)).appendTo(b);break;case 7:i.URL&&n("<li role='presentation'><\/li>").append(n("<a class='workflow-link' role='menuitem' tabindex='-1' href='#'><\/a>").attr("title",i.Tooltip).attr("data-workflowid",i.Workflow.Id).attr("data-url",u(i)).html(i.Label)).appendTo(b);break;case 9:i.Enabled&&r.CanWrite&&r.StateCode=="0"&&n("<li role='presentation'><\/li>").append(n("<a class='close-case-link' role='menuitem' tabindex='-1' href='#'><\/a>").attr("data-url",u(i)).attr("data-redirecturl",e(i)).attr("data-resolution",i.DefaultResolution).attr("data-description",i.DefaultResolutionDescription).attr("title",i.Tooltip).html(i.Label)).appendTo(b);break;case 10:i.Enabled&&r.CanWrite&&r.StateCode=="0"&&n("<li role='presentation'><\/li>").append(n("<a class='qualify-lead-link' role='menuitem' tabindex='-1' href='#'><\/a>").attr("data-url",u(i)).attr("data-redirecturl",e(i)).attr("title",i.Tooltip).html(i.Label)).appendTo(b);break;case 11:i.Enabled&&r.CanWrite&&r.StateCode=="1"&&n("<li role='presentation'><\/li>").append(n("<a class='convert-quote-link' role='menuitem' tabindex='-1' href='#'><\/a>").attr("data-url",u(i)).attr("data-redirecturl",e(i)).attr("title",i.Tooltip).html(i.Label)).appendTo(b);break;case 12:i.Enabled&&r.CanWrite&&r.StateCode!="2"&&n("<li role='presentation'><\/li>").append(n("<a class='convert-order-link' role='menuitem' tabindex='-1' href='#'><\/a>").attr("data-url",u(i)).attr("data-redirecturl",e(i)).attr("title",i.Tooltip).html(i.Label)).appendTo(b);break;case 13:i.Enabled&&r.CanWrite&&n("<li role='presentation'><\/li>").append(n("<a class='calculate-opportunity-link' role='menuitem' tabindex='-1' href='#'><\/a>").attr("data-url",u(i)).attr("data-redirecturl",e(i)).attr("title",i.Tooltip).html(i.Label)).appendTo(b);break;case 14:i.Enabled&&r.CanWrite&&r.StateCode=="0"&&n("<li role='presentation'><\/li>").append(n("<a class='resolve-case-link' role='menuitem' tabindex='-1' href='#'><\/a>").attr("data-url",u(i)).attr("data-redirecturl",e(i)).attr("title",i.Tooltip).html(i.Label)).appendTo(b);break;case 15:i.Enabled&&r.CanWrite&&r.StateCode!="0"&&n("<li role='presentation'><\/li>").append(n("<a class='reopen-case-link' role='menuitem' tabindex='-1' href='#'><\/a>").attr("title",i.Tooltip).html(i.Label)).appendTo(b);break;case 16:i.Enabled&&r.CanWrite&&r.StateCode=="0"&&n("<li role='presentation'><\/li>").append(n("<a class='cancel-case-link' role='menuitem' tabindex='-1' href='#'><\/a>").attr("data-url",u(i)).attr("data-redirecturl",e(i)).attr("title",i.Tooltip).html(i.Label)).appendTo(b);break;case 17:i.Enabled&&r.CanWrite&&r.StateCode!="1"&&n("<li role='presentation'><\/li>").append(n("<a class='deactivate-link' role='menuitem' tabindex='-1' href='#'><\/a>").attr("title",i.Tooltip).html(i.Label)).appendTo(b);break;case 18:i.Enabled&&r.CanWrite&&r.StateCode!="0"&&n("<li role='presentation'><\/li>").append(n("<a class='activate-link' role='menuitem' tabindex='-1' href='#'><\/a>").attr("title",i.Tooltip).html(i.Label)).appendTo(b);break;case 19:i.Enabled&&r.CanWrite&&r.StateCode=="0"&&n("<li role='presentation'><\/li>").append(n("<a class='activate-quote-link' role='menuitem' tabindex='-1' href='#'><\/a>").attr("title",i.Tooltip).html(i.Label)).appendTo(b);break;case 20:i.Enabled&&r.CanWrite&&r.StateCode=="0"&&r.StatusCode!="2"&&n("<li role='presentation'><\/li>").append(n("<a class='set-opportunity-on-hold-link' role='menuitem' tabindex='-1' href='#'><\/a>").attr("title",i.Tooltip).html(i.Label)).appendTo(b);break;case 21:i.Enabled&&r.CanWrite&&r.StateCode=="0"&&n("<li role='presentation'><\/li>").append(n("<a class='win-opportunity-link' role='menuitem' tabindex='-1' href='#'><\/a>").attr("data-url",u(i)).attr("data-redirecturl",e(i)).attr("title",i.Tooltip).html(i.Label)).appendTo(b);break;case 22:i.Enabled&&r.CanWrite&&r.StateCode=="0"&&n("<li role='presentation'><\/li>").append(n("<a class='lose-opportunity-link' role='menuitem' tabindex='-1' href='#'><\/a>").attr("data-url",u(i)).attr("data-redirecturl",e(i)).attr("title",i.Tooltip).html(i.Label)).appendTo(b);break;case 23:i.Enabled&&r.CanWrite&&r.StateCode=="0"&&n("<li role='presentation'><\/li>").append(n("<a class='generate-quote-from-opportunity-link' role='menuitem' tabindex='-1' href='#'><\/a>").attr("data-url",u(i)).attr("data-redirecturl",e(i)).attr("title",i.Tooltip).html(i.Label)).appendTo(b);break;case 25:i.Enabled&&r.CanWrite&&r.StateCode!="0"&&n("<li role='presentation'><\/li>").append(n("<a class='reopen-opportunity-link' role='menuitem' tabindex='-1' href='#'><\/a>").attr("title",i.Tooltip).html(i.Label)).appendTo(b)}}b.children("li").length>0&&(ut.find(".fa").addClass("fa-fw"),wt.append(ut));wt.appendTo(g)}else g.append("<td><\/td>")}(w=="Multiple"||w=="Single")&&g.children("td:first").append("<span class='fa fa-fw'><\/span>");y.append(g)}w==="Single"&&y.attr("role","radiogroup");v.children(".view-grid").children("table").append(y.hide());y.fadeIn();a.initializePagination(t,f);a.addDetailsActionLinkClickEventHandlers();a.addEditActionLinkClickEventHandlers();a.addDeleteActionLinkClickEventHandlers();a.addQualifyLeadActionLinkClickEventHandlers();a.addCloseCaseActionLinkClickEventHandlers();a.addResolveCaseActionLinkClickEventHandlers();a.addReopenCaseActionLinkClickEventHandlers();a.addCancelCaseActionLinkClickEventHandlers();a.addConvertQuoteActionLinkClickEventHandlers();a.addConvertOrderActionLinkClickEventHandlers();a.addCalculateOpportunityActionLinkClickEventHandlers();a.addActivateActionLinkClickEventHandlers();a.addDeactivateActionLinkClickEventHandlers();a.addActivateQuoteActionLinkClickEventHandlers();a.addSetOpportunityOnHoldActionLinkClickEventHandlers();a.addReopenOpportunityActionLinkClickEventHandlers();a.addWinOpportunityActionLinkClickEventHandlers();a.addLoseOpportunityActionLinkClickEventHandlers();a.addGenerateQuoteFromOpportunityActionLinkClickEventHandlers();a.addDisassociateActionLinkClickEventHandlers();a.addWorkflowActionLinkClickEventHandlers();v.trigger("loaded")},function(t,i,r){it.html(n("<div class='alert alert-block alert-danger'><\/div>").html(r));it.show().prop("aria-hidden",!1)},function(){vt.hide().prop("aria-hidden",!0)})};f.prototype.getData=function(t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b){var k,d;if(p=n.isFunction(p)?p:function(){},w=n.isFunction(w)?w:function(){},b=n.isFunction(b)?b:function(){},!t||t==""){b.call(this);w.call(this,null,"error","A required service url was not provided.");return}if(!r){b.call(this);w.call(this,null,"error","A required secure ViewConfiguration was not provided.");return}h=h||-1;k={};k.base64SecureConfiguration=r;k.sortExpression=u;k.search=o;k.page=s;k.pageSize=h;k.filter=f;k.metaFilter=e;c&&(k.applyRelatedRecordFilter=c,k.filterRelationshipName=l,k.filterEntityName=a,k.filterAttributeName=v,y&&(k.filterValue=y));d=JSON.stringify(k);n.ajax({type:"POST",dataType:"json",contentType:"application/json; charset=utf-8",url:t,data:d,global:!1}).done(p).fail(w).always(b)};f.prototype.formatAttributeValue=function(t,i,r,f){var a,s,h,v,y,nt,p,w,b;if(!t)return null;var c=this,d=c._element,tt=c._layouts,o=tt[c._activeLayoutIndex],it=c._enableActions,k=l(),e,g=r==0&&it&&o.Configuration.DetailsActionLink.Enabled;switch(t.Type){case"System.DateTime":if(a=window.moment,a){var rt=dateFormatConverter.convert(d.closest("[data-dateformat]").data("dateformat")||"dd/MM/YYYY",dateFormatConverter.dotNet,dateFormatConverter.momentJs),ut=dateFormatConverter.convert(d.closest("[data-timeformat]").data("timeformat")||"h:mm tt",dateFormatConverter.dotNet,dateFormatConverter.momentJs),ft=rt+" "+ut;e=t.FormattedValue.indexOf(":")!=-1?n("<time><\/time>").attr("datetime",t.DisplayValue).text(a(t.Value).format(ft)):n("<time><\/time>").attr("datetime",t.DisplayValue).addClass("date-only").text(a.utc(t.Value).format("DD/MM/YYYY"))}else e=n("<time><\/time>").attr("datetime",t.DisplayValue).text(t.DisplayValue);break;case"System.String":g||typeof i==typeof undefined||i==null||typeof i.Format==typeof undefined?e=t.DisplayValue:i.Format==0?(s=t.DisplayValue,s&&s!=""&&(s.toLowerCase().startsWith("mailto")||(s="mailto:"+s)),e=n("<a><\/a>").attr("href",s).text(t.DisplayValue)):i.Format==3?(h=t.DisplayValue,h&&h!=""&&(h.toLowerCase().startsWith("http")||(h="http://"+h)),v=n("<a><\/a>"),v.attr("href",h).text(t.DisplayValue),k&&v.attr("target","_top"),e=v):i.Format==4&&(y=t.DisplayValue,y&&y!=""&&(nt="http://go.microsoft.com/fwlink?linkid=8506&Symbol="+encodeURIComponent(y.toUpperCase()),p=n("<a><\/a>"),p.attr("href",nt).text(t.DisplayValue),k&&p.attr("target","_top"),e=p));break;default:e=t.DisplayValue}return g&&(w="#",o.Configuration.DetailsActionLink.EntityForm||o.Configuration.DetailsActionLink.URL==null||(w=URI(u(o.Configuration.DetailsActionLink)).addSearch(o.Configuration.DetailsActionLink.QueryStringIdParameterName,f.Id.toString())),b=n("<a><\/a>").attr("href",w).addClass("details-link").addClass("has-tooltip").attr("data-toggle","tooltip").attr("title",o.Configuration.DetailsActionLink.Tooltip).html(e),w!="#"&&k&&b.attr("target","_top"),o.Configuration.DetailsActionLink.EntityForm&&b.addClass("launch-modal").attr("data-entityformid",o.Configuration.DetailsActionLink.EntityForm.Id),e=b),e};f.prototype.addSortEventHandlers=function(){var i=this,r=i._element,t=r.children(".view-grid").find("table");t.find("th.sort-enabled a").on("click",function(r){var u,f,e,o;(r.preventDefault(),u=n(this).closest("th"),n(this).find(".fa-arrow-down").remove(),n(this).find(".fa-arrow-up").remove(),n(this).find(".sort-hint").remove(),f=u.data("sort-name"),e=u.data("sort-dir"),typeof f!=typeof undefined&&f!==!1&&f!==null&&f!=="")&&((typeof e==typeof undefined||e===!1)&&(e=""),e=="ASC"?(o=f+" DESC",u.data("sort-dir","DESC").removeClass("sort-asc").addClass("sort-desc"),u.attr("aria-sort","descending"),n(this).append(" ").append(n("<span><\/span>").addClass("fa").addClass("fa-arrow-down")).append("<span class='sr-only sort-hint'>. Activate to sort in ascending order<\/span>")):(o=f+" ASC",u.data("sort-dir","ASC").removeClass("sort-desc").addClass("sort-asc"),u.attr("aria-sort","ascending"),n(this).append(" ").append(n("<span><\/span>").addClass("fa").addClass("fa-arrow-up")).append("<span class='sr-only sort-hint'>. Activate to sort in descending order<\/span>")),u.addClass("sort"),t.data("sort-expression",o),t.find("th.sort a").each(function(){var i=n(this).closest("th"),t=i.data("sort-name");typeof t!=typeof undefined&&t!==!1&&t!==null&&t!==""&&t!=f&&(n(this).find(".fa-arrow-down").remove(),n(this).find(".fa-arrow-up").remove(),i.removeClass("sort-asc").removeClass("sort-desc").removeClass("sort").data("sort-dir","").removeAttr("aria-sort"))}),i.load(1))})};f.prototype.addDetailsActionLinkClickEventHandlers=function(){var t=this,i=t._element,r=t._layouts,u=r[t._activeLayoutIndex],f=t._enableActions,e=i.children(".view-grid").find("table");if(f)e.find(".details-link.launch-modal").on("click",function(t){var o;t.preventDefault();var s=n(this),h=n(this).closest("tr"),c=h.data("id"),r=i.children(".modal-form-details"),f=r.find("iframe"),l=f.data("page"),e=n(this).data("entityformid");if(e){o=l+"?id="+c+"&entityformid="+e+"&languagecode="+u.Configuration.LanguageCode;f.attr("src",o);f.on("load",function(){r.find(".form-loading").hide();r.find("iframe").contents().find("#EntityFormControl").show()});r.find(".form-loading").show();r.find("iframe").contents().find("#EntityFormControl").hide();r.modal();r.off("hidden.bs.modal.entitygrid").on("hidden.bs.modal.entitygrid",function(){s.closest(".action").children("a").trigger("focus")})}})};f.prototype.addEditActionLinkClickEventHandlers=function(){var t=this,i=t._element,r=t._layouts,u=r[t._activeLayoutIndex],f=t._enableActions,e=i.children(".view-grid").find("table");if(f)e.find(".edit-link.launch-modal").on("click",function(t){var o;t.preventDefault();var s=n(this),h=n(this).closest("tr"),c=h.data("id"),r=i.children(".modal-form-edit"),f=r.find("iframe"),l=f.data("page"),e=n(this).data("entityformid");if(e){o=l+"?id="+c+"&entityformid="+e+"&languagecode="+u.Configuration.LanguageCode;f.attr("src",o);f.on("load",function(){r.find(".form-loading").hide();r.find("iframe").contents().find("#EntityFormControl").show()});r.find(".form-loading").show();r.find("iframe").contents().find("#EntityFormControl").hide();r.modal();r.off("hidden.bs.modal.entitygrid").on("hidden.bs.modal.entitygrid",function(){s.closest(".action").children("a").trigger("focus")})}})};f.prototype.addDeleteActionLinkClickEventHandlers=function(){var o=this,f=o._element,h=o._layouts,e=h[o._activeLayoutIndex],c=o._enableActions,l=f.children(".view-grid").find("table"),s;if(c&&(e.Configuration.DeleteActionLink.Enabled||e.Configuration.DeleteActionLink.URL)){s=u(e.Configuration.DeleteActionLink);l.find(".delete-link").on("click",function(u){u.preventDefault();var c=n(this),l=n(this).closest("tr"),a=l.data("id"),o=f.children(".modal-delete"),h=o.find("button.primary");h.off("click");h.on("click",function(u){var c,l;u.preventDefault();n(this).attr("disabled","disabled").prepend("<span class='fa fa-spinner fa-spin' aria-hidden='true'><\/span>");c={};c.LogicalName=e.Configuration.EntityName;c.Id=a;l=JSON.stringify(c);n.ajax({type:"POST",contentType:"application/json",url:s,data:l}).done(function(){var u=f.children(".view-grid").find("tbody tr").length,t,n;u==1&&(t=f.children(".view-pagination"),n=t.data("current-page"),n>1&&(n--,t.data("current-page",n)));o.modal("hide");i(e.Configuration.DeleteActionLink.SuccessMessage,f,!0);r(f,e.Configuration.DeleteActionLink)}).fail(function(i){var r=i.getResponseHeader("content-type"),u=r.indexOf("json")>-1?n.parseJSON(i.responseText):{Message:i.status,InnerError:{Message:i.statusText}};o.modal("hide");t(u,f)}).always(function(){h.removeAttr("disabled","disabled").find(".fa-spin").remove()})});o.modal();o.off("hidden.bs.modal.entitygrid").on("hidden.bs.modal.entitygrid",function(){c.closest(".action").children("a").trigger("focus")})})}};f.prototype.addQualifyLeadActionLinkClickEventHandlers=function(){var o=this,e=o._element,c=o._layouts,f=c[o._activeLayoutIndex],l=o._enableActions,h=e.children(".view-grid").find("table"),s;if(l&&(f.Configuration.QualifyLeadActionLink.Enabled||f.Configuration.QualifyLeadActionLink.URL))if(s=u(f.Configuration.QualifyLeadActionLink),f.Configuration.QualifyLeadActionLink.ShowModal==1)h.find(".qualify-lead-link").on("click",function(u){u.preventDefault();var c=n(this),l=n(this).closest("tr"),a=l.data("id"),o=e.children(".modal-qualify"),h=o.find("button.primary");h.off("click");h.on("click",function(u){var c,l,v;u.preventDefault();n(this).attr("disabled","disabled").prepend("<span class='fa fa-spinner fa-spin' aria-hidden='true'><\/span>");c={};c.createAccount=!0;c.createContact=!0;c.createOpportunity=!0;l={};l.LogicalName=f.Configuration.EntityName;l.Id=a;c.entityReference=l;v=JSON.stringify(c);n.ajax({type:"POST",contentType:"application/json",url:s,data:v}).done(function(){o.modal("hide");i(f.Configuration.QualifyLeadActionLink.SuccessMessage,e,!0);r(e,f.Configuration.QualifyLeadActionLink)}).fail(function(i){var r=i.getResponseHeader("content-type"),u=r.indexOf("json")>-1?n.parseJSON(i.responseText):{Message:i.status,InnerError:{Message:i.statusText}};o.modal("hide");t(u,e)}).always(function(){h.removeAttr("disabled","disabled").find(".fa-spin").remove()})});o.modal();o.off("hidden.bs.modal.entitygrid").on("hidden.bs.modal.entitygrid",function(){c.closest(".action").children("a").trigger("focus")})});else h.find(".qualify-lead-link").on("click",function(u){var h,c;u.preventDefault();var l=n(this).closest("tr"),a=l.data("id"),o={};o.createAccount=!0;o.createContact=!0;o.createOpportunity=!0;h={};h.LogicalName=f.Configuration.EntityName;h.Id=a;o.entityReference=h;c=JSON.stringify(o);n.ajax({type:"POST",contentType:"application/json",url:s,data:c}).done(function(){i(f.Configuration.QualifyLeadActionLink.SuccessMessage,e,!0);r(e,f.Configuration.QualifyLeadActionLink)}).fail(function(i){var r=i.getResponseHeader("content-type"),u=r.indexOf("json")>-1?n.parseJSON(i.responseText):{Message:i.status,InnerError:{Message:i.statusText}};t(u,e)}).always(function(){})})};f.prototype.addCloseCaseActionLinkClickEventHandlers=function(){var o=this,e=o._element,c=o._layouts,f=c[o._activeLayoutIndex],l=o._enableActions,h=e.children(".view-grid").find("table"),s;if(l&&(f.Configuration.CloseIncidentActionLink.Enabled||f.Configuration.CloseIncidentActionLink.URL))if(s=u(f.Configuration.CloseIncidentActionLink),f.Configuration.CloseIncidentActionLink.ShowModal==1)h.find(".close-case-link").on("click",function(u){u.preventDefault();var c=n(this),l=n(this).closest("tr"),a=l.data("id"),o=e.children(".modal-closecase"),h=o.find("button.primary");h.off("click");h.on("click",function(u){var c,l,v,y,p;u.preventDefault();n(this).attr("disabled","disabled").prepend("<span class='fa fa-spinner fa-spin' aria-hidden='true'><\/span>");c={};l={};l.LogicalName=f.Configuration.EntityName;l.Id=a;c.entityReference=l;v=f.Configuration.CloseIncidentActionLink.DefaultResolution;y=f.Configuration.CloseIncidentActionLink.DefaultResolutionDescription;c.resolutionSubject=v;c.resolutionDescription=y;p=JSON.stringify(c);n.ajax({type:"POST",contentType:"application/json",url:s,data:p}).done(function(){o.modal("hide");i(f.Configuration.CloseIncidentActionLink.SuccessMessage,e,!0);r(e,f.Configuration.CloseIncidentActionLink)}).fail(function(i){var r=i.getResponseHeader("content-type"),u=r.indexOf("json")>-1?n.parseJSON(i.responseText):{Message:i.status,InnerError:{Message:i.statusText}};o.modal("hide");t(u,e)}).always(function(){h.removeAttr("disabled","disabled").find(".fa-spin").remove()})});o.modal();o.off("hidden.bs.modal.entitygrid").on("hidden.bs.modal.entitygrid",function(){c.closest(".action").children("a").trigger("focus")})});else h.find(".close-case-link").on("click",function(u){var c,l,a;u.preventDefault();var p=n(this),v=n(this).closest("tr"),y=v.data("id"),o={},h={};h.LogicalName=f.Configuration.EntityName;h.Id=y;o.entityReference=h;c=f.Configuration.CloseIncidentActionLink.DefaultResolution;l=f.Configuration.CloseIncidentActionLink.DefaultResolutionDescription;o.resolutionSubject=c;o.resolutionDescription=l;a=JSON.stringify(o);n.ajax({type:"POST",contentType:"application/json",url:s,data:a}).done(function(){i(f.Configuration.CloseIncidentActionLink.SuccessMessage,e,!0);r(e,f.Configuration.CloseIncidentActionLink)}).fail(function(i){var r=i.getResponseHeader("content-type"),u=r.indexOf("json")>-1?n.parseJSON(i.responseText):{Message:i.status,InnerError:{Message:i.statusText}};t(u,e)}).always(function(){})})};f.prototype.addConvertQuoteActionLinkClickEventHandlers=function(){var o=this,e=o._element,c=o._layouts,f=c[o._activeLayoutIndex],l=o._enableActions,h=e.children(".view-grid").find("table"),s;if(l&&(f.Configuration.ConvertQuoteToOrderActionLink.Enabled||f.Configuration.ConvertQuoteToOrderActionLink.URL))if(s=u(f.Configuration.ConvertQuoteToOrderActionLink),f.Configuration.ConvertQuoteToOrderActionLink.ShowModal==1)h.find(".convert-quote-link").on("click",function(u){u.preventDefault();var c=n(this),l=n(this).closest("tr"),a=l.data("id"),o=e.children(".modal-convert-quote"),h=o.find("button.primary");h.off("click");h.on("click",function(u){var c,l;u.preventDefault();n(this).attr("disabled","disabled").prepend("<span class='fa fa-spinner fa-spin' aria-hidden='true'><\/span>");c={};c.LogicalName=f.Configuration.EntityName;c.Id=a;l=JSON.stringify(c);n.ajax({type:"POST",contentType:"application/json",url:s,data:l}).done(function(){o.modal("hide");i(f.Configuration.ConvertQuoteToOrderActionLink.SuccessMessage,e,!0);r(e,f.Configuration.ConvertQuoteToOrderActionLink)}).fail(function(i){var r=i.getResponseHeader("content-type"),u=r.indexOf("json")>-1?n.parseJSON(i.responseText):{Message:i.status,InnerError:{Message:i.statusText}};o.modal("hide");t(u,e)}).always(function(){h.removeAttr("disabled","disabled").find(".fa-spin").remove()})});o.modal();o.off("hidden.bs.modal.entitygrid").on("hidden.bs.modal.entitygrid",function(){c.closest(".action").children("a").trigger("focus")})});else h.find(".convert-quote-link").on("click",function(u){var h;u.preventDefault();var c=n(this).closest("tr"),l=c.data("id"),o={};o.LogicalName=f.Configuration.EntityName;o.Id=l;h=JSON.stringify(o);n.ajax({type:"POST",contentType:"application/json",url:s,data:h}).done(function(){i(f.Configuration.ConvertQuoteToOrderActionLink.SuccessMessage,e,!0);r(e,f.Configuration.ConvertQuoteToOrderActionLink)}).fail(function(i){var r=i.getResponseHeader("content-type"),u=r.indexOf("json")>-1?n.parseJSON(i.responseText):{Message:i.status,InnerError:{Message:i.statusText}};t(u,e)}).always(function(){})})};f.prototype.addConvertOrderActionLinkClickEventHandlers=function(){var o=this,e=o._element,c=o._layouts,f=c[o._activeLayoutIndex],l=o._enableActions,h=e.children(".view-grid").find("table"),s;if(l&&(f.Configuration.ConvertOrderToInvoiceActionLink.Enabled||f.Configuration.ConvertOrderToInvoiceActionLink.URL))if(s=u(f.Configuration.ConvertOrderToInvoiceActionLink),f.Configuration.ConvertOrderToInvoiceActionLink.ShowModal==1)h.find(".convert-order-link").on("click",function(u){u.preventDefault();var c=n(this),l=n(this).closest("tr"),a=l.data("id"),o=e.children(".modal-convert-order"),h=o.find("button.primary");h.off("click");h.on("click",function(u){var c,l;u.preventDefault();n(this).attr("disabled","disabled").prepend("<span class='fa fa-spinner fa-spin' aria-hidden='true'><\/span>");c={};c.LogicalName=f.Configuration.EntityName;c.Id=a;l=JSON.stringify(c);n.ajax({type:"POST",contentType:"application/json",url:s,data:l}).done(function(){o.modal("hide");i(f.Configuration.ConvertOrderToInvoiceActionLink.SuccessMessage,e,!0);r(e,f.Configuration.ConvertOrderToInvoiceActionLink)}).fail(function(i){var r=i.getResponseHeader("content-type"),u=r.indexOf("json")>-1?n.parseJSON(i.responseText):{Message:i.status,InnerError:{Message:i.statusText}};o.modal("hide");t(u,e)}).always(function(){h.removeAttr("disabled","disabled").find(".fa-spin").remove()})});o.modal();o.off("hidden.bs.modal.entitygrid").on("hidden.bs.modal.entitygrid",function(){c.closest(".action").children("a").trigger("focus")})});else h.find(".convert-order-link").on("click",function(u){var h;u.preventDefault();var c=n(this).closest("tr"),l=c.data("id"),o={};o.LogicalName=f.Configuration.EntityName;o.Id=l;h=JSON.stringify(o);n.ajax({type:"POST",contentType:"application/json",url:s,data:h}).done(function(){i(f.Configuration.ConvertOrderToInvoiceActionLink.SuccessMessage,e,!0);r(e,f.Configuration.ConvertOrderToInvoiceActionLink)}).fail(function(i){var r=i.getResponseHeader("content-type"),u=r.indexOf("json")>-1?n.parseJSON(i.responseText):{Message:i.status,InnerError:{Message:i.statusText}};t(u,e)}).always(function(){})})};f.prototype.addCalculateOpportunityActionLinkClickEventHandlers=function(){var o=this,e=o._element,c=o._layouts,f=c[o._activeLayoutIndex],l=o._enableActions,h=e.children(".view-grid").find("table"),s;if(l&&(f.Configuration.CalculateOpportunityActionLink.Enabled||f.Configuration.CalculateOpportunityActionLink.URL))if(s=u(f.Configuration.CalculateOpportunityActionLink),f.Configuration.CalculateOpportunityActionLink.ShowModal==1)h.find(".calculate-opportunity-link").on("click",function(u){u.preventDefault();var c=n(this),l=n(this).closest("tr"),a=l.data("id"),o=e.children(".modal-calculate"),h=o.find("button.primary");h.off("click");h.on("click",function(u){var c,l;u.preventDefault();n(this).attr("disabled","disabled").prepend("<span class='fa fa-spinner fa-spin' aria-hidden='true'><\/span>");c={};c.LogicalName=f.Configuration.EntityName;c.Id=a;l=JSON.stringify(c);n.ajax({type:"POST",contentType:"application/json",url:s,data:l}).done(function(){o.modal("hide");i(f.Configuration.CalculateOpportunityActionLink.SuccessMessage,e,!0);r(e,f.Configuration.CalculateOpportunityActionLink)}).fail(function(i){var r=i.getResponseHeader("content-type"),u=r.indexOf("json")>-1?n.parseJSON(i.responseText):{Message:i.status,InnerError:{Message:i.statusText}};o.modal("hide");t(u,e)}).always(function(){h.removeAttr("disabled","disabled").find(".fa-spin").remove()})});o.modal();o.off("hidden.bs.modal.entitygrid").on("hidden.bs.modal.entitygrid",function(){c.closest(".action").children("a").trigger("focus")})});else h.find(".calculate-opportunity-link").on("click",function(u){var h;u.preventDefault();var c=n(this).closest("tr"),l=c.data("id"),o={};o.LogicalName=f.Configuration.EntityName;o.Id=l;h=JSON.stringify(o);n.ajax({type:"POST",contentType:"application/json",url:s,data:h}).done(function(){i(f.Configuration.CalculateOpportunityActionLink.SuccessMessage,e,!0);r(e,f.Configuration.CalculateOpportunityActionLink)}).fail(function(i){var r=i.getResponseHeader("content-type"),u=r.indexOf("json")>-1?n.parseJSON(i.responseText):{Message:i.status,InnerError:{Message:i.statusText}};t(u,e)}).always(function(){})})};f.prototype.addResolveCaseActionLinkClickEventHandlers=function(){var s=this,o=s._element,c=s._layouts,e=c[s._activeLayoutIndex],l=s._enableActions,a=o.children(".view-grid").find("table"),h,f;if(l&&(e.Configuration.ResolveCaseActionLink.Enabled||e.Configuration.ResolveCaseActionLink.URL)){h=u(e.Configuration.ResolveCaseActionLink);f=o.children(".modal-resolvecase");a.find(".resolve-case-link").on("click",function(u){u.preventDefault();var c=n(this),l=n(this).closest("tr"),a=l.data("id"),s=f.find("button.primary");s.off("click");s.on("click",function(u){var c,l,v,y,p;u.preventDefault();n(this).attr("disabled","disabled").prepend("<span class='fa fa-spinner fa-spin' aria-hidden='true'><\/span>");c={};l={};l.LogicalName=e.Configuration.EntityName;l.Id=a;c.entityReference=l;v=f.find(".resolution-input");c.resolutionSubject=v.val();y=f.find(".resolution-description-input");c.resolutionDescription=y.val();p=JSON.stringify(c);n.ajax({type:"POST",contentType:"application/json",url:h,data:p}).done(function(){f.modal("hide");i(e.Configuration.ResolveCaseActionLink.SuccessMessage,o,!0);r(o,e.Configuration.ResolveCaseActionLink)}).fail(function(i){var r=i.getResponseHeader("content-type"),u=r.indexOf("json")>-1?n.parseJSON(i.responseText):{Message:i.status,InnerError:{Message:i.statusText}};f.modal("hide");t(u,o)}).always(function(){s.removeAttr("disabled","disabled").find(".fa-spin").remove()})});f.modal();f.off("hidden.bs.modal.entitygrid").on("hidden.bs.modal.entitygrid",function(){f.find(".resolution-input").val("");f.find(".resolution-description-input").val("");c.closest(".action").children("a").trigger("focus")})})}};f.prototype.addReopenCaseActionLinkClickEventHandlers=function(){var o=this,e=o._element,c=o._layouts,f=c[o._activeLayoutIndex],l=o._enableActions,h=e.children(".view-grid").find("table"),s;if(l&&(f.Configuration.ReopenCaseActionLink.Enabled||f.Configuration.ReopenCaseActionLink.URL))if(s=u(f.Configuration.ReopenCaseActionLink),f.Configuration.ReopenCaseActionLink.ShowModal==1)h.find(".reopen-case-link").on("click",function(u){u.preventDefault();var c=n(this),l=n(this).closest("tr"),a=l.data("id"),o=e.children(".modal-reopencase"),h=o.find("button.primary");h.off("click");h.on("click",function(u){var c,l;u.preventDefault();n(this).attr("disabled","disabled").prepend("<span class='fa fa-spinner fa-spin' aria-hidden='true'><\/span>");c={};c.LogicalName=f.Configuration.EntityName;c.Id=a;l=JSON.stringify(c);n.ajax({type:"POST",contentType:"application/json",url:s,data:l}).done(function(){o.modal("hide");i(f.Configuration.ReopenCaseActionLink.SuccessMessage,e,!0);r(e,f.Configuration.ReopenCaseActionLink)}).fail(function(i){var r=i.getResponseHeader("content-type"),u=r.indexOf("json")>-1?n.parseJSON(i.responseText):{Message:i.status,InnerError:{Message:i.statusText}};o.modal("hide");t(u,e)}).always(function(){h.removeAttr("disabled","disabled").find(".fa-spin").remove()})});o.modal();o.off("hidden.bs.modal.entitygrid").on("hidden.bs.modal.entitygrid",function(){c.closest(".action").children("a").trigger("focus")})});else h.find(".reopen-case-link").on("click",function(u){var h;u.preventDefault();var c=n(this).closest("tr"),l=c.data("id"),o={};o.LogicalName=f.Configuration.EntityName;o.Id=l;h=JSON.stringify(o);n.ajax({type:"POST",contentType:"application/json",url:s,data:h}).done(function(){i(f.Configuration.ReopenCaseActionLink.SuccessMessage,e,!0);r(e,f.Configuration.ReopenCaseActionLink)}).fail(function(i){var r=i.getResponseHeader("content-type"),u=r.indexOf("json")>-1?n.parseJSON(i.responseText):{Message:i.status,InnerError:{Message:i.statusText}};t(u,e)}).always(function(){})})};f.prototype.addCancelCaseActionLinkClickEventHandlers=function(){var o=this,e=o._element,c=o._layouts,f=c[o._activeLayoutIndex],l=o._enableActions,h=e.children(".view-grid").find("table"),s;if(l&&(f.Configuration.CancelCaseActionLink.Enabled||f.Configuration.CancelCaseActionLink.URL))if(s=u(f.Configuration.CancelCaseActionLink),f.Configuration.CancelCaseActionLink.ShowModal==1)h.find(".cancel-case-link").on("click",function(u){u.preventDefault();var c=n(this),l=n(this).closest("tr"),a=l.data("id"),o=e.children(".modal-cancelcase"),h=o.find("button.primary");h.off("click");h.on("click",function(u){var c,l;u.preventDefault();n(this).attr("disabled","disabled").prepend("<span class='fa fa-spinner fa-spin' aria-hidden='true'><\/span>");c={};c.LogicalName=f.Configuration.EntityName;c.Id=a;l=JSON.stringify(c);n.ajax({type:"POST",contentType:"application/json",url:s,data:l}).done(function(){o.modal("hide");i(f.Configuration.CancelCaseActionLink.SuccessMessage,e,!0);r(e,f.Configuration.CancelCaseActionLink)}).fail(function(i){var r=i.getResponseHeader("content-type"),u=r.indexOf("json")>-1?n.parseJSON(i.responseText):{Message:i.status,InnerError:{Message:i.statusText}};o.modal("hide");t(u,e)}).always(function(){h.removeAttr("disabled","disabled").find(".fa-spin").remove()})});o.modal();o.off("hidden.bs.modal.entitygrid").on("hidden.bs.modal.entitygrid",function(){c.closest(".action").children("a").trigger("focus")})});else h.find(".cancel-case-link").on("click",function(u){var h;u.preventDefault();var c=n(this).closest("tr"),l=c.data("id"),o={};o.LogicalName=f.Configuration.EntityName;o.Id=l;h=JSON.stringify(o);n.ajax({type:"POST",contentType:"application/json",url:s,data:h}).done(function(){i(f.Configuration.CancelCaseActionLink.SuccessMessage,e,!0);r(e,f.Configuration.CancelCaseActionLink)}).fail(function(i){var r=i.getResponseHeader("content-type"),u=r.indexOf("json")>-1?n.parseJSON(i.responseText):{Message:i.status,InnerError:{Message:i.statusText}};t(u,e)}).always(function(){})})};f.prototype.addActivateActionLinkClickEventHandlers=function(){var o=this,e=o._element,c=o._layouts,f=c[o._activeLayoutIndex],l=o._enableActions,h=e.children(".view-grid").find("table"),s;if(l&&(f.Configuration.ActivateActionLink.Enabled||f.Configuration.ActivateActionLink.URL))if(s=u(f.Configuration.ActivateActionLink),f.Configuration.ActivateActionLink.ShowModal==1)h.find(".activate-link").on("click",function(u){u.preventDefault();var c=n(this),l=n(this).closest("tr"),a=l.data("id"),o=e.children(".modal-activate"),h=o.find("button.primary");h.off("click");h.on("click",function(u){var c,l;u.preventDefault();n(this).attr("disabled","disabled").prepend("<span class='fa fa-spinner fa-spin' aria-hidden='true'><\/span>");c={};c.LogicalName=f.Configuration.EntityName;c.Id=a;l=JSON.stringify(c);n.ajax({type:"POST",contentType:"application/json",url:s,data:l}).done(function(){o.modal("hide");i(f.Configuration.ActivateActionLink.SuccessMessage,e,!0);r(e,f.Configuration.ActivateActionLink)}).fail(function(i){var r=i.getResponseHeader("content-type"),u=r.indexOf("json")>-1?n.parseJSON(i.responseText):{Message:i.status,InnerError:{Message:i.statusText}};o.modal("hide");t(u,e)}).always(function(){h.removeAttr("disabled","disabled").find(".fa-spin").remove()})});o.modal();o.off("hidden.bs.modal.entitygrid").on("hidden.bs.modal.entitygrid",function(){c.closest(".action").children("a").trigger("focus")})});else h.find(".activate-link").on("click",function(u){var h;u.preventDefault();var c=n(this).closest("tr"),l=c.data("id"),o={};o.LogicalName=f.Configuration.EntityName;o.Id=l;h=JSON.stringify(o);n.ajax({type:"POST",contentType:"application/json",url:s,data:h}).done(function(){i(f.Configuration.ActivateActionLink.SuccessMessage,e,!0);r(e,f.Configuration.ActivateActionLink)}).fail(function(i){var r=i.getResponseHeader("content-type"),u=r.indexOf("json")>-1?n.parseJSON(i.responseText):{Message:i.status,InnerError:{Message:i.statusText}};t(u,e)})})};f.prototype.addDeactivateActionLinkClickEventHandlers=function(){var o=this,e=o._element,c=o._layouts,f=c[o._activeLayoutIndex],l=o._enableActions,h=e.children(".view-grid").find("table"),s;if(l&&(f.Configuration.DeactivateActionLink.Enabled||f.Configuration.DeactivateActionLink.URL))if(s=u(f.Configuration.DeactivateActionLink),f.Configuration.DeactivateActionLink.ShowModal==1)h.find(".deactivate-link").on("click",function(u){u.preventDefault();var c=n(this),l=n(this).closest("tr"),a=l.data("id"),o=e.children(".modal-deactivate"),h=o.find("button.primary");h.off("click");h.on("click",function(u){var c,l;u.preventDefault();n(this).attr("disabled","disabled").prepend("<span class='fa fa-spinner fa-spin' aria-hidden='true'><\/span>");c={};c.LogicalName=f.Configuration.EntityName;c.Id=a;l=JSON.stringify(c);n.ajax({type:"POST",contentType:"application/json",url:s,data:l}).done(function(){o.modal("hide");i(f.Configuration.DeactivateActionLink.SuccessMessage,e,!0);r(e,f.Configuration.DeactivateActionLink)}).fail(function(i){var r=i.getResponseHeader("content-type"),u=r.indexOf("json")>-1?n.parseJSON(i.responseText):{Message:i.status,InnerError:{Message:i.statusText}};o.modal("hide");t(u,e)}).always(function(){h.removeAttr("disabled","disabled").find(".fa-spin").remove()})});o.modal();o.off("hidden.bs.modal.entitygrid").on("hidden.bs.modal.entitygrid",function(){c.closest(".action").children("a").trigger("focus")})});else h.find(".deactivate-link").on("click",function(u){var h;u.preventDefault();var c=n(this).closest("tr"),l=c.data("id"),o={};o.LogicalName=f.Configuration.EntityName;o.Id=l;h=JSON.stringify(o);n.ajax({type:"POST",contentType:"application/json",url:s,data:h}).done(function(){i(f.Configuration.DeactivateActionLink.SuccessMessage,e,!0);r(e,f.Configuration.DeactivateActionLink)}).fail(function(i){var r=i.getResponseHeader("content-type"),u=r.indexOf("json")>-1?n.parseJSON(i.responseText):{Message:i.status,InnerError:{Message:i.statusText}};t(u,e)})})};f.prototype.addActivateQuoteActionLinkClickEventHandlers=function(){var o=this,e=o._element,c=o._layouts,f=c[o._activeLayoutIndex],l=o._enableActions,h=e.children(".view-grid").find("table"),s;if(l&&(f.Configuration.ActivateQuoteActionLink.Enabled||f.Configuration.ActivateQuoteActionLink.URL))if(s=u(f.Configuration.ActivateQuoteActionLink),f.Configuration.ActivateQuoteActionLink.ShowModal==1)h.find(".activate-quote-link").on("click",function(u){u.preventDefault();var c=n(this),l=n(this).closest("tr"),a=l.data("id"),o=e.children(".modal-activate-quote"),h=o.find("button.primary");h.off("click");h.on("click",function(u){var c,l;u.preventDefault();n(this).attr("disabled","disabled").prepend("<span class='fa fa-spinner fa-spin' aria-hidden='true'><\/span>");c={};c.LogicalName=f.Configuration.EntityName;c.Id=a;l=JSON.stringify(c);n.ajax({type:"POST",contentType:"application/json",url:s,data:l}).done(function(){o.modal("hide");i(f.Configuration.ActivateQuoteActionLink.SuccessMessage,e,!0);r(e,f.Configuration.ActivateQuoteActionLin)}).fail(function(i){var r=i.getResponseHeader("content-type"),u=r.indexOf("json")>-1?n.parseJSON(i.responseText):{Message:i.status,InnerError:{Message:i.statusText}};o.modal("hide");t(u,e)}).always(function(){h.removeAttr("disabled","disabled").find(".fa-spin").remove()})});o.modal();o.off("hidden.bs.modal.entitygrid").on("hidden.bs.modal.entitygrid",function(){c.closest(".action").children("a").trigger("focus")})});else h.find(".activate-quote-link").on("click",function(u){var h;u.preventDefault();var c=n(this).closest("tr"),l=c.data("id"),o={};o.LogicalName=f.Configuration.EntityName;o.Id=l;h=JSON.stringify(o);n.ajax({type:"POST",contentType:"application/json",url:s,data:h}).done(function(){i(f.Configuration.ActivateQuoteActionLink.SuccessMessage,e,!0);r(e,f.Configuration.ActivateQuoteActionLin)}).fail(function(i){var r=i.getResponseHeader("content-type"),u=r.indexOf("json")>-1?n.parseJSON(i.responseText):{Message:i.status,InnerError:{Message:i.statusText}};t(u,e)})})};f.prototype.addSetOpportunityOnHoldActionLinkClickEventHandlers=function(){var o=this,e=o._element,c=o._layouts,f=c[o._activeLayoutIndex],l=o._enableActions,h=e.children(".view-grid").find("table"),s;if(l&&(f.Configuration.SetOpportunityOnHoldActionLink.Enabled||f.Configuration.SetOpportunityOnHoldActionLink.URL))if(s=u(f.Configuration.SetOpportunityOnHoldActionLink),f.Configuration.SetOpportunityOnHoldActionLink.ShowModal==1)h.find(".set-opportunity-on-hold-link").on("click",function(u){u.preventDefault();var c=n(this),l=n(this).closest("tr"),a=l.data("id"),o=e.children(".modal-set-opportunity-on-hold"),h=o.find("button.primary");h.off("click");h.on("click",function(u){var c,l;u.preventDefault();n(this).attr("disabled","disabled").prepend("<span class='fa fa-spinner fa-spin' aria-hidden='true'><\/span>");c={};c.LogicalName=f.Configuration.EntityName;c.Id=a;l=JSON.stringify(c);n.ajax({type:"POST",contentType:"application/json",url:s,data:l}).done(function(){o.modal("hide");i(f.Configuration.SetOpportunityOnHoldActionLink.SuccessMessage,e,!0);r(e,f.Configuration.SetOpportunityOnHoldActionLink)}).fail(function(i){var r=i.getResponseHeader("content-type"),u=r.indexOf("json")>-1?n.parseJSON(i.responseText):{Message:i.status,InnerError:{Message:i.statusText}};o.modal("hide");t(u,e)}).always(function(){h.removeAttr("disabled","disabled").find(".fa-spin").remove()})});o.modal();o.off("hidden.bs.modal.entitygrid").on("hidden.bs.modal.entitygrid",function(){c.closest(".action").children("a").trigger("focus")})});else h.find(".set-opportunity-on-hold-link").on("click",function(u){var h;u.preventDefault();var c=n(this).closest("tr"),l=c.data("id"),o={};o.LogicalName=f.Configuration.EntityName;o.Id=l;h=JSON.stringify(o);n.ajax({type:"POST",contentType:"application/json",url:s,data:h}).done(function(){i(f.Configuration.SetOpportunityOnHoldActionLink.SuccessMessage,e,!0);r(e,f.Configuration.SetOpportunityOnHoldActionLink)}).fail(function(i){var r=i.getResponseHeader("content-type"),u=r.indexOf("json")>-1?n.parseJSON(i.responseText):{Message:i.status,InnerError:{Message:i.statusText}};t(u,e)})})};f.prototype.addReopenOpportunityActionLinkClickEventHandlers=function(){var o=this,e=o._element,c=o._layouts,f=c[o._activeLayoutIndex],l=o._enableActions,h=e.children(".view-grid").find("table"),s;if(l&&(f.Configuration.ReopenOpportunityActionLink.Enabled||f.Configuration.ReopenOpportunityActionLink.URL))if(s=u(f.Configuration.ReopenOpportunityActionLink),f.Configuration.ReopenOpportunityActionLink.ShowModal==1)h.find(".reopen-opportunity-link").on("click",function(u){u.preventDefault();var c=n(this),l=n(this).closest("tr"),a=l.data("id"),o=e.children(".modal-reopen-opportunity"),h=o.find("button.primary");h.off("click");h.on("click",function(u){var c,l;u.preventDefault();n(this).attr("disabled","disabled").prepend("<span class='fa fa-spinner fa-spin' aria-hidden='true'><\/span>");c={};c.LogicalName=f.Configuration.EntityName;c.Id=a;l=JSON.stringify(c);n.ajax({type:"POST",contentType:"application/json",url:s,data:l}).done(function(){o.modal("hide");i(f.Configuration.ReopenOpportunityActionLink.SuccessMessage,e,!0);r(e,f.Configuration.ReopenOpportunityActionLink)}).fail(function(i){var r=i.getResponseHeader("content-type"),u=r.indexOf("json")>-1?n.parseJSON(i.responseText):{Message:i.status,InnerError:{Message:i.statusText}};o.modal("hide");t(u,e)}).always(function(){h.removeAttr("disabled","disabled").find(".fa-spin").remove()})});o.modal();o.off("hidden.bs.modal.entitygrid").on("hidden.bs.modal.entitygrid",function(){c.closest(".action").children("a").trigger("focus")})});else h.find(".reopen-opportunity-link").on("click",function(u){var h;u.preventDefault();var c=n(this).closest("tr"),l=c.data("id"),o={};o.LogicalName=f.Configuration.EntityName;o.Id=l;h=JSON.stringify(o);n.ajax({type:"POST",contentType:"application/json",url:s,data:h}).done(function(){i(f.Configuration.ReopenOpportunityActionLink.SuccessMessage,e,!0);r(e,f.Configuration.ReopenOpportunityActionLink)}).fail(function(i){var r=i.getResponseHeader("content-type"),u=r.indexOf("json")>-1?n.parseJSON(i.responseText):{Message:i.status,InnerError:{Message:i.statusText}};t(u,e)})})};f.prototype.addWinOpportunityActionLinkClickEventHandlers=function(){var o=this,e=o._element,c=o._layouts,f=c[o._activeLayoutIndex],l=o._enableActions,h=e.children(".view-grid").find("table"),s;if(l&&(f.Configuration.WinOpportunityActionLink.Enabled||f.Configuration.WinOpportunityActionLink.URL))if(s=u(f.Configuration.WinOpportunityActionLink),f.Configuration.WinOpportunityActionLink.ShowModal==1)h.find(".win-opportunity-link").on("click",function(u){u.preventDefault();var c=n(this),l=n(this).closest("tr"),a=l.data("id"),o=e.children(".modal-win-opportunity"),h=o.find("button.primary");h.off("click");h.on("click",function(u){var c,l;u.preventDefault();n(this).attr("disabled","disabled").prepend("<span class='fa fa-spinner fa-spin' aria-hidden='true'><\/span>");c={};c.LogicalName=f.Configuration.EntityName;c.Id=a;l=JSON.stringify(c);n.ajax({type:"POST",contentType:"application/json",url:s,data:l}).done(function(){o.modal("hide");i(f.Configuration.WinOpportunityActionLink.SuccessMessage,e,!0);r(e,f.Configuration.WinOpportunityActionLink)}).fail(function(i){var r=i.getResponseHeader("content-type"),u=r.indexOf("json")>-1?n.parseJSON(i.responseText):{Message:i.status,InnerError:{Message:i.statusText}};o.modal("hide");t(u,e)}).always(function(){h.removeAttr("disabled","disabled").find(".fa-spin").remove()})});o.modal();o.off("hidden.bs.modal.entitygrid").on("hidden.bs.modal.entitygrid",function(){c.closest(".action").children("a").trigger("focus")})});else h.find(".win-opportunity-link").on("click",function(u){var h;u.preventDefault();var c=n(this).closest("tr"),l=c.data("id"),o={};o.LogicalName=f.Configuration.EntityName;o.Id=l;h=JSON.stringify(o);n.ajax({type:"POST",contentType:"application/json",url:s,data:h}).done(function(){i(f.Configuration.WinOpportunityActionLink.SuccessMessage,e,!0);r(e,f.Configuration.WinOpportunityActionLink)}).fail(function(i){var r=i.getResponseHeader("content-type"),u=r.indexOf("json")>-1?n.parseJSON(i.responseText):{Message:i.status,InnerError:{Message:i.statusText}};t(u,e)})})};f.prototype.addLoseOpportunityActionLinkClickEventHandlers=function(){var o=this,e=o._element,c=o._layouts,f=c[o._activeLayoutIndex],l=o._enableActions,h=e.children(".view-grid").find("table"),s;if(l&&(f.Configuration.LoseOpportunityActionLink.Enabled||f.Configuration.LoseOpportunityActionLink.URL))if(s=u(f.Configuration.LoseOpportunityActionLink),f.Configuration.LoseOpportunityActionLink.ShowModal==1)h.find(".lose-opportunity-link").on("click",function(u){u.preventDefault();var c=n(this),l=n(this).closest("tr"),a=l.data("id"),o=e.children(".modal-lose-opportunity"),h=o.find("button.primary");h.off("click");h.on("click",function(u){var c,l;u.preventDefault();n(this).attr("disabled","disabled").prepend("<span class='fa fa-spinner fa-spin' aria-hidden='true'><\/span>");c={};c.LogicalName=f.Configuration.EntityName;c.Id=a;l=JSON.stringify(c);n.ajax({type:"POST",contentType:"application/json",url:s,data:l}).done(function(){o.modal("hide");i(f.Configuration.LoseOpportunityActionLink.SuccessMessage,e,!0);r(e,f.Configuration.LoseOpportunityActionLink)}).fail(function(i){var r=i.getResponseHeader("content-type"),u=r.indexOf("json")>-1?n.parseJSON(i.responseText):{Message:i.status,InnerError:{Message:i.statusText}};o.modal("hide");t(u,e)}).always(function(){h.removeAttr("disabled","disabled").find(".fa-spin").remove()})});o.modal();o.off("hidden.bs.modal.entitygrid").on("hidden.bs.modal.entitygrid",function(){c.closest(".action").children("a").trigger("focus")})});else h.find(".lose-opportunity-link").on("click",function(u){var h;u.preventDefault();var c=n(this).closest("tr"),l=c.data("id"),o={};o.LogicalName=f.Configuration.EntityName;o.Id=l;h=JSON.stringify(o);n.ajax({type:"POST",contentType:"application/json",url:s,data:h}).done(function(){i(f.Configuration.LoseOpportunityActionLink.SuccessMessage,e,!0);r(e,f.Configuration.LoseOpportunityActionLink)}).fail(function(i){var r=i.getResponseHeader("content-type"),u=r.indexOf("json")>-1?n.parseJSON(i.responseText):{Message:i.status,InnerError:{Message:i.statusText}};t(u,e)})})};f.prototype.addGenerateQuoteFromOpportunityActionLinkClickEventHandlers=function(){var o=this,e=o._element,c=o._layouts,f=c[o._activeLayoutIndex],l=o._enableActions,h=e.children(".view-grid").find("table"),s;if(l&&(f.Configuration.GenerateQuoteFromOpportunityActionLink.Enabled||f.Configuration.GenerateQuoteFromOpportunityActionLink.URL))if(s=u(f.Configuration.GenerateQuoteFromOpportunityActionLink),f.Configuration.GenerateQuoteFromOpportunityActionLink.ShowModal==1)h.find(".generate-quote-from-opportunity-link").on("click",function(u){u.preventDefault();var c=n(this),l=n(this).closest("tr"),a=l.data("id"),o=e.children(".modal-generate-quote-from-opportunity"),h=o.find("button.primary");h.off("click");h.on("click",function(u){var c,l;u.preventDefault();n(this).attr("disabled","disabled").prepend("<span class='fa fa-spinner fa-spin' aria-hidden='true'><\/span>");c={};c.LogicalName=f.Configuration.EntityName;c.Id=a;l=JSON.stringify(c);n.ajax({type:"POST",contentType:"application/json",url:s,data:l}).done(function(){o.modal("hide");i(f.Configuration.GenerateQuoteFromOpportunityActionLink.SuccessMessage,e,!0);r(e,f.Configuration.GenerateQuoteFromOpportunityActionLink)}).fail(function(i){var r=i.getResponseHeader("content-type"),u=r.indexOf("json")>-1?n.parseJSON(i.responseText):{Message:i.status,InnerError:{Message:i.statusText}};o.modal("hide");t(u,e)}).always(function(){h.removeAttr("disabled","disabled").find(".fa-spin").remove()})});o.modal();o.off("hidden.bs.modal.entitygrid").on("hidden.bs.modal.entitygrid",function(){c.closest(".action").children("a").trigger("focus")})});else h.find(".generate-quote-from-opportunity-link").on("click",function(u){var h;u.preventDefault();var c=n(this).closest("tr"),l=c.data("id"),o={};o.LogicalName=f.Configuration.EntityName;o.Id=l;h=JSON.stringify(o);n.ajax({type:"POST",contentType:"application/json",url:s,data:h}).done(function(){i(f.Configuration.GenerateQuoteFromOpportunityActionLink.SuccessMessage,e,!0);r(e,f.Configuration.GenerateQuoteFromOpportunityActionLink)}).fail(function(i){var r=i.getResponseHeader("content-type"),u=r.indexOf("json")>-1?n.parseJSON(i.responseText):{Message:i.status,InnerError:{Message:i.statusText}};t(u,e)})})};f.prototype.addDisassociateActionLinkClickEventHandlers=function(){var o=this,f=o._element,c=o._layouts,e=c[o._activeLayoutIndex],l=o._enableActions,h=f.children(".view-grid").find("table"),s;if(l&&e.Configuration.DisassociateActionLink.Enabled&&e.Configuration.DisassociateActionLink.URL)if(s=u(e.Configuration.DisassociateActionLink),e.Configuration.DisassociateActionLink.ShowModal==1)h.find(".disassociate-link").on("click",function(u){u.preventDefault();var c=n(this),l=n(this).closest("tr"),a=l.data("id"),o=f.children(".modal-disassociate"),h=o.find("button.primary");h.off("click");h.on("click",function(u){var d,v,l,y,c,g;u.preventDefault();n(this).attr("disabled","disabled").prepend("<span class='fa fa-spinner fa-spin' aria-hidden='true'><\/span>");var p=f.data("ref-entity"),w=f.data("ref-id"),b=f.data("ref-rel"),k=f.data("ref-rel-role");p&&w&&b&&(d={LogicalName:p,Id:w},v={SchemaName:b},k&&(v.PrimaryEntityRole=k),l={},l.LogicalName=e.Configuration.EntityName,l.Id=a,y=[],y[0]=l,c={},c.target=d,c.RelatedEntities=y,c.Relationship=v,g=JSON.stringify(c),n.ajax({type:"POST",contentType:"application/json",url:s,data:g}).done(function(){o.modal("hide");i(e.Configuration.DisassociateActionLink.SuccessMessage,f,!0);r(f,e.Configuration.DisassociateActionLink)}).fail(function(i){var r=i.getResponseHeader("content-type"),u=r.indexOf("json")>-1?n.parseJSON(i.responseText):{Message:i.status,InnerError:{Message:i.statusText}};o.modal("hide");t(u,f)}).always(function(){h.removeAttr("disabled","disabled").find(".fa-spin").remove()}))});o.modal();o.off("hidden.bs.modal.entitygrid").on("hidden.bs.modal.entitygrid",function(){c.closest(".action").children("a").trigger("focus")})});else h.find(".disassociate-link").on("click",function(u){var w,c,h,l,o,b;u.preventDefault();var g=n(this),k=n(this).closest("tr"),d=k.data("id"),a=f.data("ref-entity"),v=f.data("ref-id"),y=f.data("ref-rel"),p=f.data("ref-rel-role");a&&v&&y&&(w={LogicalName:a,Id:v},c={SchemaName:y},p&&(c.PrimaryEntityRole=p),h={},h.LogicalName=e.Configuration.EntityName,h.Id=d,l=[],l[0]=h,o={},o.target=w,o.RelatedEntities=l,o.Relationship=c,b=JSON.stringify(o),n.ajax({type:"POST",contentType:"application/json",url:s,data:b}).done(function(){i(e.Configuration.DisassociateActionLink.SuccessMessage,f,!0);r(f,e.Configuration.DisassociateActionLink)}).fail(function(i){var r=i.getResponseHeader("content-type"),u=r.indexOf("json")>-1?n.parseJSON(i.responseText):{Message:i.status,InnerError:{Message:i.statusText}};t(u,f)}))})};f.prototype.addWorkflowActionLinkClickEventHandlers=function(){var o=this,f=o._element,l=o._layouts,u=l[o._activeLayoutIndex],a=o._enableActions,c=f.children(".view-grid").find("table"),s,h,e;if(a&&u.Configuration.ItemActionLinks&&u.Configuration.ItemActionLinks.length!=0){for(s=null,h=0;h<u.Configuration.ItemActionLinks.length;h++)if(e=u.Configuration.ItemActionLinks[h],e!=null&&typeof e.Type!=typeof undefined&&e.Type==7&&typeof e.Workflow!=typeof undefined&&e.Workflow!=null){s=e;break}if(s!=null)if(s.ShowModal==1)c.find(".workflow-link").on("click",function(e){e.preventDefault();var l=n(this),a=n(this).closest("tr"),v=a.data("id"),s=n(this).data("workflowid"),o=f.children(".modal-run-workflow"),h=o.find("button.primary"),c=n(this).data("url");if(s&&c){h.off("click");h.on("click",function(e){var a,y,l,p,w,b,k;for(e.preventDefault(),n(this).attr("disabled","disabled").prepend("<span class='fa fa-spinner fa-spin' aria-hidden='true'><\/span>"),a=null,y=0;y<u.Configuration.ItemActionLinks.length;y++)if(l=u.Configuration.ItemActionLinks[y],l!=null&&typeof l.Type!=typeof undefined&&l.Type==7&&typeof l.Workflow!=typeof undefined&&l.Workflow!=null&&l.Workflow.Id==s){a=l;break}p={};w={};w.LogicalName="workflow";w.Id=s;p.workflow=w;b={};b.LogicalName=u.Configuration.EntityName;b.Id=v;p.entity=b;k=JSON.stringify(p);n.ajax({type:"POST",contentType:"application/json",url:c,data:k}).done(function(){o.modal("hide");i(a!=null?a.SuccessMessage:null,f,!0);r(f,a)}).fail(function(i){var r=i.getResponseHeader("content-type"),u=r.indexOf("json")>-1?n.parseJSON(i.responseText):{Message:i.status,InnerError:{Message:i.statusText}};o.modal("hide");t(u,f)}).always(function(){h.removeAttr("disabled","disabled").find(".fa-spin").remove()})});o.modal();o.off("hidden.bs.modal.entitygrid").on("hidden.bs.modal.entitygrid",function(){l.closest(".action").children("a").trigger("focus")})}});else c.find(".workflow-link").on("click",function(e){var s,h,o,c,l,a,p;e.preventDefault();var w=n(this).closest("tr"),b=w.data("id"),v=n(this).data("workflowid"),y=n(this).data("url");if(v&&y){for(s=null,h=0;h<u.Configuration.ItemActionLinks.length;h++)if(o=u.Configuration.ItemActionLinks[h],o!=null&&typeof o.Type!=typeof undefined&&o.Type==7&&typeof o.Workflow!=typeof undefined&&o.Workflow!=null&&o.Workflow.Id==v){s=o;break}c={};l={};l.LogicalName="workflow";l.Id=v;c.workflow=l;a={};a.LogicalName=u.Configuration.EntityName;a.Id=b;c.entity=a;p=JSON.stringify(c);n.ajax({type:"POST",contentType:"application/json",url:y,data:p}).done(function(){i(s!=null?s.SuccessMessage:null,f,!0);r(f,s)}).fail(function(i){var r=i.getResponseHeader("content-type"),u=r.indexOf("json")>-1?n.parseJSON(i.responseText):{Message:i.status,InnerError:{Message:i.statusText}};t(u,f)})}})}};f.prototype.initializePagination=function(t,i){var u=this,f=u._element,r=f.children(".view-pagination");if(typeof t==typeof undefined||t===!1||t==null){r.hide();return}if(typeof t.PageSize==typeof undefined||t.PageSize===!1||t.PageSize==null||typeof t.PageCount==typeof undefined||t.PageCount===!1||t.PageCount==null||typeof t.PageNumber==typeof undefined||t.PageNumber===!1||t.PageNumber==null||typeof t.ItemCount==typeof undefined||t.ItemCount===!1||t.ItemCount==null){r.hide();return}if(t.PageCount<=1){r.hide();return}r.data("pagesize",t.PageSize).data("pages",t.PageCount).data("current-page",t.PageNumber).data("count",t.ItemCount).off("click").pagination({total_pages:r.data("pages"),current_page:r.data("current-page"),callback:function(t,i){var r,f;t.preventDefault();r=n(t.target).closest("li");r.not(".disabled").length>0&&r.not(".active").length>0&&(f=u.getCurrentFilter(),u.load(i,f,!u.isRelatedRecordFilterEnabled(),t.currentTarget))}}).show();i&&r.find("a").filter(function(){return n(this).text()==n(i).text()}).trigger("focus")};f.prototype.hidePagination=function(){this._element.children(".view-pagination").hide()};String.prototype.startsWith||(String.prototype.startsWith=function(n,t){return t=t||0,this.lastIndexOf(n,t)===t})}(jQuery),function(n){function t(t){this._element=n(t);this._associate=this._element.data("associate")||{};this._url=this._element.attr("data-url");this._parent=this._element.parent(".entity-grid");this._success=!1}function i(t,i){if(typeof t!=typeof undefined&&t!==!1&&t!=null){console.log(t);var u=i.find(".modal-body"),r=i.find(".alert-danger.error");r.length==0?r=n("<div><\/div>").addClass("alert alert-block alert-danger error clearfix"):r.empty();typeof t.Message!=typeof undefined&&t.Message!==!1&&t.Message!=null&&(typeof t.Message=="number"?r.append("<p><span class='fa fa-exclamation-triangle' aria-hidden='true'><\/span> "+t.Message+" Error<\/p>"):r.append("<p><span class='fa fa-exclamation-triangle' aria-hidden='true'><\/span> "+t.Message+"<\/p>"));typeof t.InnerError!=typeof undefined&&t.InnerError!==!1&&t.InnerError!=null&&(r.append("<p>"+t.InnerError.Message+"<\/p>"),typeof t.InnerError.StackTrace!=typeof undefined&&t.InnerError.StackTrace!==!1&&t.InnerError.StackTrace!=null&&r.append(n("<textarea><\/textarea>").text(t.InnerError.StackTrace)));u.prepend(r)}}n(document).ready(function(){n(".entity-associate").each(function(){new t(n(this)).render()})});t.prototype.render=function(){var t=this,i=t._element,f=i.find(".panel-body.selected-records"),r=i.find(".entity-grid"),e=i.find(".modal-footer .btn-primary"),u=i.find(".modal-associate"),o=t._parent;e.on("click",function(){u.find(".alert-danger.error").remove();t.associate()});r.children(".view-grid").on("click","tr",function(){var i=n(this),r=n(this).attr("data-entity"),u=n(this).attr("data-id"),e=n(this).attr("data-name"),o=f.find("div[data-entity='"+r+"'][data-id='"+u+"']"),h=o.length>0,t,s;if(!i.hasClass("selected")){o.remove();return}h||(t=n("<div class='item pull-left btn btn-default'><\/div>").attr("data-entity",r).attr("data-id",u).attr("data-name",e).append(n("<span class='name'><\/span>").html(e)),s=n("<span class='remove'><span class='fa fa-times' aria-hidden='true'><\/span><\/span>").on("click",function(){t.remove();i.find("td:first").empty();i.removeClass("selected").removeClass("info")}),t.append(s),f.append(t))});u.on("show.bs.modal",function(){r.trigger("refresh")});u.on("hidden.bs.modal",function(){u.find(".alert-danger.error").remove();f.empty();r.children(".view-toolbar").find(".view-search input.query").val("");r.children(".view-grid").find("tbody tr.selected").each(function(){n(this).find("td:first").empty();n(this).removeClass("selected").removeClass("info")});t._success&&o.trigger("refresh")})};t.prototype.associate=function(){var t=this,u=t._element,l=t._associate,f=t._url,a=u.find(".panel-body.selected-records"),s=u.find(".modal-footer button.primary"),e=u.find(".modal-associate"),h,o,r,c;if(f==null||f==""){h={Message:"System Error",InnerError:{Message:"The URL to the service for this Associate Request could determined."}};i(h,e);return}(o=n.map(a.find("div.item"),function(t){return{LogicalName:n(t).attr("data-entity"),Id:n(t).attr("data-id"),Name:n(t).attr("data-name")}}),o.length<=0)||(s.attr("disabled","disabled").prepend("<span class='fa fa-spinner fa-spin' aria-hidden='true'><\/span>"),r=l,r.RelatedEntities=o,console.log(r),c=JSON.stringify(r),n.ajax({type:"POST",contentType:"application/json",url:f,data:c}).done(function(){t._success=!0;e.modal("hide")}).fail(function(t){var r=t.getResponseHeader("content-type"),u=r.indexOf("json")>-1?n.parseJSON(t.responseText):{Message:t.status,InnerError:{Message:t.statusText}};i(u,e)}).always(function(){s.removeAttr("disabled","disabled").find(".fa-spin").remove()}))}}(jQuery),function(n){function t(t){this._element=n(t);this._target=this._element.data("target")||{};this._url=this._element.attr("data-url");this._lookupDataFieldName=this._element.attr("data-lookup-datafieldname")}n(document).ready(function(){n(".entity-lookup").each(function(){new t(n(this)).render()})});t.prototype.render=function(){var t=this,i=t._element,u=i.find(".entity-grid"),f=i.find(".modal-footer button.primary"),r=i.find(".modal-lookup");i.find(".modal-footer .remove-value").on("click",function(n){n.preventDefault();t.clearFieldValue()});f.on("click",function(){r.find(".alert-danger.error").remove();t.setFieldValue()});n("#"+t._lookupDataFieldName+"_name").on("keyup",function(n){(n.keyCode===8||n.keyCode===46)&&(t.clearFieldValue(),n.stopPropagation(),n.preventDefault())});i.closest("td.lookup.form-control-cell").find(".clearlookupfield").on("click",function(n){n.preventDefault();t.clearFieldValue()}).toggle(!!n("#"+t._lookupDataFieldName).val());i.closest("td.lookup.form-control-cell").find(".launchentitylookup").on("click",function(n){n.preventDefault();r.modal()});r.on("show.bs.modal",function(){u.trigger("refresh")});r.on("hidden.bs.modal",function(){r.find(".alert-danger.error").remove();u.children(".view-toolbar").find(".view-search input.query").val("");u.children(".view-grid").find("tr.selected").each(function(){n(this).find("td:first").empty();n(this).removeClass("selected").removeClass("info")});u.children(".view-toolbar").find(".toggle-related-filter").addClass("active")})};t.prototype.setFieldValue=function(){var o=this,i=o._element,s=i.find(".modal-footer button.primary"),h=i.find(".modal-lookup"),c=i.find(".entity-grid"),u=o._lookupDataFieldName,f=n("#"+u),r,e,t;f.length!=0&&(r=n("#"+u+"_name"),r.length!=0)&&(e=n("#"+u+"_entityname"),e.length!=0)&&((t=n.map(c.children(".view-grid").find("tr.selected"),function(t){return{LogicalName:n(t).attr("data-entity"),Id:n(t).attr("data-id"),Name:n(t).attr("data-name")}}),t.length<=0)||(s.attr("disabled","disabled").prepend("<span class='fa fa-spinner fa-spin' aria-hidden='true'><\/span>"),r.val(t[0].Name),e.val(t[0].LogicalName),f.val(t[0].Id).trigger("change"),h.modal("hide"),i.closest("td.lookup.form-control-cell").find(".clearlookupfield").show(),s.removeAttr("disabled","disabled").find(".fa-spin").remove(),setIsDirty&&n.isFunction(setIsDirty)&&setIsDirty(f.attr("id")),r.trigger("focus")))};t.prototype.clearFieldValue=function(){var e=this,i=e._element,o=i.find(".modal-footer button.primary"),s=i.find(".modal-lookup"),r=e._lookupDataFieldName,u=n("#"+r),t,f;u.length!=0&&(t=n("#"+r+"_name"),t.length!=0)&&(f=n("#"+r+"_entityname"),f.length!=0)&&(o.attr("disabled","disabled").prepend("<span class='fa fa-spinner fa-spin' aria-hidden='true'><\/span>"),t.val(""),f.val(""),u.val("").trigger("change"),s.modal("hide"),o.removeAttr("disabled","disabled").find(".fa-spin").remove(),i.closest("td.lookup.form-control-cell").find(".clearlookupfield").hide(),setIsDirty&&n.isFunction(setIsDirty)&&setIsDirty(u.attr("id")),t.trigger("focus"))}}(jQuery),function(n){function t(t){this._element=n(t);this._lookupElement=n("#"+this._element.data("lookup-element"));this._lookupEntityNameElement=n("#"+this._element.data("lookup-element")+"_entityname");this._path=this._element.data("path");this._controlId=this._element.data("controlid");this._formName=this._element.data("formname")}n(document).ready(function(){n("iframe.quickform").each(function(){new t(n(this)).bindEvents()})});t.prototype.bindEvents=function(){var t=this,i=t._element,r=t._lookupElement,u=t._lookupEntityNameElement;i.on("load.quickform",function(){t.resize()});r.on("change.quickform",function(){var i=n(this).val(),r;i==null||i==""?t.clear():(r=u.val(),t.reload(i,r))})};t.prototype.reload=function(n,t,i){var r=this,f=r._element,e=r._formName,o=r._controlId,s=r._path,u;typeof i=="undefined"&&(i="");u=s+"?entityid="+n+"&entityname="+t+"&entityprimarykeyname="+i+"&formname="+e+"&controlid="+o;f.attr("src",u)};t.prototype.clear=function(){var t=this,n=t._element;n.attr("src","about:blank");n.css("height",0)};t.prototype.resize=function(){var t=this,n=t._element;n.css("height",0);n.css("height",n[0].contentWindow.document.body.scrollHeight+"px")}}(jQuery),function(n,t){"object"==typeof exports?module.exports=t(require("./punycode"),require("./IPv6"),require("./SecondLevelDomains")):"function"==typeof define&&define.amd?define(["./punycode","./IPv6","./SecondLevelDomains"],t):n.URI=t(n.punycode,n.IPv6,n.SecondLevelDomains,n)}(this,function(n,t,i,r){function u(n,t){return(this instanceof u)?(void 0===n&&(n="undefined"!=typeof location?location.href+"":""),this.href(n),void 0!==t?this.absoluteTo(t):this):new u(n,t)}function l(n){return n.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function v(n){return void 0===n?"Undefined":String(Object.prototype.toString.call(n)).slice(8,-1)}function e(n){return"Array"===v(n)}function a(n,t){var i,r,u;if(e(t)){for(i=0,r=t.length;i<r;i++)if(!a(n,t[i]))return!1;return!0}for(u=v(t),i=0,r=n.length;i<r;i++)if("RegExp"===u){if("string"==typeof n[i]&&n[i].match(t))return!0}else if(n[i]===t)return!0;return!1}function p(n,t){if(!e(n)||!e(t)||n.length!==t.length)return!1;n.sort();t.sort();for(var i=0,r=n.length;i<r;i++)if(n[i]!==t[i])return!1;return!0}function b(n){return escape(n)}function y(n){return encodeURIComponent(n).replace(/[!'()*]/g,b).replace(/\*/g,"%2A")}var k=r&&r.URI,f,h,s,o,c,w;u.version="1.13.2";f=u.prototype;h=Object.prototype.hasOwnProperty;u._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,duplicateQueryParameters:u.duplicateQueryParameters,escapeQuerySpace:u.escapeQuerySpace}};u.duplicateQueryParameters=!1;u.escapeQuerySpace=!0;u.protocol_expression=/^[a-z][a-z0-9.+-]*$/i;u.idn_expression=/[^a-z0-9\.-]/i;u.punycode_expression=/(xn--)/i;u.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/;u.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/;u.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?\u00ab\u00bb\u201c\u201d\u2018\u2019]))/ig;u.findUri={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?\u00ab\u00bb\u201c\u201d\u201e\u2018\u2019]+$/};u.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"};u.invalid_hostname_characters=/[^a-zA-Z0-9\.-]/;u.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src"};u.getDomAttribute=function(n){if(n&&n.nodeName){var t=n.nodeName.toLowerCase();return"input"===t&&"image"!==n.type?void 0:u.domAttributes[t]}};u.encode=y;u.decode=decodeURIComponent;u.iso8859=function(){u.encode=escape;u.decode=unescape};u.unicode=function(){u.encode=y;u.decode=decodeURIComponent};u.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/ig,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/ig,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}}};u.encodeQuery=function(n,t){var i=u.encode(n+"");return void 0===t&&(t=u.escapeQuerySpace),t?i.replace(/%20/g,"+"):i};u.decodeQuery=function(n,t){n+="";void 0===t&&(t=u.escapeQuerySpace);try{return u.decode(t?n.replace(/\+/g,"%20"):n)}catch(i){return n}};u.recodePath=function(n){n=(n+"").split("/");for(var t=0,i=n.length;t<i;t++)n[t]=u.encodePathSegment(u.decode(n[t]));return n.join("/")};u.decodePath=function(n){n=(n+"").split("/");for(var t=0,i=n.length;t<i;t++)n[t]=u.decodePathSegment(n[t]);return n.join("/")};s={encode:"encode",decode:"decode"};c=function(n,t){return function(i){return u[t](i+"").replace(u.characters[n][t].expression,function(i){return u.characters[n][t].map[i]})}};for(o in s)u[o+"PathSegment"]=c("pathname",s[o]);u.encodeReserved=c("reserved","encode");u.parse=function(n,t){var i;return t||(t={}),i=n.indexOf("#"),-1<i&&(t.fragment=n.substring(i+1)||null,n=n.substring(0,i)),i=n.indexOf("?"),-1<i&&(t.query=n.substring(i+1)||null,n=n.substring(0,i)),"//"===n.substring(0,2)?(t.protocol=null,n=n.substring(2),n=u.parseAuthority(n,t)):(i=n.indexOf(":"),-1<i&&(t.protocol=n.substring(0,i)||null,t.protocol&&!t.protocol.match(u.protocol_expression)?t.protocol=void 0:"file"===t.protocol?n=n.substring(i+3):"//"===n.substring(i+1,i+3)?(n=n.substring(i+3),n=u.parseAuthority(n,t)):(n=n.substring(i+1),t.urn=!0))),t.path=n,t};u.parseHost=function(n,t){var i=n.indexOf("/"),r;return-1===i&&(i=n.length),"["===n.charAt(0)?(r=n.indexOf("]"),t.hostname=n.substring(1,r)||null,t.port=n.substring(r+2,i)||null,"/"===t.port&&(t.port=null)):n.indexOf(":")!==n.lastIndexOf(":")?(t.hostname=n.substring(0,i)||null,t.port=null):(r=n.substring(0,i).split(":"),t.hostname=r[0]||null,t.port=r[1]||null),t.hostname&&"/"!==n.substring(i).charAt(0)&&(i++,n="/"+n),n.substring(i)||"/"};u.parseAuthority=function(n,t){return n=u.parseUserinfo(n,t),u.parseHost(n,t)};u.parseUserinfo=function(n,t){var i=n.indexOf("/"),r=-1<i?n.lastIndexOf("@",i):n.indexOf("@");return-1<r&&(-1===i||r<i)?(i=n.substring(0,r).split(":"),t.username=i[0]?u.decode(i[0]):null,i.shift(),t.password=i[0]?u.decode(i.join(":")):null,n=n.substring(r+1)):(t.username=null,t.password=null),n};u.parseQuery=function(n,t){if(!n)return{};if(n=n.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,""),!n)return{};for(var i={},o=n.split("&"),s=o.length,r,f,e=0;e<s;e++)r=o[e].split("="),f=u.decodeQuery(r.shift(),t),r=r.length?u.decodeQuery(r.join("="),t):null,i[f]?("string"==typeof i[f]&&(i[f]=[i[f]]),i[f].push(r)):i[f]=r;return i};u.build=function(n){var t="";return n.protocol&&(t+=n.protocol+":"),!n.urn&&(t||n.hostname)&&(t+="//"),t+=u.buildAuthority(n)||"","string"==typeof n.path&&("/"!==n.path.charAt(0)&&"string"==typeof n.hostname&&(t+="/"),t+=n.path),"string"==typeof n.query&&n.query&&(t+="?"+n.query),"string"==typeof n.fragment&&n.fragment&&(t+="#"+n.fragment),t};u.buildHost=function(n){var t="";if(n.hostname)t=u.ip6_expression.test(n.hostname)?t+("["+n.hostname+"]"):t+n.hostname;else return"";return n.port&&(t+=":"+n.port),t};u.buildAuthority=function(n){return u.buildUserinfo(n)+u.buildHost(n)};u.buildUserinfo=function(n){var t="";return n.username&&(t+=u.encode(n.username),n.password&&(t+=":"+u.encode(n.password)),t+="@"),t};u.buildQuery=function(n,t,i){var o="",s,r,f,c;for(r in n)if(h.call(n,r)&&r)if(e(n[r]))for(s={},f=0,c=n[r].length;f<c;f++)void 0!==n[r][f]&&void 0===s[n[r][f]+""]&&(o+="&"+u.buildQueryParameter(r,n[r][f],i),!0!==t&&(s[n[r][f]+""]=!0));else void 0!==n[r]&&(o+="&"+u.buildQueryParameter(r,n[r],i));return o.substring(1)};u.buildQueryParameter=function(n,t,i){return u.encodeQuery(n,i)+(null!==t?"="+u.encodeQuery(t,i):"")};u.addQuery=function(n,t,i){if("object"==typeof t)for(var r in t)h.call(t,r)&&u.addQuery(n,r,t[r]);else if("string"==typeof t)void 0===n[t]?n[t]=i:("string"==typeof n[t]&&(n[t]=[n[t]]),e(i)||(i=[i]),n[t]=n[t].concat(i));else throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");};u.removeQuery=function(n,t,i){var r,s,f,o;if(e(t))for(i=0,r=t.length;i<r;i++)n[t[i]]=void 0;else if("object"==typeof t)for(r in t)h.call(t,r)&&u.removeQuery(n,r,t[r]);else if("string"==typeof t)if(void 0!==i){if(n[t]===i)n[t]=void 0;else if(e(n[t])){if(r=n[t],s={},e(i))for(f=0,o=i.length;f<o;f++)s[i[f]]=!0;else s[i]=!0;for(f=0,o=r.length;f<o;f++)void 0!==s[r[f]]&&(r.splice(f,1),o--,f--);n[t]=r}}else n[t]=void 0;else throw new TypeError("URI.addQuery() accepts an object, string as the first parameter");};u.hasQuery=function(n,t,i,r){if("object"==typeof t){for(var f in t)if(h.call(t,f)&&!u.hasQuery(n,f,t[f]))return!1;return!0}if("string"!=typeof t)throw new TypeError("URI.hasQuery() accepts an object, string as the name parameter");switch(v(i)){case"Undefined":return t in n;case"Boolean":return n=Boolean(e(n[t])?n[t].length:n[t]),i===n;case"Function":return!!i(n[t],t,n);case"Array":return e(n[t])?(r?a:p)(n[t],i):!1;case"RegExp":return e(n[t])?r?a(n[t],i):!1:Boolean(n[t]&&n[t].match(i));case"Number":i=String(i);case"String":return e(n[t])?r?a(n[t],i):!1:n[t]===i;default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter");}};u.commonPath=function(n,t){for(var r=Math.min(n.length,t.length),i=0;i<r;i++)if(n.charAt(i)!==t.charAt(i)){i--;break}return 1>i?n.charAt(0)===t.charAt(0)&&"/"===n.charAt(0)?"/":"":(("/"!==n.charAt(i)||"/"!==t.charAt(i))&&(i=n.substring(0,i).lastIndexOf("/")),n.substring(0,i+1))};u.withinString=function(n,t,i){var r,f,e;i||(i={});var o=i.start||u.findUri.start,s=i.end||u.findUri.end,h=i.trim||u.findUri.trim;for(o.lastIndex=0;;){if(r=o.exec(n),!r)break;(r=r.index,i.ignoreHtml&&(f=n.slice(Math.max(r-3,0),r),f&&/[a-z0-9-]=["']?$/i.test(f)))||(f=r+n.slice(r).search(s),e=n.slice(r,f).replace(h,""),i.ignore&&i.ignore.test(e)||(f=r+e.length,e=t(e,r,f,n),n=n.slice(0,r)+e+n.slice(f),o.lastIndex=r+e.length))}return o.lastIndex=0,n};u.ensureValidHostname=function(t){if(t.match(u.invalid_hostname_characters)){if(!n)throw new TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-] and Punycode.js is not available');if(n.toASCII(t).match(u.invalid_hostname_characters))throw new TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-]');}};u.noConflict=function(n){return n?(n={URI:this.noConflict()},r.URITemplate&&"function"==typeof r.URITemplate.noConflict&&(n.URITemplate=r.URITemplate.noConflict()),r.IPv6&&"function"==typeof r.IPv6.noConflict&&(n.IPv6=r.IPv6.noConflict()),r.SecondLevelDomains&&"function"==typeof r.SecondLevelDomains.noConflict&&(n.SecondLevelDomains=r.SecondLevelDomains.noConflict()),n):(r.URI===this&&(r.URI=k),this)};f.build=function(n){return!0===n?this._deferred_build=!0:(void 0===n||this._deferred_build)&&(this._string=u.build(this._parts),this._deferred_build=!1),this};f.clone=function(){return new u(this)};f.valueOf=f.toString=function(){return this.build(!1)._string};s={protocol:"protocol",username:"username",password:"password",hostname:"hostname",port:"port"};c=function(n){return function(t,i){return void 0===t?this._parts[n]||"":(this._parts[n]=t||null,this.build(!i),this)}};for(o in s)f[o]=c(s[o]);s={query:"?",fragment:"#"};c=function(n,t){return function(i,r){return void 0===i?this._parts[n]||"":(null!==i&&(i+="",i.charAt(0)===t&&(i=i.substring(1))),this._parts[n]=i,this.build(!r),this)}};for(o in s)f[o]=c(o,s[o]);s={search:["?","query"],hash:["#","fragment"]};c=function(n,t){return function(i,r){var u=this[n](i,r);return"string"==typeof u&&u.length?t+u:u}};for(o in s)f[o]=c(s[o][1],s[o][0]);f.pathname=function(n,t){if(void 0===n||!0===n){var i=this._parts.path||(this._parts.hostname?"/":"");return n?u.decodePath(i):i}return this._parts.path=n?u.recodePath(n):"/",this.build(!t),this};f.path=f.pathname;f.href=function(n,t){var f,i,r;if(void 0===n)return this.toString();if(this._string="",this._parts=u._parts(),i=n instanceof u,r="object"==typeof n&&(n.hostname||n.path||n.pathname),n.nodeName&&(r=u.getDomAttribute(n),n=n[r]||"",r=!1),!i&&r&&void 0!==n.pathname&&(n=n.toString()),"string"==typeof n)this._parts=u.parse(n,this._parts);else if(i||r)for(f in i=i?n._parts:n,i)h.call(this._parts,f)&&(this._parts[f]=i[f]);else throw new TypeError("invalid input");return this.build(!t),this};f.is=function(n){var r=!1,f=!1,e=!1,t=!1,s=!1,h=!1,c=!1,o=!this._parts.urn;this._parts.hostname&&(o=!1,f=u.ip4_expression.test(this._parts.hostname),e=u.ip6_expression.test(this._parts.hostname),r=f||e,s=(t=!r)&&i&&i.has(this._parts.hostname),h=t&&u.idn_expression.test(this._parts.hostname),c=t&&u.punycode_expression.test(this._parts.hostname));switch(n.toLowerCase()){case"relative":return o;case"absolute":return!o;case"domain":case"name":return t;case"sld":return s;case"ip":return r;case"ip4":case"ipv4":case"inet4":return f;case"ip6":case"ipv6":case"inet6":return e;case"idn":return h;case"url":return!this._parts.urn;case"urn":return!!this._parts.urn;case"punycode":return c}return null};var d=f.protocol,g=f.port,nt=f.hostname;return f.protocol=function(n,t){if(void 0!==n&&n&&(n=n.replace(/:(\/\/)?$/,""),!n.match(u.protocol_expression)))throw new TypeError('Protocol "'+n+"\" contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]");return d.call(this,n,t)},f.scheme=f.protocol,f.port=function(n,t){if(this._parts.urn)return void 0===n?"":this;if(void 0!==n&&(0===n&&(n=null),n&&(n+="",":"===n.charAt(0)&&(n=n.substring(1)),n.match(/[^0-9]/))))throw new TypeError('Port "'+n+'" contains characters other than [0-9]');return g.call(this,n,t)},f.hostname=function(n,t){if(this._parts.urn)return void 0===n?"":this;if(void 0!==n){var i={};u.parseHost(n,i);n=i.hostname}return nt.call(this,n,t)},f.host=function(n,t){return this._parts.urn?void 0===n?"":this:void 0===n?this._parts.hostname?u.buildHost(this._parts):"":(u.parseHost(n,this._parts),this.build(!t),this)},f.authority=function(n,t){return this._parts.urn?void 0===n?"":this:void 0===n?this._parts.hostname?u.buildAuthority(this._parts):"":(u.parseAuthority(n,this._parts),this.build(!t),this)},f.userinfo=function(n,t){if(this._parts.urn)return void 0===n?"":this;if(void 0===n){if(!this._parts.username)return"";var i=u.buildUserinfo(this._parts);return i.substring(0,i.length-1)}return"@"!==n[n.length-1]&&(n+="@"),u.parseUserinfo(n,this._parts),this.build(!t),this},f.resource=function(n,t){var i;return void 0===n?this.path()+this.search()+this.hash():(i=u.parse(n),this._parts.path=i.path,this._parts.query=i.query,this._parts.fragment=i.fragment,this.build(!t),this)},f.subdomain=function(n,t){if(this._parts.urn)return void 0===n?"":this;if(void 0===n){if(!this._parts.hostname||this.is("IP"))return"";var i=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,i)||""}return i=this._parts.hostname.length-this.domain().length,i=this._parts.hostname.substring(0,i),i=new RegExp("^"+l(i)),n&&"."!==n.charAt(n.length-1)&&(n+="."),n&&u.ensureValidHostname(n),this._parts.hostname=this._parts.hostname.replace(i,n),this.build(!t),this},f.domain=function(n,t){if(this._parts.urn)return void 0===n?"":this;if("boolean"==typeof n&&(t=n,n=void 0),void 0===n){if(!this._parts.hostname||this.is("IP"))return"";var i=this._parts.hostname.match(/\./g);return i&&2>i.length?this._parts.hostname:(i=this._parts.hostname.length-this.tld(t).length-1,i=this._parts.hostname.lastIndexOf(".",i-1)+1,this._parts.hostname.substring(i)||"")}if(!n)throw new TypeError("cannot set domain empty");return u.ensureValidHostname(n),!this._parts.hostname||this.is("IP")?this._parts.hostname=n:(i=new RegExp(l(this.domain())+"$"),this._parts.hostname=this._parts.hostname.replace(i,n)),this.build(!t),this},f.tld=function(n,t){if(this._parts.urn)return void 0===n?"":this;if("boolean"==typeof n&&(t=n,n=void 0),void 0===n){if(!this._parts.hostname||this.is("IP"))return"";var r=this._parts.hostname.lastIndexOf("."),r=this._parts.hostname.substring(r+1);return!0!==t&&i&&i.list[r.toLowerCase()]?i.get(this._parts.hostname)||r:r}if(n)if(n.match(/[^a-zA-Z0-9-]/))if(i&&i.is(n))r=new RegExp(l(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(r,n);else throw new TypeError('TLD "'+n+'" contains characters other than [A-Z0-9]');else{if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");r=new RegExp(l(this.tld())+"$");this._parts.hostname=this._parts.hostname.replace(r,n)}else throw new TypeError("cannot set TLD empty");return this.build(!t),this},f.directory=function(n,t){if(this._parts.urn)return void 0===n?"":this;if(void 0===n||!0===n){if(!this._parts.path&&!this._parts.hostname)return"";if("/"===this._parts.path)return"/";var i=this._parts.path.length-this.filename().length-1,i=this._parts.path.substring(0,i)||(this._parts.hostname?"/":"");return n?u.decodePath(i):i}return i=this._parts.path.length-this.filename().length,i=this._parts.path.substring(0,i),i=new RegExp("^"+l(i)),this.is("relative")||(n||(n="/"),"/"!==n.charAt(0)&&(n="/"+n)),n&&"/"!==n.charAt(n.length-1)&&(n+="/"),n=u.recodePath(n),this._parts.path=this._parts.path.replace(i,n),this.build(!t),this},f.filename=function(n,t){var i,r;return this._parts.urn?void 0===n?"":this:void 0===n||!0===n?!this._parts.path||"/"===this._parts.path?"":(i=this._parts.path.lastIndexOf("/"),i=this._parts.path.substring(i+1),n?u.decodePathSegment(i):i):(i=!1,"/"===n.charAt(0)&&(n=n.substring(1)),n.match(/\.?\//)&&(i=!0),r=new RegExp(l(this.filename())+"$"),n=u.recodePath(n),this._parts.path=this._parts.path.replace(r,n),i?this.normalizePath(t):this.build(!t),this)},f.suffix=function(n,t){if(this._parts.urn)return void 0===n?"":this;if(void 0===n||!0===n){if(!this._parts.path||"/"===this._parts.path)return"";var i=this.filename(),r=i.lastIndexOf(".");return-1===r?"":(i=i.substring(r+1),i=/^[a-z0-9%]+$/i.test(i)?i:"",n?u.decodePathSegment(i):i)}if("."===n.charAt(0)&&(n=n.substring(1)),i=this.suffix())r=n?new RegExp(l(i)+"$"):new RegExp(l("."+i)+"$");else{if(!n)return this;this._parts.path+="."+u.recodePath(n)}return r&&(n=u.recodePath(n),this._parts.path=this._parts.path.replace(r,n)),this.build(!t),this},f.segment=function(n,t,i){var u=this._parts.urn?":":"/",r=this.path(),f="/"===r.substring(0,1),r=r.split(u),o;if(void 0!==n&&"number"!=typeof n&&(i=t,t=n,n=void 0),void 0!==n&&"number"!=typeof n)throw Error('Bad segment "'+n+'", must be 0-based integer');if(f&&r.shift(),0>n&&(n=Math.max(r.length+n,0)),void 0===t)return void 0===n?r:r[n];if(null===n||void 0===r[n])if(e(t))for(r=[],n=0,o=t.length;n<o;n++)(t[n].length||r.length&&r[r.length-1].length)&&(r.length&&!r[r.length-1].length&&r.pop(),r.push(t[n]));else(t||"string"==typeof t)&&(""===r[r.length-1]?r[r.length-1]=t:r.push(t));else t||"string"==typeof t&&t.length?r[n]=t:r.splice(n,1);return f&&r.unshift(""),this.path(r.join(u),i)},f.segmentCoded=function(n,t,i){var r,f;if("number"!=typeof n&&(i=t,t=n,n=void 0),void 0===t){if(n=this.segment(n,t,i),e(n))for(r=0,f=n.length;r<f;r++)n[r]=u.decode(n[r]);else n=void 0!==n?u.decode(n):void 0;return n}if(e(t))for(r=0,f=t.length;r<f;r++)t[r]=u.decode(t[r]);else t="string"==typeof t?u.encode(t):t;return this.segment(n,t,i)},w=f.query,f.query=function(n,t){if(!0===n)return u.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("function"==typeof n){var i=u.parseQuery(this._parts.query,this._parts.escapeQuerySpace),r=n.call(this,i);return this._parts.query=u.buildQuery(r||i,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!t),this}return void 0!==n&&"string"!=typeof n?(this._parts.query=u.buildQuery(n,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!t),this):w.call(this,n,t)},f.setQuery=function(n,t,i){var f=u.parseQuery(this._parts.query,this._parts.escapeQuerySpace),r;if("object"==typeof n)for(r in n)h.call(n,r)&&(f[r]=n[r]);else if("string"==typeof n)f[n]=void 0!==t?t:null;else throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");return this._parts.query=u.buildQuery(f,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof n&&(i=t),this.build(!i),this},f.addQuery=function(n,t,i){var r=u.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return u.addQuery(r,n,void 0===t?null:t),this._parts.query=u.buildQuery(r,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof n&&(i=t),this.build(!i),this},f.removeQuery=function(n,t,i){var r=u.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return u.removeQuery(r,n,t),this._parts.query=u.buildQuery(r,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof n&&(i=t),this.build(!i),this},f.hasQuery=function(n,t,i){var r=u.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return u.hasQuery(r,n,t,i)},f.setSearch=f.setQuery,f.addSearch=f.addQuery,f.removeSearch=f.removeQuery,f.hasSearch=f.hasQuery,f.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizeQuery(!1).normalizeFragment(!1).build():this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()},f.normalizeProtocol=function(n){return"string"==typeof this._parts.protocol&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!n)),this},f.normalizeHostname=function(i){return this._parts.hostname&&(this.is("IDN")&&n?this._parts.hostname=n.toASCII(this._parts.hostname):this.is("IPv6")&&t&&(this._parts.hostname=t.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!i)),this},f.normalizePort=function(n){return"string"==typeof this._parts.protocol&&this._parts.port===u.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!n)),this},f.normalizePath=function(n){if(this._parts.urn||!this._parts.path||"/"===this._parts.path)return this;var e,t=this._parts.path,r="",i,f;for("/"!==t.charAt(0)&&(e=!0,t="/"+t),t=t.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/"),e&&(r=t.substring(1).match(/^(\.\.\/)+/)||"")&&(r=r[0]);;){if(i=t.indexOf("/.."),-1===i)break;else if(0===i){t=t.substring(3);continue}f=t.substring(0,i).lastIndexOf("/");-1===f&&(f=i);t=t.substring(0,f)+t.substring(i+3)}return e&&this.is("relative")&&(t=r+t.substring(1)),t=u.recodePath(t),this._parts.path=t,this.build(!n),this},f.normalizePathname=f.normalizePath,f.normalizeQuery=function(n){return"string"==typeof this._parts.query&&(this._parts.query.length?this.query(u.parseQuery(this._parts.query,this._parts.escapeQuerySpace)):this._parts.query=null,this.build(!n)),this},f.normalizeFragment=function(n){return this._parts.fragment||(this._parts.fragment=null,this.build(!n)),this},f.normalizeSearch=f.normalizeQuery,f.normalizeHash=f.normalizeFragment,f.iso8859=function(){var n=u.encode,t=u.decode;return u.encode=escape,u.decode=decodeURIComponent,this.normalize(),u.encode=n,u.decode=t,this},f.unicode=function(){var n=u.encode,t=u.decode;return u.encode=y,u.decode=unescape,this.normalize(),u.encode=n,u.decode=t,this},f.readable=function(){var t=this.clone(),i,f,r;if(t.username("").password("").normalize(),i="",t._parts.protocol&&(i+=t._parts.protocol+"://"),t._parts.hostname&&(t.is("punycode")&&n?(i+=n.toUnicode(t._parts.hostname),t._parts.port&&(i+=":"+t._parts.port)):i+=t.host()),t._parts.hostname&&t._parts.path&&"/"!==t._parts.path.charAt(0)&&(i+="/"),i+=t.path(!0),t._parts.query){for(var r="",e=0,o=t._parts.query.split("&"),s=o.length;e<s;e++)f=(o[e]||"").split("="),r=r+("&"+u.decodeQuery(f[0],this._parts.escapeQuerySpace).replace(/&/g,"%26")),void 0!==f[1]&&(r+="="+u.decodeQuery(f[1],this._parts.escapeQuerySpace).replace(/&/g,"%26"));i+="?"+r.substring(1)}return i+u.decodeQuery(t.hash(),!0)},f.absoluteTo=function(n){var t=this.clone(),f=["protocol","username","password","hostname","port"],i,r;if(this._parts.urn)throw Error("URNs do not have any generally defined hierarchical components");if(n instanceof u||(n=new u(n)),t._parts.protocol||(t._parts.protocol=n._parts.protocol),this._parts.hostname)return t;for(i=0;r=f[i];i++)t._parts[r]=n._parts[r];return t._parts.path?".."===t._parts.path.substring(-2)&&(t._parts.path+="/"):(t._parts.path=n._parts.path,t._parts.query||(t._parts.query=n._parts.query)),"/"!==t.path().charAt(0)&&(n=n.directory(),t._parts.path=(n?n+"/":"")+t._parts.path,t.normalizePath()),t.build(),t},f.relativeTo=function(n){var r=this.clone().normalize(),t,i,f,e;if(r._parts.urn)throw Error("URNs do not have any generally defined hierarchical components");if(n=new u(n).normalize(),t=r._parts,i=n._parts,f=r.path(),e=n.path(),"/"!==f.charAt(0))throw Error("URI is already relative");if("/"!==e.charAt(0))throw Error("Cannot calculate a URI relative to another relative URI");if(t.protocol===i.protocol&&(t.protocol=null),t.username===i.username&&t.password===i.password&&null===t.protocol&&null===t.username&&null===t.password&&t.hostname===i.hostname&&t.port===i.port)t.hostname=null,t.port=null;else return r.build();return f===e?(t.path="",r.build()):(n=u.commonPath(r.path(),n.path()),!n)?r.build():(i=i.path.substring(n.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../"),t.path=i+t.path.substring(n.length),r.build())},f.equals=function(n){var f=this.clone();n=new u(n);var i={},r={},o={},t;if(f.normalize(),n.normalize(),f.toString()===n.toString())return!0;if(i=f.query(),r=n.query(),f.query(""),n.query(""),f.toString()!==n.toString()||i.length!==r.length)return!1;i=u.parseQuery(i,this._parts.escapeQuerySpace);r=u.parseQuery(r,this._parts.escapeQuerySpace);for(t in i)if(h.call(i,t)){if(e(i[t])){if(!p(i[t],r[t]))return!1}else if(i[t]!==r[t])return!1;o[t]=!0}for(t in r)if(h.call(r,t)&&!o[t])return!1;return!0},f.duplicateQueryParameters=function(n){return this._parts.duplicateQueryParameters=!!n,this},f.escapeQuerySpace=function(n){return this._parts.escapeQuerySpace=!!n,this},u});+function(n,t){"use strict";function i(i){var u=n(this),e=u.data("serialized-query"),r=u.data("target"),c=u.closest(".entitylist"),o=c.find(".entity-grid").filter(":first"),s,f,h;o.length==1&&r?(i.preventDefault(),h=n(r).find("input,select").serialize(),o.trigger("metafilter",h)):r&&e&&(s=n(r).find("input,select").serialize(),f=new t,f.setSearch(e,s),window.location.href=f.toString())}function r(){var t=n(this).data("target");t&&n(t).find("input:radio").click(function(){var i=n(this);i.data("checked")?(i.data("checked",null),i.prop("checked",!1)):(n(t).find("input:radio[name="+i.prop("name")+"]").data("checked",null),i.data("checked",!0))})}n(document).on("click.adx.serialized-query.data-api","[data-serialized-query]",i);n(document).ready(function(){n("[data-serialized-query]").each(r)})}(jQuery,URI);$(document).ready(function(){if($("[data-badge]")){var n={},t;$("[data-badge]").each(function(i,r){t=$(r).attr("data-uri");n[t]||(n[t]=Array());n[t].push($(r))});$.each(n,function(n,t){t[0].attr("data-uri")&&$.ajax({type:"GET",url:t[0].attr("data-uri"),contentType:"application/json; charset=utf-8",dataType:"html"}).done(function(n){$.each(t,function(t,i){$(i).html(n);$(i).find('[data-toggle="popover"]').popover({html:!0,template:'<div class="popover" role="tooltip"><div class="arrow"><\/div><h3 class="popover-title"><\/h3><div class="popover-content" style="padding-bottom:3px;"><\/div><\/div>'})})})})}}),function(n){function t(t){this._element=n(t);this._target=this._element.data("target")||{};this._serviceUrlGet=this._element.attr("data-url-get");this._serviceUrlAddFiles=this._element.attr("data-url-add-files");this._serviceUrlAddFolder=this._element.attr("data-url-add-folder");this._serviceUrlDelete=this._element.attr("data-url-delete");this._addEnabled=this._element.data("add-enabled");this._deleteEnabled=this._element.data("delete-enabled");this._pageSize=this._element.attr("data-pagesize");this._addSuccess=!1;this._deleteSuccess=!1;var i=this;n(t).on("refresh",function(n,t){i.load(t)})}function i(t,i){if(typeof t!=typeof undefined&&t!==!1&&t!=null){console.log(t);var u=i.find(".modal-body"),r=i.find(".alert-danger.error");r.length==0?r=n("<div><\/div>").addClass("alert alert-block alert-danger error clearfix"):r.empty();typeof t.InnerError!=typeof undefined&&typeof t.InnerError.Message!=typeof undefined&&t.InnerError.Message!==!1&&t.InnerError.Message!=null?typeof t.InnerError.Message=="number"?r.append("<p><span class='fa fa-exclamation-triangle' aria-hidden='true'><\/span> "+t.InnerError.Message+" Error<\/p>"):r.append("<p><span class='fa fa-exclamation-triangle' aria-hidden='true'><\/span> "+t.InnerError.Message+"<\/p>"):typeof t.Message!=typeof undefined&&t.Message!==!1&&t.Message!=null&&(typeof t.Message=="number"?r.append("<p><span class='fa fa-exclamation-triangle' aria-hidden='true'><\/span> "+t.Message+" Error<\/p>"):r.append("<p><span class='fa fa-exclamation-triangle' aria-hidden='true'><\/span> "+t.Message+"<\/p>"));u.prepend(r)}}n(document).ready(function(){n(".sharepoint-grid").each(function(){new t(n(this)).render()})});t.prototype.render=function(){var r=this,n=r._element,u=n.children(".grid-actions").find("a.add-file"),t=n.children(".modal-add-file"),f=t.find(".modal-footer .btn-primary"),e=n.children(".grid-actions").find("a.add-folder"),i=n.children(".modal-add-folder"),o=i.find(".modal-footer .btn-primary");if(r.load(),r._addEnabled){u.on("click",function(){var i=t.find(".destination-group"),r=n.attr("data-folderpath");r?(i.find("p.destination-folder").html(r+"/"),i.show()):i.hide();t.modal("show")});f.on("click",function(){r.addFile()});t.on("hidden.bs.modal",function(){t.find("input[type='file']").val("");t.find(".alert-danger.error").remove()});e.on("click",function(){var t=i.find(".destination-group"),r=n.attr("data-folderpath");r?(t.find("p.destination-folder").html(r+"/"),t.show()):t.hide();i.modal("show")});o.on("click",function(){r.addFolder()});i.on("hidden.bs.modal",function(){i.find("#FolderName").val("");i.find(".alert-danger.error").remove()})}};t.prototype.load=function(t){var r=this,i=r._element,u=i.children(".sharepoint-data"),o=i.children(".sharepoint-error"),s=i.children(".sharepoint-empty"),a=i.children(".sharepoint-access-denied"),v=i.children(".sharepoint-loading"),p=i.find(".sharepoint-breadcrumbs"),h=i.find(".sharepoint-pagination"),w=r._serviceUrlGet,b=r._target,k=r._pageSize,c,f,e;o.hide();s.hide();a.hide();u.hide().empty();p.hide().empty();h.hide();v.show();c=i.attr("data-sort-expression")||"FileLeafRef ASC";f=h.data("current-page");(f==null||f=="")&&(f=1);t=t||f;e=h.data("pagesize");(e==null||e=="")&&(e=k);var l=i.attr("data-folderpath")||"",y=l.replace(/[\t\n\f \/>"'<=]/g,""),d=i.attr("data-paging-info"+t+y);r.getData(w,b,c,t,e,d,l,function(t){var f,e;if(typeof t==typeof undefined||t===!1||t==null){s.fadeIn();return}if(typeof t.AccessDenied!=typeof undefined&&t.AccessDenied!==!1&&t.AccessDenied){a.fadeIn();return}if(t.TotalCount==0){s.fadeIn();return}f=n("#sharepoint-template").html();e=Handlebars.compile(f);u.html(e(t));u.find("abbr.timeago").each(function(){var r=n(this).attr("title"),t=window.moment;if(t){var u=dateFormatConverter.convert(i.closest("[data-dateformat]").data("dateformat")||"M/d/yyyy",dateFormatConverter.dotNet,dateFormatConverter.momentJs),f=dateFormatConverter.convert(i.closest("[data-timeformat]").data("timeformat")||"h:mm tt",dateFormatConverter.dotNet,dateFormatConverter.momentJs),e=u+" "+f;n(this).text(t(r).format(e))}});u.find("abbr.timeago").timeago();r.initializeBreadcrumbs(l);u.fadeIn();r.addFolderClickEventHandlers();r._deleteEnabled&&r._deleteEnabled!="False"&&r.addDeleteClickEventHandlers();var o=c.split(" "),h=o[0],v=o[1];i.find(".view-grid").find("table").find("th.sort-enabled a").each(function(){var t=n(this).closest("th");t.data("sort-name")==h&&(v=="ASC"?(t.data("sort-dir","ASC").removeClass("sort-desc").addClass("sort-asc"),t.attr("aria-sort","ascending"),n(this).append(" ").append(n("<span><\/span>").addClass("fa").addClass("fa-arrow-up")).append("<span class='sr-only sort-hint'>. Activate to sort in descending order<\/span>")):(t.data("sort-dir","DESC").removeClass("sort-asc").addClass("sort-desc"),t.attr("aria-sort","descending"),n(this).append(" ").append(n("<span><\/span>").addClass("fa").addClass("fa-arrow-down")).append("<span class='sr-only sort-hint'>. Activate to sort in ascending order<\/span>")),t.addClass("sort"))});r.addSortEventHandlers();r.initializePagination(t,y)},function(n,t,i){o.find(".details").append(i);o.show()},function(){v.hide()})};t.prototype.getData=function(t,i,r,u,f,e,o,s,h,c){var l,a;if(s=n.isFunction(s)?s:function(){},h=n.isFunction(h)?h:function(){},c=n.isFunction(c)?c:function(){},!t||t==""){c.call(this);h.call(this,null,"error","A required service url was not provided.");return}if(!i){c.call(this);h.call(this,null,"error","A required regarding EntityReference parameter was not provided.");return}f=f||-1;l={};l.regarding=i;l.sortExpression=r;l.page=u;l.pageSize=f;l.pagingInfo=e;l.folderPath=o;a=JSON.stringify(l);n.ajax({type:"POST",dataType:"json",contentType:"application/json",url:t,data:a,global:!1}).done(s).fail(h).always(c)};t.prototype.initializeBreadcrumbs=function(t){if(t){var u=this,f=u._element,i=f.find(".sharepoint-breadcrumbs"),r="",e=t.split("/");n.each(e,function(t,o){t==e.length-1?i.append("<li class='active'>"+o+"<\/li>"):o?(r=r+"/"+o,i.append("<li><a href='#' data-folderpath=\""+r+'">'+o+"<\/a><\/li>")):i.append("<li><a href='#' data-folderpath=''><span class='fa fa-step-backward fa-fw' aria-hidden='true'><\/span><span class='sr-only'>Root<\/span><\/a><\/li>");i.find("a").on("click",function(t){t.stopImmediatePropagation();t.preventDefault();f.attr("data-folderpath",n(this).attr("data-folderpath"));u.load(1)})});i.fadeIn()}};t.prototype.addFolderClickEventHandlers=function(){var t=this,i=t._element;i.find(".folder-link").on("click",function(r){r.stopImmediatePropagation();r.preventDefault();i.attr("data-folderpath",n(this).attr("data-folderpath"));t.load(1)})};t.prototype.addFile=function(){var f=this,e=f._element,l=f._target,s=f._serviceUrlAddFiles,t=e.find(".modal-add-file"),a=t.find(".modal-footer button.primary"),v=!1,y,u,h,r,c,o;if(s==null||s==""){y={Message:"System Error",InnerError:{Message:"The URL to the service for this Add File Request could not be determined."}};i(y,t);return}if(u=t.find("input[type='file']"),h=t.find("input[type='checkbox']"),h.length>0&&(v=h.prop("checked")),a.attr("disabled","disabled").prepend("<span class='fa fa-spinner fa-pulse' aria-hidden='true'><\/span> "),window.FormData!==undefined){if(r=new FormData,r.append("regardingEntityLogicalName",l.LogicalName),r.append("regardingEntityId",l.Id),u.length>0&&typeof u[0].files!=typeof undefined&&u[0].files.length>0)for(c=u[0].files,o=0;o<c.length;o++)r.append("files",c[o]);r.append("overwrite",v);e.attr("data-folderpath")&&r.append("folderPath",e.attr("data-folderpath"));n.ajax({url:s,type:"POST",data:r,mimeType:"multipart/form-data",contentType:!1,cache:!1,processData:!1}).done(function(){f._addSuccess=!0;e.trigger("refresh");t.modal("hide")}).fail(function(r){var u=r.getResponseHeader("content-type"),f=u.indexOf("json")>-1?n.parseJSON(r.responseText):{Message:r.status,InnerError:{Message:r.statusText}};i(f,t)}).always(function(){a.removeAttr("disabled","disabled").find(".fa-pulse").remove()})}else i({Message:"Your browser does not support FormData."},t)};t.prototype.addFolder=function(){var t=this,f=t._element,a=t._target,e=t._serviceUrlAddFolder,r=f.find(".modal-add-folder"),o=r.find(".modal-footer button.primary"),s,l;if(e==null||e==""){s={Message:"System Error",InnerError:{Message:"The URL to the service for this Add Folder Request could not be determined."}};i(s,r);return}o.attr("disabled","disabled").prepend("<span class='fa fa-spinner fa-pulse' aria-hidden='true'><\/span> ");var h=r.find("#FolderName").val(),c=f.attr("data-folderpath")||"",u={};u.regarding=a;u.name=h;u.folderPath=c;l=JSON.stringify(u);n.ajax({type:"POST",contentType:"application/json",url:e,data:l}).done(function(){t._addSuccess=!0;f.attr("data-folderpath",c+"/"+h);r.modal("hide");t.load(1)}).fail(function(t){var u=t.getResponseHeader("content-type"),f=u.indexOf("json")>-1?n.parseJSON(t.responseText):{Message:t.status,InnerError:{Message:t.statusText}};i(f,r)}).always(function(){o.removeAttr("disabled","disabled").find(".fa-pulse").remove()})};t.prototype.addDeleteClickEventHandlers=function(){var u=this,f=u._element,e=u._target,o=u._serviceUrlDelete,t=f.children(".modal-delete-file"),r;if(t.length!=0){t.on("hidden.bs.modal",function(){t.find(".sp-item-name").remove();t.find(".alert-danger.error").remove()});if(r=f.children(".modal-delete-folder"),r.length!=0){r.on("hidden.bs.modal",function(){r.find(".sp-item-name").remove();r.find(".alert-danger.error").remove()});f.find(".delete-link").on("click",function(s){var c,l,h,v,a;if(s.stopImmediatePropagation(),s.preventDefault(),c=n(this).closest(".sp-item"),l=c.data("id"),!l||l==""){console.log("Failed to launch delete dialog. Data parameter 'id' is null.");return}h=c.data("foldername")?r:t;v=h.find(".modal-body");v.append(n("<p class='sp-item-name'>").html(c.find("a").html()));a=h.find(".modal-footer button.primary");a.unbind("click");a.on("click",function(){var r,s;n(this).attr("disabled","disabled").prepend("<span class='fa fa-spinner fa-pulse' aria-hidden='true'><\/span>");r={};r.regarding=e;r.id=l;s=JSON.stringify(r);n.ajax({type:"POST",contentType:"application/json",url:o,data:s}).done(function(){u._deleteSuccess=!0;f.trigger("refresh");h.modal("hide")}).fail(function(r){var u=r.getResponseHeader("content-type"),f=u.indexOf("json")>-1?n.parseJSON(r.responseText):{Message:r.status,InnerError:{Message:r.statusText}};i(f,t)}).always(function(){a.removeAttr("disabled","disabled").find(".fa-pulse").remove()})});h.modal()})}}};t.prototype.addSortEventHandlers=function(){var t=this,i=t._element;i.find(".view-grid").find("table").find("th.sort-enabled a").on("click",function(r){var o;r.stopImmediatePropagation();r.preventDefault();var e=n(this).closest("th"),u=e.data("sort-name"),f=e.data("sort-dir");typeof u!=typeof undefined&&u!==!1&&u!==null&&u!==""&&((typeof f==typeof undefined||f===!1)&&(f=""),o=f=="ASC"?u+" DESC":u+" ASC",i.attr("data-sort-expression",o),t.load(1))})};t.prototype.initializePagination=function(t,i){if(typeof t!=typeof undefined&&t!==!1&&t!=null&&typeof t.PageSize!=typeof undefined&&t.PageSize!==!1&&t.PageSize!=null&&typeof t.PageNumber!=typeof undefined&&t.PageNumber!==!1&&t.PageNumber!=null&&typeof t.TotalCount!=typeof undefined&&t.TotalCount!==!1&&t.TotalCount!=null){var e=this,u=e._element,f=u.find(".sharepoint-pagination"),r=parseInt(u.attr("data-page-count"+i))||1;if(t.PagingInfo&&(u.attr("data-paging-info"+(t.PageNumber+1)+i,t.PagingInfo),r<t.PageNumber+1&&(r=t.PageNumber+1,u.attr("data-page-count"+i,r))),r<=1){f.hide();return}f.data("pagesize",t.PageSize).data("pages",r).data("current-page",t.PageNumber).data("count",t.TotalCount).unbind("click").pagination({total_pages:f.data("pages"),current_page:f.data("current-page"),callback:function(t,i){t.stopImmediatePropagation();t.preventDefault();var r=n(t.target).closest("li");r.not(".disabled").length>0&&r.not(".active").length>0&&e.load(i)}}).show()}}}(jQuery);portal=portal||{};portal.convertAbbrDateTimesToTimeAgo=function(n){n("abbr.timeago").each(function(){var t=Date.parse(n(this).text());t&&(n(this).attr("title",t.toString("yyyy-MM-ddTHH:mm:ss")),n(this).text(t.toString("MMMM dd, yyyy h:mm tt")))});n("abbr.timeago").timeago();n("abbr.posttime").each(function(){var t=Date.parse(n(this).text());t&&(n(this).attr("title",t.toString("MMMM dd, yyyy h:mm tt")),n(this).text(t.toString("MMMM dd, yyyy h:mm tt")))})};portal.initializeHtmlEditors=function(){$(document).on("focusin",function(n){$(n.target).closest(".mce-window").length&&n.stopImmediatePropagation()});tinymce.init({selector:".html-editors textarea",content_css:"/css/bootstrap.min.css,/css/tinymce.css",plugins:["advlist autolink lists link image nonbreaking charmap print preview hr anchor code","searchreplace visualblocks visualchars fullscreen","insertdatetime media table contextmenu paste directionality"],toolbar:"styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image media",toolbar_items_size:"small",browser_spellcheck:!0,convert_urls:!1,height:240,resize:"both",end_container_on_empty_block:!0,style_formats:[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",icon:"bold",format:"bold"},{title:"Italic",icon:"italic",format:"italic"},{title:"Underline",icon:"underline",format:"underline"},{title:"Strikethrough",icon:"strikethrough",format:"strikethrough"},{title:"Superscript",icon:"superscript",format:"superscript"},{title:"Subscript",icon:"subscript",format:"subscript"},{title:"Code",icon:"code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"},{title:"Code Block",format:"codeblock"}]},{title:"Alignment",items:[{title:"Left",icon:"alignleft",format:"alignleft"},{title:"Center",icon:"aligncenter",format:"aligncenter"},{title:"Right",icon:"alignright",format:"alignright"},{title:"Justify",icon:"alignjustify",format:"alignjustify"}]}],formats:{codeblock:{block:"pre",classes:"prettyprint linenums"},underline:{inline:"u",exact:!0}},inline_styles:!1,setup:function(n){n.on("change",function(){n.save()})}})},function(n,t){function o(t,i){var r=n(".notifications"),u,f;r.length==0&&(u=n(".page-heading"),r=u.length==0?n("<div class='notifications'><\/div>").prependTo(n("#content-container")):n("<div class='notifications'><\/div>").appendTo(u));r.find(".notification").slideUp().remove();typeof t!=typeof undefined&&t!==!1&&t!=null&&t!=""&&(f=n("<div class='notification alert alert-success success alert-dismissible' role='alert'><button type='button' class='close' data-dismiss='alert' aria-label='Close'><span aria-hidden='true'>&times;<\/span><\/button>"+t+"<\/div>").on("closed.bs.alert",function(){r.find(".notification").length==0&&r.hide()}).prependTo(r),r.show(),window.scrollTo(0,0),i&&setTimeout(function(){f.slideUp(100).remove();r.find(".notification").length==0&&r.hide()},5e3))}var f,r,i,e,u;if(portal.initializeHtmlEditors(),n(function(){var t;portal.convertAbbrDateTimesToTimeAgo(n);t=n(".facebook-signin");t.on("click",function(n){n.preventDefault();window.open(t.attr("href"),"facebook_auth","menubar=1,resizable=1,scrollbars=yes,width=800,height=600")});n(".btn-select").each(function(){var t=n(this),i=n(t.data("target")),r=n("option:selected",i),f=n(t.data("focus")),u=n(".btn .selected",t);r.length>0&&(u.text(r.text()),n('.dropdown-menu li > a[data-value="'+r.val()+'"]',t).parent("li").addClass("active"));i.change(function(){var r=n("option:selected",i);t.find(".dropdown-menu li.active").removeClass("active");u.text(r.text());n('.dropdown-menu li > a[data-value="'+r.val()+'"]',t).parent("li").addClass("active")});n(".dropdown-menu li > a",t).click(function(){var r=n(this),e=r.data("value");n(".dropdown-menu li",t).removeClass("active");r.parent("li").addClass("active");i.val(e);u.text(r.text());f.focus()})});n("abbr.timestamp").each(function(){var t=n(this),i=t.text(),r=Date.parse(i);if(r){t.attr("title",i);var u=dateFormatConverter.convert(t.closest("[data-dateformat]").data("dateformat")||"MMMM d, yyyy",dateFormatConverter.dotNet,dateFormatConverter.momentJs),f=dateFormatConverter.convert(t.closest("[data-timeformat]").data("timeformat")||"h:mm tt",dateFormatConverter.dotNet,dateFormatConverter.momentJs),e=dateFormatConverter.convert(t.attr("data-format"),dateFormatConverter.dotNet,dateFormatConverter.momentJs)||u+" "+f;t.text(moment(r).format(e))}});var i=dateFormatConverter.convert(n(".crmEntityFormView").closest("[data-dateformat]").data("dateformat")||"MM/dd/yyyy",dateFormatConverter.dotNet,dateFormatConverter.momentJs),r=dateFormatConverter.convert(n(".crmEntityFormView").closest("[data-timeformat]").data("timeformat")||"h:mm tt",dateFormatConverter.dotNet,dateFormatConverter.momentJs),u=i+" "+r;n("time").each(function(){if(moment){var t=n(this).attr("datetime");n(this).hasClass("date-only")?n(this).text(moment(t).format(i)):n(this).text(moment(t).format(u))}});n(".vevent").each(function(){var t=n(".dtstart",this),i=n(".dtend",this),e=t.text(),o=i.text(),r=Date.parse(e),u=Date.parse(o);if(r){t.attr("title",e);var s=dateFormatConverter.convert(t.closest("[data-dateformat]").data("dateformat")||"MMMM d, yyyy",dateFormatConverter.dotNet,dateFormatConverter.momentJs),f=dateFormatConverter.convert(t.closest("[data-timeformat]").data("timeformat")||"h:mm tt",dateFormatConverter.dotNet,dateFormatConverter.momentJs),h=dateFormatConverter.convert(t.attr("data-format"),dateFormatConverter.dotNet,dateFormatConverter.momentJs)||s+" "+f;t.text(moment(r).format(h))}if(u){i.attr("title",o);var c=r&&r.getYear()==u.getYear()&&r.getMonth()==u.getMonth()&&r.getDate()==u.getDate(),s=dateFormatConverter.convert(i.closest("[data-dateformat]").data("dateformat")||"MMMM d, yyyy",dateFormatConverter.dotNet,dateFormatConverter.momentJs),f=dateFormatConverter.convert(i.closest("[data-timeformat]").data("timeformat")||"h:mm tt",dateFormatConverter.dotNet,dateFormatConverter.momentJs),h=dateFormatConverter.convert(i.attr("data-format"),dateFormatConverter.dotNet,dateFormatConverter.momentJs)||s+" "+f;i.text(moment(u).format(c?f:h))}});n(".carousel").carousel();n.ui&&n.ui.tooltip&&n.widget.bridge("uitooltip",n.ui.tooltip);n(".has-tooltip").tooltip();prettyPrint(),function(){var t={};n(".shopping-cart-status").each(function(){var r=n(this),u=r.attr("data-href"),f=r.find(".count"),e=f.find(".value"),i;u&&(i=t[u],n.isArray(i)||(i=t[u]=[]),i.push(function(n){n!=null&&n.Count&&n.Count>0&&(e.text(n.Count),f.addClass("visible"),r.addClass("visible"))}))});n.each(t,function(t,i){n.getJSON(t,function(t){n.each(i,function(n,i){i(t)})})})}();n('[data-state="sitemap"]').each(function(){var t=n(this),r=t.data("sitemap-current"),u=t.data("sitemap-ancestor"),f=t.closest("[data-sitemap-state]").data("sitemap-state"),i,e;f&&(r||u)&&(i=f.split(":"),e=i[i.length-1],t.find("[data-sitemap-node]").each(function(){var f=n(this),t=f.data("sitemap-node");t&&n.each(i,function(n,i){n===0?r&&i==t&&f.addClass(r):u&&i==t&&t!=e&&f.addClass(u)})}))}),function(){var t=URI?URI(document.location.href).search(!0)||{}:{};n("[data-query]").each(function(){var i=n(this),r=t[i.data("query")];typeof r!="undefined"&&i.val(r).change()})}()}),typeof t!="undefined"&&t)for(t.zindex=2e3,f=[t.tinymceSettings,t.tinymceCompactSettings],r=0;r<f.length;r++)(i=f[r],i)&&(e=n('head > link[rel="stylesheet"]').map(function(t,i){var r=n(i).attr("href");return r.match(/,/)?null:r}).get(),e.push("/css/tinymce.css"),i.content_css=e.join(","),i.formats=n.extend(i.formats||{},{page_header:{block:"div",classes:"page-header",wrapper:!0},alert_info:{block:"div",classes:"alert alert-info",wrapper:!0},alert_success:{block:"div",classes:"alert alert-success",wrapper:!0},alert_warning:{block:"div",classes:"alert alert-warning",wrapper:!0},alert_danger:{block:"div",classes:"alert alert-danger",wrapper:!0},label_default:{inline:"span",classes:"label label-default"},label_info:{inline:"span",classes:"label label-info"},label_success:{inline:"span",classes:"label label-success"},label_warning:{inline:"span",classes:"label label-warning"},label_danger:{inline:"span",classes:"label label-danger"},well:{block:"div",classes:"well",wrapper:!0},well_sm:{block:"div",classes:"well well-sm",wrapper:!0},well_lg:{block:"div",classes:"well well-lg",wrapper:!0}}),i.style_formats.push({title:"Bootstrap",items:[{title:"Page Header",format:"page_header"},{title:"Alerts",items:[{title:"Alert Info",format:"alert_info"},{title:"Alert Success",format:"alert_success"},{title:"Alert Warning",format:"alert_warning"},{title:"Alert Danger",format:"alert_danger"}]},{title:"Labels",items:[{title:"Label",format:"label_default"},{title:"Label Info",format:"label_info"},{title:"Label Success",format:"label_success"},{title:"Label Warning",format:"label_warning"},{title:"Label Danger",format:"label_danger"}]},{title:"Wells",items:[{title:"Well",format:"well"},{title:"Well (Small)",format:"well_sm"},{title:"Well (Large)",format:"well_lg"}]}]}));(u=n.cookie("adx-notification"),typeof u!=typeof undefined&&u!=null)&&(o(u,!0),n.cookie("adx-notification",null))}(window.jQuery,window.XRM),function(){function n(){var n=$(window).height()-155;$(".modal-body").css({"max-height":n,"overflow-y":"auto","margin-bottom":"20px"})}$(document).ready(n);$(window).resize(n)}()